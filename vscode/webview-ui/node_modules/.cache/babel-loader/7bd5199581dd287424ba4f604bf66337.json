{"ast":null,"code":"/**\n * An implementation of {@link Notifier} that efficiently keeps track of\n * subscribers interested in a specific change notification on an\n * observable source.\n *\n * @remarks\n * This set is optimized for the most common scenario of 1 or 2 subscribers.\n * With this in mind, it can store a subscriber in an internal field, allowing it to avoid Array#push operations.\n * If the set ever exceeds two subscribers, it upgrades to an array automatically.\n * @public\n */\nexport class SubscriberSet {\n  /**\n   * Creates an instance of SubscriberSet for the specified source.\n   * @param source - The object source that subscribers will receive notifications from.\n   * @param initialSubscriber - An initial subscriber to changes.\n   */\n  constructor(source, initialSubscriber) {\n    this.sub1 = void 0;\n    this.sub2 = void 0;\n    this.spillover = void 0;\n    this.source = source;\n    this.sub1 = initialSubscriber;\n  }\n  /**\n   * Checks whether the provided subscriber has been added to this set.\n   * @param subscriber - The subscriber to test for inclusion in this set.\n   */\n\n\n  has(subscriber) {\n    return this.spillover === void 0 ? this.sub1 === subscriber || this.sub2 === subscriber : this.spillover.indexOf(subscriber) !== -1;\n  }\n  /**\n   * Subscribes to notification of changes in an object's state.\n   * @param subscriber - The object that is subscribing for change notification.\n   */\n\n\n  subscribe(subscriber) {\n    const spillover = this.spillover;\n\n    if (spillover === void 0) {\n      if (this.has(subscriber)) {\n        return;\n      }\n\n      if (this.sub1 === void 0) {\n        this.sub1 = subscriber;\n        return;\n      }\n\n      if (this.sub2 === void 0) {\n        this.sub2 = subscriber;\n        return;\n      }\n\n      this.spillover = [this.sub1, this.sub2, subscriber];\n      this.sub1 = void 0;\n      this.sub2 = void 0;\n    } else {\n      const index = spillover.indexOf(subscriber);\n\n      if (index === -1) {\n        spillover.push(subscriber);\n      }\n    }\n  }\n  /**\n   * Unsubscribes from notification of changes in an object's state.\n   * @param subscriber - The object that is unsubscribing from change notification.\n   */\n\n\n  unsubscribe(subscriber) {\n    const spillover = this.spillover;\n\n    if (spillover === void 0) {\n      if (this.sub1 === subscriber) {\n        this.sub1 = void 0;\n      } else if (this.sub2 === subscriber) {\n        this.sub2 = void 0;\n      }\n    } else {\n      const index = spillover.indexOf(subscriber);\n\n      if (index !== -1) {\n        spillover.splice(index, 1);\n      }\n    }\n  }\n  /**\n   * Notifies all subscribers.\n   * @param args - Data passed along to subscribers during notification.\n   */\n\n\n  notify(args) {\n    const spillover = this.spillover;\n    const source = this.source;\n\n    if (spillover === void 0) {\n      const sub1 = this.sub1;\n      const sub2 = this.sub2;\n\n      if (sub1 !== void 0) {\n        sub1.handleChange(source, args);\n      }\n\n      if (sub2 !== void 0) {\n        sub2.handleChange(source, args);\n      }\n    } else {\n      for (let i = 0, ii = spillover.length; i < ii; ++i) {\n        spillover[i].handleChange(source, args);\n      }\n    }\n  }\n\n}\n/**\n * An implementation of Notifier that allows subscribers to be notified\n * of individual property changes on an object.\n * @public\n */\n\nexport class PropertyChangeNotifier {\n  /**\n   * Creates an instance of PropertyChangeNotifier for the specified source.\n   * @param source - The object source that subscribers will receive notifications from.\n   */\n  constructor(source) {\n    this.subscribers = {};\n    this.sourceSubscribers = null;\n    this.source = source;\n  }\n  /**\n   * Notifies all subscribers, based on the specified property.\n   * @param propertyName - The property name, passed along to subscribers during notification.\n   */\n\n\n  notify(propertyName) {\n    var _a;\n\n    const subscribers = this.subscribers[propertyName];\n\n    if (subscribers !== void 0) {\n      subscribers.notify(propertyName);\n    }\n\n    (_a = this.sourceSubscribers) === null || _a === void 0 ? void 0 : _a.notify(propertyName);\n  }\n  /**\n   * Subscribes to notification of changes in an object's state.\n   * @param subscriber - The object that is subscribing for change notification.\n   * @param propertyToWatch - The name of the property that the subscriber is interested in watching for changes.\n   */\n\n\n  subscribe(subscriber, propertyToWatch) {\n    var _a;\n\n    if (propertyToWatch) {\n      let subscribers = this.subscribers[propertyToWatch];\n\n      if (subscribers === void 0) {\n        this.subscribers[propertyToWatch] = subscribers = new SubscriberSet(this.source);\n      }\n\n      subscribers.subscribe(subscriber);\n    } else {\n      this.sourceSubscribers = (_a = this.sourceSubscribers) !== null && _a !== void 0 ? _a : new SubscriberSet(this.source);\n      this.sourceSubscribers.subscribe(subscriber);\n    }\n  }\n  /**\n   * Unsubscribes from notification of changes in an object's state.\n   * @param subscriber - The object that is unsubscribing from change notification.\n   * @param propertyToUnwatch - The name of the property that the subscriber is no longer interested in watching.\n   */\n\n\n  unsubscribe(subscriber, propertyToUnwatch) {\n    var _a;\n\n    if (propertyToUnwatch) {\n      const subscribers = this.subscribers[propertyToUnwatch];\n\n      if (subscribers !== void 0) {\n        subscribers.unsubscribe(subscriber);\n      }\n    } else {\n      (_a = this.sourceSubscribers) === null || _a === void 0 ? void 0 : _a.unsubscribe(subscriber);\n    }\n  }\n\n}","map":{"version":3,"names":["SubscriberSet","constructor","source","initialSubscriber","sub1","sub2","spillover","has","subscriber","indexOf","subscribe","index","push","unsubscribe","splice","notify","args","handleChange","i","ii","length","PropertyChangeNotifier","subscribers","sourceSubscribers","propertyName","_a","propertyToWatch","propertyToUnwatch"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-element/dist/esm/observation/notifier.js"],"sourcesContent":["/**\n * An implementation of {@link Notifier} that efficiently keeps track of\n * subscribers interested in a specific change notification on an\n * observable source.\n *\n * @remarks\n * This set is optimized for the most common scenario of 1 or 2 subscribers.\n * With this in mind, it can store a subscriber in an internal field, allowing it to avoid Array#push operations.\n * If the set ever exceeds two subscribers, it upgrades to an array automatically.\n * @public\n */\nexport class SubscriberSet {\n    /**\n     * Creates an instance of SubscriberSet for the specified source.\n     * @param source - The object source that subscribers will receive notifications from.\n     * @param initialSubscriber - An initial subscriber to changes.\n     */\n    constructor(source, initialSubscriber) {\n        this.sub1 = void 0;\n        this.sub2 = void 0;\n        this.spillover = void 0;\n        this.source = source;\n        this.sub1 = initialSubscriber;\n    }\n    /**\n     * Checks whether the provided subscriber has been added to this set.\n     * @param subscriber - The subscriber to test for inclusion in this set.\n     */\n    has(subscriber) {\n        return this.spillover === void 0\n            ? this.sub1 === subscriber || this.sub2 === subscriber\n            : this.spillover.indexOf(subscriber) !== -1;\n    }\n    /**\n     * Subscribes to notification of changes in an object's state.\n     * @param subscriber - The object that is subscribing for change notification.\n     */\n    subscribe(subscriber) {\n        const spillover = this.spillover;\n        if (spillover === void 0) {\n            if (this.has(subscriber)) {\n                return;\n            }\n            if (this.sub1 === void 0) {\n                this.sub1 = subscriber;\n                return;\n            }\n            if (this.sub2 === void 0) {\n                this.sub2 = subscriber;\n                return;\n            }\n            this.spillover = [this.sub1, this.sub2, subscriber];\n            this.sub1 = void 0;\n            this.sub2 = void 0;\n        }\n        else {\n            const index = spillover.indexOf(subscriber);\n            if (index === -1) {\n                spillover.push(subscriber);\n            }\n        }\n    }\n    /**\n     * Unsubscribes from notification of changes in an object's state.\n     * @param subscriber - The object that is unsubscribing from change notification.\n     */\n    unsubscribe(subscriber) {\n        const spillover = this.spillover;\n        if (spillover === void 0) {\n            if (this.sub1 === subscriber) {\n                this.sub1 = void 0;\n            }\n            else if (this.sub2 === subscriber) {\n                this.sub2 = void 0;\n            }\n        }\n        else {\n            const index = spillover.indexOf(subscriber);\n            if (index !== -1) {\n                spillover.splice(index, 1);\n            }\n        }\n    }\n    /**\n     * Notifies all subscribers.\n     * @param args - Data passed along to subscribers during notification.\n     */\n    notify(args) {\n        const spillover = this.spillover;\n        const source = this.source;\n        if (spillover === void 0) {\n            const sub1 = this.sub1;\n            const sub2 = this.sub2;\n            if (sub1 !== void 0) {\n                sub1.handleChange(source, args);\n            }\n            if (sub2 !== void 0) {\n                sub2.handleChange(source, args);\n            }\n        }\n        else {\n            for (let i = 0, ii = spillover.length; i < ii; ++i) {\n                spillover[i].handleChange(source, args);\n            }\n        }\n    }\n}\n/**\n * An implementation of Notifier that allows subscribers to be notified\n * of individual property changes on an object.\n * @public\n */\nexport class PropertyChangeNotifier {\n    /**\n     * Creates an instance of PropertyChangeNotifier for the specified source.\n     * @param source - The object source that subscribers will receive notifications from.\n     */\n    constructor(source) {\n        this.subscribers = {};\n        this.sourceSubscribers = null;\n        this.source = source;\n    }\n    /**\n     * Notifies all subscribers, based on the specified property.\n     * @param propertyName - The property name, passed along to subscribers during notification.\n     */\n    notify(propertyName) {\n        var _a;\n        const subscribers = this.subscribers[propertyName];\n        if (subscribers !== void 0) {\n            subscribers.notify(propertyName);\n        }\n        (_a = this.sourceSubscribers) === null || _a === void 0 ? void 0 : _a.notify(propertyName);\n    }\n    /**\n     * Subscribes to notification of changes in an object's state.\n     * @param subscriber - The object that is subscribing for change notification.\n     * @param propertyToWatch - The name of the property that the subscriber is interested in watching for changes.\n     */\n    subscribe(subscriber, propertyToWatch) {\n        var _a;\n        if (propertyToWatch) {\n            let subscribers = this.subscribers[propertyToWatch];\n            if (subscribers === void 0) {\n                this.subscribers[propertyToWatch] = subscribers = new SubscriberSet(this.source);\n            }\n            subscribers.subscribe(subscriber);\n        }\n        else {\n            this.sourceSubscribers =\n                (_a = this.sourceSubscribers) !== null && _a !== void 0 ? _a : new SubscriberSet(this.source);\n            this.sourceSubscribers.subscribe(subscriber);\n        }\n    }\n    /**\n     * Unsubscribes from notification of changes in an object's state.\n     * @param subscriber - The object that is unsubscribing from change notification.\n     * @param propertyToUnwatch - The name of the property that the subscriber is no longer interested in watching.\n     */\n    unsubscribe(subscriber, propertyToUnwatch) {\n        var _a;\n        if (propertyToUnwatch) {\n            const subscribers = this.subscribers[propertyToUnwatch];\n            if (subscribers !== void 0) {\n                subscribers.unsubscribe(subscriber);\n            }\n        }\n        else {\n            (_a = this.sourceSubscribers) === null || _a === void 0 ? void 0 : _a.unsubscribe(subscriber);\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}