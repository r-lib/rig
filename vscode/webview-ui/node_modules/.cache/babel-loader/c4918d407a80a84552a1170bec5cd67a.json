{"ast":null,"code":"import { DOM } from \"../dom.js\";\n/**\n * Represents styles that can be applied to a custom element.\n * @public\n */\n\nexport class ElementStyles {\n  constructor() {\n    this.targets = new WeakSet();\n  }\n  /** @internal */\n\n\n  addStylesTo(target) {\n    this.targets.add(target);\n  }\n  /** @internal */\n\n\n  removeStylesFrom(target) {\n    this.targets.delete(target);\n  }\n  /** @internal */\n\n\n  isAttachedTo(target) {\n    return this.targets.has(target);\n  }\n  /**\n   * Associates behaviors with this set of styles.\n   * @param behaviors - The behaviors to associate.\n   */\n\n\n  withBehaviors() {\n    for (var _len = arguments.length, behaviors = new Array(_len), _key = 0; _key < _len; _key++) {\n      behaviors[_key] = arguments[_key];\n    }\n\n    this.behaviors = this.behaviors === null ? behaviors : this.behaviors.concat(behaviors);\n    return this;\n  }\n\n}\n/**\n * Create ElementStyles from ComposableStyles.\n */\n\nElementStyles.create = (() => {\n  if (DOM.supportsAdoptedStyleSheets) {\n    const styleSheetCache = new Map();\n    return styles => // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    new AdoptedStyleSheetsStyles(styles, styleSheetCache);\n  } // eslint-disable-next-line @typescript-eslint/no-use-before-define\n\n\n  return styles => new StyleElementStyles(styles);\n})();\n\nfunction reduceStyles(styles) {\n  return styles.map(x => x instanceof ElementStyles ? reduceStyles(x.styles) : [x]).reduce((prev, curr) => prev.concat(curr), []);\n}\n\nfunction reduceBehaviors(styles) {\n  return styles.map(x => x instanceof ElementStyles ? x.behaviors : null).reduce((prev, curr) => {\n    if (curr === null) {\n      return prev;\n    }\n\n    if (prev === null) {\n      prev = [];\n    }\n\n    return prev.concat(curr);\n  }, null);\n}\n/**\n * https://wicg.github.io/construct-stylesheets/\n * https://developers.google.com/web/updates/2019/02/constructable-stylesheets\n *\n * @internal\n */\n\n\nexport class AdoptedStyleSheetsStyles extends ElementStyles {\n  constructor(styles, styleSheetCache) {\n    super();\n    this.styles = styles;\n    this.styleSheetCache = styleSheetCache;\n    this._styleSheets = void 0;\n    this.behaviors = reduceBehaviors(styles);\n  }\n\n  get styleSheets() {\n    if (this._styleSheets === void 0) {\n      const styles = this.styles;\n      const styleSheetCache = this.styleSheetCache;\n      this._styleSheets = reduceStyles(styles).map(x => {\n        if (x instanceof CSSStyleSheet) {\n          return x;\n        }\n\n        let sheet = styleSheetCache.get(x);\n\n        if (sheet === void 0) {\n          sheet = new CSSStyleSheet();\n          sheet.replaceSync(x);\n          styleSheetCache.set(x, sheet);\n        }\n\n        return sheet;\n      });\n    }\n\n    return this._styleSheets;\n  }\n\n  addStylesTo(target) {\n    target.adoptedStyleSheets = [...target.adoptedStyleSheets, ...this.styleSheets];\n    super.addStylesTo(target);\n  }\n\n  removeStylesFrom(target) {\n    const sourceSheets = this.styleSheets;\n    target.adoptedStyleSheets = target.adoptedStyleSheets.filter(x => sourceSheets.indexOf(x) === -1);\n    super.removeStylesFrom(target);\n  }\n\n}\nlet styleClassId = 0;\n\nfunction getNextStyleClass() {\n  return `fast-style-class-${++styleClassId}`;\n}\n/**\n * @internal\n */\n\n\nexport class StyleElementStyles extends ElementStyles {\n  constructor(styles) {\n    super();\n    this.styles = styles;\n    this.behaviors = null;\n    this.behaviors = reduceBehaviors(styles);\n    this.styleSheets = reduceStyles(styles);\n    this.styleClass = getNextStyleClass();\n  }\n\n  addStylesTo(target) {\n    const styleSheets = this.styleSheets;\n    const styleClass = this.styleClass;\n    target = this.normalizeTarget(target);\n\n    for (let i = 0; i < styleSheets.length; i++) {\n      const element = document.createElement(\"style\");\n      element.innerHTML = styleSheets[i];\n      element.className = styleClass;\n      target.append(element);\n    }\n\n    super.addStylesTo(target);\n  }\n\n  removeStylesFrom(target) {\n    target = this.normalizeTarget(target);\n    const styles = target.querySelectorAll(`.${this.styleClass}`);\n\n    for (let i = 0, ii = styles.length; i < ii; ++i) {\n      target.removeChild(styles[i]);\n    }\n\n    super.removeStylesFrom(target);\n  }\n\n  isAttachedTo(target) {\n    return super.isAttachedTo(this.normalizeTarget(target));\n  }\n\n  normalizeTarget(target) {\n    return target === document ? document.body : target;\n  }\n\n}","map":{"version":3,"names":["DOM","ElementStyles","constructor","targets","WeakSet","addStylesTo","target","add","removeStylesFrom","delete","isAttachedTo","has","withBehaviors","behaviors","concat","create","supportsAdoptedStyleSheets","styleSheetCache","Map","styles","AdoptedStyleSheetsStyles","StyleElementStyles","reduceStyles","map","x","reduce","prev","curr","reduceBehaviors","_styleSheets","styleSheets","CSSStyleSheet","sheet","get","replaceSync","set","adoptedStyleSheets","sourceSheets","filter","indexOf","styleClassId","getNextStyleClass","styleClass","normalizeTarget","i","length","element","document","createElement","innerHTML","className","append","querySelectorAll","ii","removeChild","body"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-element/dist/esm/styles/element-styles.js"],"sourcesContent":["import { DOM } from \"../dom.js\";\n/**\n * Represents styles that can be applied to a custom element.\n * @public\n */\nexport class ElementStyles {\n    constructor() {\n        this.targets = new WeakSet();\n    }\n    /** @internal */\n    addStylesTo(target) {\n        this.targets.add(target);\n    }\n    /** @internal */\n    removeStylesFrom(target) {\n        this.targets.delete(target);\n    }\n    /** @internal */\n    isAttachedTo(target) {\n        return this.targets.has(target);\n    }\n    /**\n     * Associates behaviors with this set of styles.\n     * @param behaviors - The behaviors to associate.\n     */\n    withBehaviors(...behaviors) {\n        this.behaviors =\n            this.behaviors === null ? behaviors : this.behaviors.concat(behaviors);\n        return this;\n    }\n}\n/**\n * Create ElementStyles from ComposableStyles.\n */\nElementStyles.create = (() => {\n    if (DOM.supportsAdoptedStyleSheets) {\n        const styleSheetCache = new Map();\n        return (styles) => \n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new AdoptedStyleSheetsStyles(styles, styleSheetCache);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return (styles) => new StyleElementStyles(styles);\n})();\nfunction reduceStyles(styles) {\n    return styles\n        .map((x) => x instanceof ElementStyles ? reduceStyles(x.styles) : [x])\n        .reduce((prev, curr) => prev.concat(curr), []);\n}\nfunction reduceBehaviors(styles) {\n    return styles\n        .map((x) => (x instanceof ElementStyles ? x.behaviors : null))\n        .reduce((prev, curr) => {\n        if (curr === null) {\n            return prev;\n        }\n        if (prev === null) {\n            prev = [];\n        }\n        return prev.concat(curr);\n    }, null);\n}\n/**\n * https://wicg.github.io/construct-stylesheets/\n * https://developers.google.com/web/updates/2019/02/constructable-stylesheets\n *\n * @internal\n */\nexport class AdoptedStyleSheetsStyles extends ElementStyles {\n    constructor(styles, styleSheetCache) {\n        super();\n        this.styles = styles;\n        this.styleSheetCache = styleSheetCache;\n        this._styleSheets = void 0;\n        this.behaviors = reduceBehaviors(styles);\n    }\n    get styleSheets() {\n        if (this._styleSheets === void 0) {\n            const styles = this.styles;\n            const styleSheetCache = this.styleSheetCache;\n            this._styleSheets = reduceStyles(styles).map((x) => {\n                if (x instanceof CSSStyleSheet) {\n                    return x;\n                }\n                let sheet = styleSheetCache.get(x);\n                if (sheet === void 0) {\n                    sheet = new CSSStyleSheet();\n                    sheet.replaceSync(x);\n                    styleSheetCache.set(x, sheet);\n                }\n                return sheet;\n            });\n        }\n        return this._styleSheets;\n    }\n    addStylesTo(target) {\n        target.adoptedStyleSheets = [...target.adoptedStyleSheets, ...this.styleSheets];\n        super.addStylesTo(target);\n    }\n    removeStylesFrom(target) {\n        const sourceSheets = this.styleSheets;\n        target.adoptedStyleSheets = target.adoptedStyleSheets.filter((x) => sourceSheets.indexOf(x) === -1);\n        super.removeStylesFrom(target);\n    }\n}\nlet styleClassId = 0;\nfunction getNextStyleClass() {\n    return `fast-style-class-${++styleClassId}`;\n}\n/**\n * @internal\n */\nexport class StyleElementStyles extends ElementStyles {\n    constructor(styles) {\n        super();\n        this.styles = styles;\n        this.behaviors = null;\n        this.behaviors = reduceBehaviors(styles);\n        this.styleSheets = reduceStyles(styles);\n        this.styleClass = getNextStyleClass();\n    }\n    addStylesTo(target) {\n        const styleSheets = this.styleSheets;\n        const styleClass = this.styleClass;\n        target = this.normalizeTarget(target);\n        for (let i = 0; i < styleSheets.length; i++) {\n            const element = document.createElement(\"style\");\n            element.innerHTML = styleSheets[i];\n            element.className = styleClass;\n            target.append(element);\n        }\n        super.addStylesTo(target);\n    }\n    removeStylesFrom(target) {\n        target = this.normalizeTarget(target);\n        const styles = target.querySelectorAll(`.${this.styleClass}`);\n        for (let i = 0, ii = styles.length; i < ii; ++i) {\n            target.removeChild(styles[i]);\n        }\n        super.removeStylesFrom(target);\n    }\n    isAttachedTo(target) {\n        return super.isAttachedTo(this.normalizeTarget(target));\n    }\n    normalizeTarget(target) {\n        return target === document ? document.body : target;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}