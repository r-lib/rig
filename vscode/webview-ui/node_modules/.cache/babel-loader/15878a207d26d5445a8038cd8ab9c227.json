{"ast":null,"code":"import _classCallCheck from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { Observable } from \"../observation/observable.js\";\nimport { emptyArray } from \"../platform.js\";\n/**\n * Creates a function that can be used to filter a Node array, selecting only elements.\n * @param selector - An optional selector to restrict the filter to.\n * @public\n */\n\nexport function elements(selector) {\n  if (selector) {\n    return function (value, index, array) {\n      return value.nodeType === 1 && value.matches(selector);\n    };\n  }\n\n  return function (value, index, array) {\n    return value.nodeType === 1;\n  };\n}\n/**\n * A base class for node observation.\n * @internal\n */\n\nexport var NodeObservationBehavior = /*#__PURE__*/function () {\n  /**\n   * Creates an instance of NodeObservationBehavior.\n   * @param target - The target to assign the nodes property on.\n   * @param options - The options to use in configuring node observation.\n   */\n  function NodeObservationBehavior(target, options) {\n    _classCallCheck(this, NodeObservationBehavior);\n\n    this.target = target;\n    this.options = options;\n    this.source = null;\n  }\n  /**\n   * Bind this behavior to the source.\n   * @param source - The source to bind to.\n   * @param context - The execution context that the binding is operating within.\n   */\n\n\n  _createClass(NodeObservationBehavior, [{\n    key: \"bind\",\n    value: function bind(source) {\n      var name = this.options.property;\n      this.shouldUpdate = Observable.getAccessors(source).some(function (x) {\n        return x.name === name;\n      });\n      this.source = source;\n      this.updateTarget(this.computeNodes());\n\n      if (this.shouldUpdate) {\n        this.observe();\n      }\n    }\n    /**\n     * Unbinds this behavior from the source.\n     * @param source - The source to unbind from.\n     */\n\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      this.updateTarget(emptyArray);\n      this.source = null;\n\n      if (this.shouldUpdate) {\n        this.disconnect();\n      }\n    }\n    /** @internal */\n\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent() {\n      this.updateTarget(this.computeNodes());\n    }\n  }, {\n    key: \"computeNodes\",\n    value: function computeNodes() {\n      var nodes = this.getNodes();\n\n      if (this.options.filter !== void 0) {\n        nodes = nodes.filter(this.options.filter);\n      }\n\n      return nodes;\n    }\n  }, {\n    key: \"updateTarget\",\n    value: function updateTarget(value) {\n      this.source[this.options.property] = value;\n    }\n  }]);\n\n  return NodeObservationBehavior;\n}();","map":{"version":3,"names":["Observable","emptyArray","elements","selector","value","index","array","nodeType","matches","NodeObservationBehavior","target","options","source","name","property","shouldUpdate","getAccessors","some","x","updateTarget","computeNodes","observe","disconnect","nodes","getNodes","filter"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-element/dist/esm/templating/node-observation.js"],"sourcesContent":["import { Observable } from \"../observation/observable.js\";\nimport { emptyArray } from \"../platform.js\";\n/**\n * Creates a function that can be used to filter a Node array, selecting only elements.\n * @param selector - An optional selector to restrict the filter to.\n * @public\n */\nexport function elements(selector) {\n    if (selector) {\n        return function (value, index, array) {\n            return value.nodeType === 1 && value.matches(selector);\n        };\n    }\n    return function (value, index, array) {\n        return value.nodeType === 1;\n    };\n}\n/**\n * A base class for node observation.\n * @internal\n */\nexport class NodeObservationBehavior {\n    /**\n     * Creates an instance of NodeObservationBehavior.\n     * @param target - The target to assign the nodes property on.\n     * @param options - The options to use in configuring node observation.\n     */\n    constructor(target, options) {\n        this.target = target;\n        this.options = options;\n        this.source = null;\n    }\n    /**\n     * Bind this behavior to the source.\n     * @param source - The source to bind to.\n     * @param context - The execution context that the binding is operating within.\n     */\n    bind(source) {\n        const name = this.options.property;\n        this.shouldUpdate = Observable.getAccessors(source).some((x) => x.name === name);\n        this.source = source;\n        this.updateTarget(this.computeNodes());\n        if (this.shouldUpdate) {\n            this.observe();\n        }\n    }\n    /**\n     * Unbinds this behavior from the source.\n     * @param source - The source to unbind from.\n     */\n    unbind() {\n        this.updateTarget(emptyArray);\n        this.source = null;\n        if (this.shouldUpdate) {\n            this.disconnect();\n        }\n    }\n    /** @internal */\n    handleEvent() {\n        this.updateTarget(this.computeNodes());\n    }\n    computeNodes() {\n        let nodes = this.getNodes();\n        if (this.options.filter !== void 0) {\n            nodes = nodes.filter(this.options.filter);\n        }\n        return nodes;\n    }\n    updateTarget(value) {\n        this.source[this.options.property] = value;\n    }\n}\n"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,8BAA3B;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;EAC/B,IAAIA,QAAJ,EAAc;IACV,OAAO,UAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,KAAxB,EAA+B;MAClC,OAAOF,KAAK,CAACG,QAAN,KAAmB,CAAnB,IAAwBH,KAAK,CAACI,OAAN,CAAcL,QAAd,CAA/B;IACH,CAFD;EAGH;;EACD,OAAO,UAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,KAAxB,EAA+B;IAClC,OAAOF,KAAK,CAACG,QAAN,KAAmB,CAA1B;EACH,CAFD;AAGH;AACD;AACA;AACA;AACA;;AACA,WAAaE,uBAAb;EACI;AACJ;AACA;AACA;AACA;EACI,iCAAYC,MAAZ,EAAoBC,OAApB,EAA6B;IAAA;;IACzB,KAAKD,MAAL,GAAcA,MAAd;IACA,KAAKC,OAAL,GAAeA,OAAf;IACA,KAAKC,MAAL,GAAc,IAAd;EACH;EACD;AACJ;AACA;AACA;AACA;;;EAfA;IAAA;IAAA,OAgBI,cAAKA,MAAL,EAAa;MACT,IAAMC,IAAI,GAAG,KAAKF,OAAL,CAAaG,QAA1B;MACA,KAAKC,YAAL,GAAoBf,UAAU,CAACgB,YAAX,CAAwBJ,MAAxB,EAAgCK,IAAhC,CAAqC,UAACC,CAAD;QAAA,OAAOA,CAAC,CAACL,IAAF,KAAWA,IAAlB;MAAA,CAArC,CAApB;MACA,KAAKD,MAAL,GAAcA,MAAd;MACA,KAAKO,YAAL,CAAkB,KAAKC,YAAL,EAAlB;;MACA,IAAI,KAAKL,YAAT,EAAuB;QACnB,KAAKM,OAAL;MACH;IACJ;IACD;AACJ;AACA;AACA;;EA5BA;IAAA;IAAA,OA6BI,kBAAS;MACL,KAAKF,YAAL,CAAkBlB,UAAlB;MACA,KAAKW,MAAL,GAAc,IAAd;;MACA,IAAI,KAAKG,YAAT,EAAuB;QACnB,KAAKO,UAAL;MACH;IACJ;IACD;;EApCJ;IAAA;IAAA,OAqCI,uBAAc;MACV,KAAKH,YAAL,CAAkB,KAAKC,YAAL,EAAlB;IACH;EAvCL;IAAA;IAAA,OAwCI,wBAAe;MACX,IAAIG,KAAK,GAAG,KAAKC,QAAL,EAAZ;;MACA,IAAI,KAAKb,OAAL,CAAac,MAAb,KAAwB,KAAK,CAAjC,EAAoC;QAChCF,KAAK,GAAGA,KAAK,CAACE,MAAN,CAAa,KAAKd,OAAL,CAAac,MAA1B,CAAR;MACH;;MACD,OAAOF,KAAP;IACH;EA9CL;IAAA;IAAA,OA+CI,sBAAanB,KAAb,EAAoB;MAChB,KAAKQ,MAAL,CAAY,KAAKD,OAAL,CAAaG,QAAzB,IAAqCV,KAArC;IACH;EAjDL;;EAAA;AAAA"},"metadata":{},"sourceType":"module"}