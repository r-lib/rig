{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { attr, DOM, Observable, observable, volatile } from \"@microsoft/fast-element\";\nimport { keyArrowDown, keyArrowUp, keyEnd, keyEnter, keyEscape, keyHome, keySpace, keyTab, uniqueId } from \"@microsoft/fast-web-utilities\";\nimport { DelegatesARIAListbox, Listbox } from \"../listbox/listbox.js\";\nimport { StartEnd } from \"../patterns/start-end.js\";\nimport { applyMixins } from \"../utilities/apply-mixins.js\";\nimport { FormAssociatedSelect } from \"./select.form-associated.js\";\nimport { SelectPosition } from \"./select.options.js\";\n/**\n * A Select Custom HTML Element.\n * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#select | ARIA select }.\n *\n * @slot start - Content which can be provided before the button content\n * @slot end - Content which can be provided after the button content\n * @slot button-container - The element representing the select button\n * @slot selected-value - The selected value\n * @slot indicator - The visual indicator for the expand/collapse state of the button\n * @slot - The default slot for slotted options\n * @csspart control - The element representing the select invoking element\n * @csspart selected-value - The element wrapping the selected value\n * @csspart indicator - The element wrapping the visual indicator\n * @csspart listbox - The listbox element\n * @fires input - Fires a custom 'input' event when the value updates\n * @fires change - Fires a custom 'change' event when the value updates\n *\n * @public\n */\n\nexport class Select extends FormAssociatedSelect {\n  constructor() {\n    super(...arguments);\n    /**\n     * The open attribute.\n     *\n     * @public\n     * @remarks\n     * HTML Attribute: open\n     */\n\n    this.open = false;\n    /**\n     * Indicates the initial state of the position attribute.\n     *\n     * @internal\n     */\n\n    this.forcedPosition = false;\n    /**\n     * The unique id for the internal listbox element.\n     *\n     * @internal\n     */\n\n    this.listboxId = uniqueId(\"listbox-\");\n    /**\n     * The max height for the listbox when opened.\n     *\n     * @internal\n     */\n\n    this.maxHeight = 0;\n  }\n  /**\n   * Sets focus and synchronizes ARIA attributes when the open property changes.\n   *\n   * @param prev - the previous open value\n   * @param next - the current open value\n   *\n   * @internal\n   */\n\n\n  openChanged(prev, next) {\n    if (!this.collapsible) {\n      return;\n    }\n\n    if (this.open) {\n      this.ariaControls = this.listboxId;\n      this.ariaExpanded = \"true\";\n      this.setPositioning();\n      this.focusAndScrollOptionIntoView();\n      this.indexWhenOpened = this.selectedIndex; // focus is directed to the element when `open` is changed programmatically\n\n      DOM.queueUpdate(() => this.focus());\n      return;\n    }\n\n    this.ariaControls = \"\";\n    this.ariaExpanded = \"false\";\n  }\n  /**\n   * The component is collapsible when in single-selection mode with no size attribute.\n   *\n   * @internal\n   */\n\n\n  get collapsible() {\n    return !(this.multiple || typeof this.size === \"number\");\n  }\n  /**\n   * The value property.\n   *\n   * @public\n   */\n\n\n  get value() {\n    Observable.track(this, \"value\");\n    return this._value;\n  }\n\n  set value(next) {\n    var _a, _b, _c, _d, _e, _f, _g;\n\n    const prev = `${this._value}`;\n\n    if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.length) {\n      const selectedIndex = this._options.findIndex(el => el.value === next);\n\n      const prevSelectedValue = (_c = (_b = this._options[this.selectedIndex]) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : null;\n      const nextSelectedValue = (_e = (_d = this._options[selectedIndex]) === null || _d === void 0 ? void 0 : _d.value) !== null && _e !== void 0 ? _e : null;\n\n      if (selectedIndex === -1 || prevSelectedValue !== nextSelectedValue) {\n        next = \"\";\n        this.selectedIndex = selectedIndex;\n      }\n\n      next = (_g = (_f = this.firstSelectedOption) === null || _f === void 0 ? void 0 : _f.value) !== null && _g !== void 0 ? _g : next;\n    }\n\n    if (prev !== next) {\n      this._value = next;\n      super.valueChanged(prev, next);\n      Observable.notify(this, \"value\");\n      this.updateDisplayValue();\n    }\n  }\n  /**\n   * Sets the value and display value to match the first selected option.\n   *\n   * @param shouldEmit - if true, the input and change events will be emitted\n   *\n   * @internal\n   */\n\n\n  updateValue(shouldEmit) {\n    var _a, _b;\n\n    if (this.$fastController.isConnected) {\n      this.value = (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : \"\";\n    }\n\n    if (shouldEmit) {\n      this.$emit(\"input\");\n      this.$emit(\"change\", this, {\n        bubbles: true,\n        composed: undefined\n      });\n    }\n  }\n  /**\n   * Updates the proxy value when the selected index changes.\n   *\n   * @param prev - the previous selected index\n   * @param next - the next selected index\n   *\n   * @internal\n   */\n\n\n  selectedIndexChanged(prev, next) {\n    super.selectedIndexChanged(prev, next);\n    this.updateValue();\n  }\n\n  positionChanged(prev, next) {\n    this.positionAttribute = next;\n    this.setPositioning();\n  }\n  /**\n   * Calculate and apply listbox positioning based on available viewport space.\n   *\n   * @public\n   */\n\n\n  setPositioning() {\n    const currentBox = this.getBoundingClientRect();\n    const viewportHeight = window.innerHeight;\n    const availableBottom = viewportHeight - currentBox.bottom;\n    this.position = this.forcedPosition ? this.positionAttribute : currentBox.top > availableBottom ? SelectPosition.above : SelectPosition.below;\n    this.positionAttribute = this.forcedPosition ? this.positionAttribute : this.position;\n    this.maxHeight = this.position === SelectPosition.above ? ~~currentBox.top : ~~availableBottom;\n  }\n  /**\n   * The value displayed on the button.\n   *\n   * @public\n   */\n\n\n  get displayValue() {\n    var _a, _b;\n\n    Observable.track(this, \"displayValue\");\n    return (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text) !== null && _b !== void 0 ? _b : \"\";\n  }\n  /**\n   * Synchronize the `aria-disabled` property when the `disabled` property changes.\n   *\n   * @param prev - The previous disabled value\n   * @param next - The next disabled value\n   *\n   * @internal\n   */\n\n\n  disabledChanged(prev, next) {\n    if (super.disabledChanged) {\n      super.disabledChanged(prev, next);\n    }\n\n    this.ariaDisabled = this.disabled ? \"true\" : \"false\";\n  }\n  /**\n   * Reset the element to its first selectable option when its parent form is reset.\n   *\n   * @internal\n   */\n\n\n  formResetCallback() {\n    this.setProxyOptions(); // Call the base class's implementation setDefaultSelectedOption instead of the select's\n    // override, in order to reset the selectedIndex without using the value property.\n\n    super.setDefaultSelectedOption();\n\n    if (this.selectedIndex === -1) {\n      this.selectedIndex = 0;\n    }\n  }\n  /**\n   * Handle opening and closing the listbox when the select is clicked.\n   *\n   * @param e - the mouse event\n   * @internal\n   */\n\n\n  clickHandler(e) {\n    // do nothing if the select is disabled\n    if (this.disabled) {\n      return;\n    }\n\n    if (this.open) {\n      const captured = e.target.closest(`option,[role=option]`);\n\n      if (captured && captured.disabled) {\n        return;\n      }\n    }\n\n    super.clickHandler(e);\n    this.open = this.collapsible && !this.open;\n\n    if (!this.open && this.indexWhenOpened !== this.selectedIndex) {\n      this.updateValue(true);\n    }\n\n    return true;\n  }\n  /**\n   * Handles focus state when the element or its children lose focus.\n   *\n   * @param e - The focus event\n   * @internal\n   */\n\n\n  focusoutHandler(e) {\n    var _a;\n\n    super.focusoutHandler(e);\n\n    if (!this.open) {\n      return true;\n    }\n\n    const focusTarget = e.relatedTarget;\n\n    if (this.isSameNode(focusTarget)) {\n      this.focus();\n      return;\n    }\n\n    if (!((_a = this.options) === null || _a === void 0 ? void 0 : _a.includes(focusTarget))) {\n      this.open = false;\n\n      if (this.indexWhenOpened !== this.selectedIndex) {\n        this.updateValue(true);\n      }\n    }\n  }\n  /**\n   * Updates the value when an option's value changes.\n   *\n   * @param source - the source object\n   * @param propertyName - the property to evaluate\n   *\n   * @internal\n   * @override\n   */\n\n\n  handleChange(source, propertyName) {\n    super.handleChange(source, propertyName);\n\n    if (propertyName === \"value\") {\n      this.updateValue();\n    }\n  }\n  /**\n   * Synchronize the form-associated proxy and updates the value property of the element.\n   *\n   * @param prev - the previous collection of slotted option elements\n   * @param next - the next collection of slotted option elements\n   *\n   * @internal\n   */\n\n\n  slottedOptionsChanged(prev, next) {\n    this.options.forEach(o => {\n      const notifier = Observable.getNotifier(o);\n      notifier.unsubscribe(this, \"value\");\n    });\n    super.slottedOptionsChanged(prev, next);\n    this.options.forEach(o => {\n      const notifier = Observable.getNotifier(o);\n      notifier.subscribe(this, \"value\");\n    });\n    this.setProxyOptions();\n    this.updateValue();\n  }\n  /**\n   * Prevents focus when size is set and a scrollbar is clicked.\n   *\n   * @param e - the mouse event object\n   *\n   * @override\n   * @internal\n   */\n\n\n  mousedownHandler(e) {\n    var _a;\n\n    if (e.offsetX >= 0 && e.offsetX <= ((_a = this.listbox) === null || _a === void 0 ? void 0 : _a.scrollWidth)) {\n      return super.mousedownHandler(e);\n    }\n\n    return this.collapsible;\n  }\n  /**\n   * Sets the multiple property on the proxy element.\n   *\n   * @param prev - the previous multiple value\n   * @param next - the current multiple value\n   */\n\n\n  multipleChanged(prev, next) {\n    super.multipleChanged(prev, next);\n\n    if (this.proxy) {\n      this.proxy.multiple = next;\n    }\n  }\n  /**\n   * Updates the selectedness of each option when the list of selected options changes.\n   *\n   * @param prev - the previous list of selected options\n   * @param next - the current list of selected options\n   *\n   * @override\n   * @internal\n   */\n\n\n  selectedOptionsChanged(prev, next) {\n    var _a;\n\n    super.selectedOptionsChanged(prev, next);\n    (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach((o, i) => {\n      var _a;\n\n      const proxyOption = (_a = this.proxy) === null || _a === void 0 ? void 0 : _a.options.item(i);\n\n      if (proxyOption) {\n        proxyOption.selected = o.selected;\n      }\n    });\n  }\n  /**\n   * Sets the selected index to match the first option with the selected attribute, or\n   * the first selectable option.\n   *\n   * @override\n   * @internal\n   */\n\n\n  setDefaultSelectedOption() {\n    var _a;\n\n    const options = (_a = this.options) !== null && _a !== void 0 ? _a : Array.from(this.children).filter(Listbox.slottedOptionFilter);\n    const selectedIndex = options === null || options === void 0 ? void 0 : options.findIndex(el => el.hasAttribute(\"selected\") || el.selected || el.value === this.value);\n\n    if (selectedIndex !== -1) {\n      this.selectedIndex = selectedIndex;\n      return;\n    }\n\n    this.selectedIndex = 0;\n  }\n  /**\n   * Resets and fills the proxy to match the component's options.\n   *\n   * @internal\n   */\n\n\n  setProxyOptions() {\n    if (this.proxy instanceof HTMLSelectElement && this.options) {\n      this.proxy.options.length = 0;\n      this.options.forEach(option => {\n        const proxyOption = option.proxy || (option instanceof HTMLOptionElement ? option.cloneNode() : null);\n\n        if (proxyOption) {\n          this.proxy.options.add(proxyOption);\n        }\n      });\n    }\n  }\n  /**\n   * Handle keyboard interaction for the select.\n   *\n   * @param e - the keyboard event\n   * @internal\n   */\n\n\n  keydownHandler(e) {\n    super.keydownHandler(e);\n    const key = e.key || e.key.charCodeAt(0);\n\n    switch (key) {\n      case keySpace:\n        {\n          e.preventDefault();\n\n          if (this.collapsible && this.typeAheadExpired) {\n            this.open = !this.open;\n          }\n\n          break;\n        }\n\n      case keyHome:\n      case keyEnd:\n        {\n          e.preventDefault();\n          break;\n        }\n\n      case keyEnter:\n        {\n          e.preventDefault();\n          this.open = !this.open;\n          break;\n        }\n\n      case keyEscape:\n        {\n          if (this.collapsible && this.open) {\n            e.preventDefault();\n            this.open = false;\n          }\n\n          break;\n        }\n\n      case keyTab:\n        {\n          if (this.collapsible && this.open) {\n            e.preventDefault();\n            this.open = false;\n          }\n\n          return true;\n        }\n    }\n\n    if (!this.open && this.indexWhenOpened !== this.selectedIndex) {\n      this.updateValue(true);\n      this.indexWhenOpened = this.selectedIndex;\n    }\n\n    return !(key === keyArrowDown || key === keyArrowUp);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.forcedPosition = !!this.positionAttribute;\n    this.addEventListener(\"contentchange\", this.updateDisplayValue);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"contentchange\", this.updateDisplayValue);\n    super.disconnectedCallback();\n  }\n  /**\n   * Updates the proxy's size property when the size attribute changes.\n   *\n   * @param prev - the previous size\n   * @param next - the current size\n   *\n   * @override\n   * @internal\n   */\n\n\n  sizeChanged(prev, next) {\n    super.sizeChanged(prev, next);\n\n    if (this.proxy) {\n      this.proxy.size = next;\n    }\n  }\n  /**\n   *\n   * @internal\n   */\n\n\n  updateDisplayValue() {\n    if (this.collapsible) {\n      Observable.notify(this, \"displayValue\");\n    }\n  }\n\n}\n\n__decorate([attr({\n  attribute: \"open\",\n  mode: \"boolean\"\n})], Select.prototype, \"open\", void 0);\n\n__decorate([volatile], Select.prototype, \"collapsible\", null);\n\n__decorate([observable], Select.prototype, \"control\", void 0);\n\n__decorate([attr({\n  attribute: \"position\"\n})], Select.prototype, \"positionAttribute\", void 0);\n\n__decorate([observable], Select.prototype, \"position\", void 0);\n\n__decorate([observable], Select.prototype, \"maxHeight\", void 0);\n/**\n * Includes ARIA states and properties relating to the ARIA select role.\n *\n * @public\n */\n\n\nexport class DelegatesARIASelect {}\n\n__decorate([observable], DelegatesARIASelect.prototype, \"ariaControls\", void 0);\n\napplyMixins(DelegatesARIASelect, DelegatesARIAListbox);\napplyMixins(Select, StartEnd, DelegatesARIASelect);","map":{"version":3,"names":["__decorate","attr","DOM","Observable","observable","volatile","keyArrowDown","keyArrowUp","keyEnd","keyEnter","keyEscape","keyHome","keySpace","keyTab","uniqueId","DelegatesARIAListbox","Listbox","StartEnd","applyMixins","FormAssociatedSelect","SelectPosition","Select","constructor","arguments","open","forcedPosition","listboxId","maxHeight","openChanged","prev","next","collapsible","ariaControls","ariaExpanded","setPositioning","focusAndScrollOptionIntoView","indexWhenOpened","selectedIndex","queueUpdate","focus","multiple","size","value","track","_value","_a","_b","_c","_d","_e","_f","_g","_options","length","findIndex","el","prevSelectedValue","nextSelectedValue","firstSelectedOption","valueChanged","notify","updateDisplayValue","updateValue","shouldEmit","$fastController","isConnected","$emit","bubbles","composed","undefined","selectedIndexChanged","positionChanged","positionAttribute","currentBox","getBoundingClientRect","viewportHeight","window","innerHeight","availableBottom","bottom","position","top","above","below","displayValue","text","disabledChanged","ariaDisabled","disabled","formResetCallback","setProxyOptions","setDefaultSelectedOption","clickHandler","e","captured","target","closest","focusoutHandler","focusTarget","relatedTarget","isSameNode","options","includes","handleChange","source","propertyName","slottedOptionsChanged","forEach","o","notifier","getNotifier","unsubscribe","subscribe","mousedownHandler","offsetX","listbox","scrollWidth","multipleChanged","proxy","selectedOptionsChanged","i","proxyOption","item","selected","Array","from","children","filter","slottedOptionFilter","hasAttribute","HTMLSelectElement","option","HTMLOptionElement","cloneNode","add","keydownHandler","key","charCodeAt","preventDefault","typeAheadExpired","connectedCallback","addEventListener","disconnectedCallback","removeEventListener","sizeChanged","attribute","mode","prototype","DelegatesARIASelect"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-foundation/dist/esm/select/select.js"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { attr, DOM, Observable, observable, volatile } from \"@microsoft/fast-element\";\nimport { keyArrowDown, keyArrowUp, keyEnd, keyEnter, keyEscape, keyHome, keySpace, keyTab, uniqueId, } from \"@microsoft/fast-web-utilities\";\nimport { DelegatesARIAListbox, Listbox } from \"../listbox/listbox.js\";\nimport { StartEnd } from \"../patterns/start-end.js\";\nimport { applyMixins } from \"../utilities/apply-mixins.js\";\nimport { FormAssociatedSelect } from \"./select.form-associated.js\";\nimport { SelectPosition } from \"./select.options.js\";\n/**\n * A Select Custom HTML Element.\n * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#select | ARIA select }.\n *\n * @slot start - Content which can be provided before the button content\n * @slot end - Content which can be provided after the button content\n * @slot button-container - The element representing the select button\n * @slot selected-value - The selected value\n * @slot indicator - The visual indicator for the expand/collapse state of the button\n * @slot - The default slot for slotted options\n * @csspart control - The element representing the select invoking element\n * @csspart selected-value - The element wrapping the selected value\n * @csspart indicator - The element wrapping the visual indicator\n * @csspart listbox - The listbox element\n * @fires input - Fires a custom 'input' event when the value updates\n * @fires change - Fires a custom 'change' event when the value updates\n *\n * @public\n */\nexport class Select extends FormAssociatedSelect {\n    constructor() {\n        super(...arguments);\n        /**\n         * The open attribute.\n         *\n         * @public\n         * @remarks\n         * HTML Attribute: open\n         */\n        this.open = false;\n        /**\n         * Indicates the initial state of the position attribute.\n         *\n         * @internal\n         */\n        this.forcedPosition = false;\n        /**\n         * The unique id for the internal listbox element.\n         *\n         * @internal\n         */\n        this.listboxId = uniqueId(\"listbox-\");\n        /**\n         * The max height for the listbox when opened.\n         *\n         * @internal\n         */\n        this.maxHeight = 0;\n    }\n    /**\n     * Sets focus and synchronizes ARIA attributes when the open property changes.\n     *\n     * @param prev - the previous open value\n     * @param next - the current open value\n     *\n     * @internal\n     */\n    openChanged(prev, next) {\n        if (!this.collapsible) {\n            return;\n        }\n        if (this.open) {\n            this.ariaControls = this.listboxId;\n            this.ariaExpanded = \"true\";\n            this.setPositioning();\n            this.focusAndScrollOptionIntoView();\n            this.indexWhenOpened = this.selectedIndex;\n            // focus is directed to the element when `open` is changed programmatically\n            DOM.queueUpdate(() => this.focus());\n            return;\n        }\n        this.ariaControls = \"\";\n        this.ariaExpanded = \"false\";\n    }\n    /**\n     * The component is collapsible when in single-selection mode with no size attribute.\n     *\n     * @internal\n     */\n    get collapsible() {\n        return !(this.multiple || typeof this.size === \"number\");\n    }\n    /**\n     * The value property.\n     *\n     * @public\n     */\n    get value() {\n        Observable.track(this, \"value\");\n        return this._value;\n    }\n    set value(next) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const prev = `${this._value}`;\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.length) {\n            const selectedIndex = this._options.findIndex(el => el.value === next);\n            const prevSelectedValue = (_c = (_b = this._options[this.selectedIndex]) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : null;\n            const nextSelectedValue = (_e = (_d = this._options[selectedIndex]) === null || _d === void 0 ? void 0 : _d.value) !== null && _e !== void 0 ? _e : null;\n            if (selectedIndex === -1 || prevSelectedValue !== nextSelectedValue) {\n                next = \"\";\n                this.selectedIndex = selectedIndex;\n            }\n            next = (_g = (_f = this.firstSelectedOption) === null || _f === void 0 ? void 0 : _f.value) !== null && _g !== void 0 ? _g : next;\n        }\n        if (prev !== next) {\n            this._value = next;\n            super.valueChanged(prev, next);\n            Observable.notify(this, \"value\");\n            this.updateDisplayValue();\n        }\n    }\n    /**\n     * Sets the value and display value to match the first selected option.\n     *\n     * @param shouldEmit - if true, the input and change events will be emitted\n     *\n     * @internal\n     */\n    updateValue(shouldEmit) {\n        var _a, _b;\n        if (this.$fastController.isConnected) {\n            this.value = (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : \"\";\n        }\n        if (shouldEmit) {\n            this.$emit(\"input\");\n            this.$emit(\"change\", this, {\n                bubbles: true,\n                composed: undefined,\n            });\n        }\n    }\n    /**\n     * Updates the proxy value when the selected index changes.\n     *\n     * @param prev - the previous selected index\n     * @param next - the next selected index\n     *\n     * @internal\n     */\n    selectedIndexChanged(prev, next) {\n        super.selectedIndexChanged(prev, next);\n        this.updateValue();\n    }\n    positionChanged(prev, next) {\n        this.positionAttribute = next;\n        this.setPositioning();\n    }\n    /**\n     * Calculate and apply listbox positioning based on available viewport space.\n     *\n     * @public\n     */\n    setPositioning() {\n        const currentBox = this.getBoundingClientRect();\n        const viewportHeight = window.innerHeight;\n        const availableBottom = viewportHeight - currentBox.bottom;\n        this.position = this.forcedPosition\n            ? this.positionAttribute\n            : currentBox.top > availableBottom\n                ? SelectPosition.above\n                : SelectPosition.below;\n        this.positionAttribute = this.forcedPosition\n            ? this.positionAttribute\n            : this.position;\n        this.maxHeight =\n            this.position === SelectPosition.above ? ~~currentBox.top : ~~availableBottom;\n    }\n    /**\n     * The value displayed on the button.\n     *\n     * @public\n     */\n    get displayValue() {\n        var _a, _b;\n        Observable.track(this, \"displayValue\");\n        return (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text) !== null && _b !== void 0 ? _b : \"\";\n    }\n    /**\n     * Synchronize the `aria-disabled` property when the `disabled` property changes.\n     *\n     * @param prev - The previous disabled value\n     * @param next - The next disabled value\n     *\n     * @internal\n     */\n    disabledChanged(prev, next) {\n        if (super.disabledChanged) {\n            super.disabledChanged(prev, next);\n        }\n        this.ariaDisabled = this.disabled ? \"true\" : \"false\";\n    }\n    /**\n     * Reset the element to its first selectable option when its parent form is reset.\n     *\n     * @internal\n     */\n    formResetCallback() {\n        this.setProxyOptions();\n        // Call the base class's implementation setDefaultSelectedOption instead of the select's\n        // override, in order to reset the selectedIndex without using the value property.\n        super.setDefaultSelectedOption();\n        if (this.selectedIndex === -1) {\n            this.selectedIndex = 0;\n        }\n    }\n    /**\n     * Handle opening and closing the listbox when the select is clicked.\n     *\n     * @param e - the mouse event\n     * @internal\n     */\n    clickHandler(e) {\n        // do nothing if the select is disabled\n        if (this.disabled) {\n            return;\n        }\n        if (this.open) {\n            const captured = e.target.closest(`option,[role=option]`);\n            if (captured && captured.disabled) {\n                return;\n            }\n        }\n        super.clickHandler(e);\n        this.open = this.collapsible && !this.open;\n        if (!this.open && this.indexWhenOpened !== this.selectedIndex) {\n            this.updateValue(true);\n        }\n        return true;\n    }\n    /**\n     * Handles focus state when the element or its children lose focus.\n     *\n     * @param e - The focus event\n     * @internal\n     */\n    focusoutHandler(e) {\n        var _a;\n        super.focusoutHandler(e);\n        if (!this.open) {\n            return true;\n        }\n        const focusTarget = e.relatedTarget;\n        if (this.isSameNode(focusTarget)) {\n            this.focus();\n            return;\n        }\n        if (!((_a = this.options) === null || _a === void 0 ? void 0 : _a.includes(focusTarget))) {\n            this.open = false;\n            if (this.indexWhenOpened !== this.selectedIndex) {\n                this.updateValue(true);\n            }\n        }\n    }\n    /**\n     * Updates the value when an option's value changes.\n     *\n     * @param source - the source object\n     * @param propertyName - the property to evaluate\n     *\n     * @internal\n     * @override\n     */\n    handleChange(source, propertyName) {\n        super.handleChange(source, propertyName);\n        if (propertyName === \"value\") {\n            this.updateValue();\n        }\n    }\n    /**\n     * Synchronize the form-associated proxy and updates the value property of the element.\n     *\n     * @param prev - the previous collection of slotted option elements\n     * @param next - the next collection of slotted option elements\n     *\n     * @internal\n     */\n    slottedOptionsChanged(prev, next) {\n        this.options.forEach(o => {\n            const notifier = Observable.getNotifier(o);\n            notifier.unsubscribe(this, \"value\");\n        });\n        super.slottedOptionsChanged(prev, next);\n        this.options.forEach(o => {\n            const notifier = Observable.getNotifier(o);\n            notifier.subscribe(this, \"value\");\n        });\n        this.setProxyOptions();\n        this.updateValue();\n    }\n    /**\n     * Prevents focus when size is set and a scrollbar is clicked.\n     *\n     * @param e - the mouse event object\n     *\n     * @override\n     * @internal\n     */\n    mousedownHandler(e) {\n        var _a;\n        if (e.offsetX >= 0 && e.offsetX <= ((_a = this.listbox) === null || _a === void 0 ? void 0 : _a.scrollWidth)) {\n            return super.mousedownHandler(e);\n        }\n        return this.collapsible;\n    }\n    /**\n     * Sets the multiple property on the proxy element.\n     *\n     * @param prev - the previous multiple value\n     * @param next - the current multiple value\n     */\n    multipleChanged(prev, next) {\n        super.multipleChanged(prev, next);\n        if (this.proxy) {\n            this.proxy.multiple = next;\n        }\n    }\n    /**\n     * Updates the selectedness of each option when the list of selected options changes.\n     *\n     * @param prev - the previous list of selected options\n     * @param next - the current list of selected options\n     *\n     * @override\n     * @internal\n     */\n    selectedOptionsChanged(prev, next) {\n        var _a;\n        super.selectedOptionsChanged(prev, next);\n        (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach((o, i) => {\n            var _a;\n            const proxyOption = (_a = this.proxy) === null || _a === void 0 ? void 0 : _a.options.item(i);\n            if (proxyOption) {\n                proxyOption.selected = o.selected;\n            }\n        });\n    }\n    /**\n     * Sets the selected index to match the first option with the selected attribute, or\n     * the first selectable option.\n     *\n     * @override\n     * @internal\n     */\n    setDefaultSelectedOption() {\n        var _a;\n        const options = (_a = this.options) !== null && _a !== void 0 ? _a : Array.from(this.children).filter(Listbox.slottedOptionFilter);\n        const selectedIndex = options === null || options === void 0 ? void 0 : options.findIndex(el => el.hasAttribute(\"selected\") || el.selected || el.value === this.value);\n        if (selectedIndex !== -1) {\n            this.selectedIndex = selectedIndex;\n            return;\n        }\n        this.selectedIndex = 0;\n    }\n    /**\n     * Resets and fills the proxy to match the component's options.\n     *\n     * @internal\n     */\n    setProxyOptions() {\n        if (this.proxy instanceof HTMLSelectElement && this.options) {\n            this.proxy.options.length = 0;\n            this.options.forEach(option => {\n                const proxyOption = option.proxy ||\n                    (option instanceof HTMLOptionElement ? option.cloneNode() : null);\n                if (proxyOption) {\n                    this.proxy.options.add(proxyOption);\n                }\n            });\n        }\n    }\n    /**\n     * Handle keyboard interaction for the select.\n     *\n     * @param e - the keyboard event\n     * @internal\n     */\n    keydownHandler(e) {\n        super.keydownHandler(e);\n        const key = e.key || e.key.charCodeAt(0);\n        switch (key) {\n            case keySpace: {\n                e.preventDefault();\n                if (this.collapsible && this.typeAheadExpired) {\n                    this.open = !this.open;\n                }\n                break;\n            }\n            case keyHome:\n            case keyEnd: {\n                e.preventDefault();\n                break;\n            }\n            case keyEnter: {\n                e.preventDefault();\n                this.open = !this.open;\n                break;\n            }\n            case keyEscape: {\n                if (this.collapsible && this.open) {\n                    e.preventDefault();\n                    this.open = false;\n                }\n                break;\n            }\n            case keyTab: {\n                if (this.collapsible && this.open) {\n                    e.preventDefault();\n                    this.open = false;\n                }\n                return true;\n            }\n        }\n        if (!this.open && this.indexWhenOpened !== this.selectedIndex) {\n            this.updateValue(true);\n            this.indexWhenOpened = this.selectedIndex;\n        }\n        return !(key === keyArrowDown || key === keyArrowUp);\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.forcedPosition = !!this.positionAttribute;\n        this.addEventListener(\"contentchange\", this.updateDisplayValue);\n    }\n    disconnectedCallback() {\n        this.removeEventListener(\"contentchange\", this.updateDisplayValue);\n        super.disconnectedCallback();\n    }\n    /**\n     * Updates the proxy's size property when the size attribute changes.\n     *\n     * @param prev - the previous size\n     * @param next - the current size\n     *\n     * @override\n     * @internal\n     */\n    sizeChanged(prev, next) {\n        super.sizeChanged(prev, next);\n        if (this.proxy) {\n            this.proxy.size = next;\n        }\n    }\n    /**\n     *\n     * @internal\n     */\n    updateDisplayValue() {\n        if (this.collapsible) {\n            Observable.notify(this, \"displayValue\");\n        }\n    }\n}\n__decorate([\n    attr({ attribute: \"open\", mode: \"boolean\" })\n], Select.prototype, \"open\", void 0);\n__decorate([\n    volatile\n], Select.prototype, \"collapsible\", null);\n__decorate([\n    observable\n], Select.prototype, \"control\", void 0);\n__decorate([\n    attr({ attribute: \"position\" })\n], Select.prototype, \"positionAttribute\", void 0);\n__decorate([\n    observable\n], Select.prototype, \"position\", void 0);\n__decorate([\n    observable\n], Select.prototype, \"maxHeight\", void 0);\n/**\n * Includes ARIA states and properties relating to the ARIA select role.\n *\n * @public\n */\nexport class DelegatesARIASelect {\n}\n__decorate([\n    observable\n], DelegatesARIASelect.prototype, \"ariaControls\", void 0);\napplyMixins(DelegatesARIASelect, DelegatesARIAListbox);\napplyMixins(Select, StartEnd, DelegatesARIASelect);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}