{"ast":null,"code":"import _classCallCheck from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _createForOfIteratorHelper from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { AttachedBehaviorHTMLDirective, DOM, SubscriberSet } from \"@microsoft/fast-element\";\nvar observer = new MutationObserver(function (mutations) {\n  var _iterator = _createForOfIteratorHelper(mutations),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var mutation = _step.value;\n      AttributeReflectionSubscriptionSet.getOrCreateFor(mutation.target).notify(mutation.attributeName);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n});\n\nvar AttributeReflectionSubscriptionSet = /*#__PURE__*/function (_SubscriberSet) {\n  _inherits(AttributeReflectionSubscriptionSet, _SubscriberSet);\n\n  var _super = _createSuper(AttributeReflectionSubscriptionSet);\n\n  function AttributeReflectionSubscriptionSet(source) {\n    var _this;\n\n    _classCallCheck(this, AttributeReflectionSubscriptionSet);\n\n    _this = _super.call(this, source);\n    _this.watchedAttributes = new Set();\n    AttributeReflectionSubscriptionSet.subscriberCache.set(source, _assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(AttributeReflectionSubscriptionSet, [{\n    key: \"subscribe\",\n    value: function subscribe(subscriber) {\n      _get(_getPrototypeOf(AttributeReflectionSubscriptionSet.prototype), \"subscribe\", this).call(this, subscriber);\n\n      if (!this.watchedAttributes.has(subscriber.attributes)) {\n        this.watchedAttributes.add(subscriber.attributes);\n        this.observe();\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(subscriber) {\n      _get(_getPrototypeOf(AttributeReflectionSubscriptionSet.prototype), \"unsubscribe\", this).call(this, subscriber);\n\n      if (this.watchedAttributes.has(subscriber.attributes)) {\n        this.watchedAttributes.delete(subscriber.attributes);\n        this.observe();\n      }\n    }\n  }, {\n    key: \"observe\",\n    value: function observe() {\n      var attributeFilter = [];\n\n      var _iterator2 = _createForOfIteratorHelper(this.watchedAttributes.values()),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var attributes = _step2.value;\n\n          for (var i = 0; i < attributes.length; i++) {\n            attributeFilter.push(attributes[i]);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      observer.observe(this.source, {\n        attributeFilter: attributeFilter\n      });\n    }\n  }], [{\n    key: \"getOrCreateFor\",\n    value: function getOrCreateFor(source) {\n      return this.subscriberCache.get(source) || new AttributeReflectionSubscriptionSet(source);\n    }\n  }]);\n\n  return AttributeReflectionSubscriptionSet;\n}(SubscriberSet);\n\nAttributeReflectionSubscriptionSet.subscriberCache = new WeakMap();\n\nvar ReflectAttrBehavior = /*#__PURE__*/function () {\n  function ReflectAttrBehavior(target, attributes) {\n    _classCallCheck(this, ReflectAttrBehavior);\n\n    this.target = target;\n    this.attributes = Object.freeze(attributes);\n  }\n\n  _createClass(ReflectAttrBehavior, [{\n    key: \"bind\",\n    value: function bind(source) {\n      AttributeReflectionSubscriptionSet.getOrCreateFor(source).subscribe(this); // Reflect any existing attributes because MutationObserver will only\n      // handle *changes* to attributes.\n\n      if (source.hasAttributes()) {\n        for (var i = 0; i < source.attributes.length; i++) {\n          this.handleChange(source, source.attributes[i].name);\n        }\n      }\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(source) {\n      AttributeReflectionSubscriptionSet.getOrCreateFor(source).unsubscribe(this);\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(source, arg) {\n      // In cases where two or more ReflectAttrBehavior instances are bound to the same element,\n      // they will share a Subscriber implementation. In that case, this handle change can be invoked with\n      // attributes an instances doesn't need to reflect. This guards against reflecting attrs\n      // that shouldn't be reflected.\n      if (this.attributes.includes(arg)) {\n        DOM.setAttribute(this.target, arg, source.getAttribute(arg));\n      }\n    }\n  }]);\n\n  return ReflectAttrBehavior;\n}();\n/**\n * Reflects attributes from the host element to the target element of the directive.\n * @param attributes - The attributes to reflect\n *\n * @beta\n * @example\n * ```ts\n * const template = html`\n *     <button\n *         ${reflectAttributes(\"aria-label\", \"aria-describedby\")}\n *     >\n *          hello world\n *     </button\n * `\n * ```\n */\n\n\nexport function reflectAttributes() {\n  for (var _len = arguments.length, attributes = new Array(_len), _key = 0; _key < _len; _key++) {\n    attributes[_key] = arguments[_key];\n  }\n\n  return new AttachedBehaviorHTMLDirective(\"fast-reflect-attr\", ReflectAttrBehavior, attributes);\n}","map":{"version":3,"names":["AttachedBehaviorHTMLDirective","DOM","SubscriberSet","observer","MutationObserver","mutations","mutation","AttributeReflectionSubscriptionSet","getOrCreateFor","target","notify","attributeName","source","watchedAttributes","Set","subscriberCache","set","subscriber","has","attributes","add","observe","delete","attributeFilter","values","i","length","push","get","WeakMap","ReflectAttrBehavior","Object","freeze","subscribe","hasAttributes","handleChange","name","unsubscribe","arg","includes","setAttribute","getAttribute","reflectAttributes"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-foundation/dist/esm/directives/reflect-attributes.js"],"sourcesContent":["import { AttachedBehaviorHTMLDirective, DOM, SubscriberSet, } from \"@microsoft/fast-element\";\nconst observer = new MutationObserver((mutations) => {\n    for (const mutation of mutations) {\n        AttributeReflectionSubscriptionSet.getOrCreateFor(mutation.target).notify(mutation.attributeName);\n    }\n});\nclass AttributeReflectionSubscriptionSet extends SubscriberSet {\n    constructor(source) {\n        super(source);\n        this.watchedAttributes = new Set();\n        AttributeReflectionSubscriptionSet.subscriberCache.set(source, this);\n    }\n    subscribe(subscriber) {\n        super.subscribe(subscriber);\n        if (!this.watchedAttributes.has(subscriber.attributes)) {\n            this.watchedAttributes.add(subscriber.attributes);\n            this.observe();\n        }\n    }\n    unsubscribe(subscriber) {\n        super.unsubscribe(subscriber);\n        if (this.watchedAttributes.has(subscriber.attributes)) {\n            this.watchedAttributes.delete(subscriber.attributes);\n            this.observe();\n        }\n    }\n    static getOrCreateFor(source) {\n        return (this.subscriberCache.get(source) ||\n            new AttributeReflectionSubscriptionSet(source));\n    }\n    observe() {\n        const attributeFilter = [];\n        for (const attributes of this.watchedAttributes.values()) {\n            for (let i = 0; i < attributes.length; i++) {\n                attributeFilter.push(attributes[i]);\n            }\n        }\n        observer.observe(this.source, { attributeFilter });\n    }\n}\nAttributeReflectionSubscriptionSet.subscriberCache = new WeakMap();\nclass ReflectAttrBehavior {\n    constructor(target, attributes) {\n        this.target = target;\n        this.attributes = Object.freeze(attributes);\n    }\n    bind(source) {\n        AttributeReflectionSubscriptionSet.getOrCreateFor(source).subscribe(this);\n        // Reflect any existing attributes because MutationObserver will only\n        // handle *changes* to attributes.\n        if (source.hasAttributes()) {\n            for (let i = 0; i < source.attributes.length; i++) {\n                this.handleChange(source, source.attributes[i].name);\n            }\n        }\n    }\n    unbind(source) {\n        AttributeReflectionSubscriptionSet.getOrCreateFor(source).unsubscribe(this);\n    }\n    handleChange(source, arg) {\n        // In cases where two or more ReflectAttrBehavior instances are bound to the same element,\n        // they will share a Subscriber implementation. In that case, this handle change can be invoked with\n        // attributes an instances doesn't need to reflect. This guards against reflecting attrs\n        // that shouldn't be reflected.\n        if (this.attributes.includes(arg)) {\n            DOM.setAttribute(this.target, arg, source.getAttribute(arg));\n        }\n    }\n}\n/**\n * Reflects attributes from the host element to the target element of the directive.\n * @param attributes - The attributes to reflect\n *\n * @beta\n * @example\n * ```ts\n * const template = html`\n *     <button\n *         ${reflectAttributes(\"aria-label\", \"aria-describedby\")}\n *     >\n *          hello world\n *     </button\n * `\n * ```\n */\nexport function reflectAttributes(...attributes) {\n    return new AttachedBehaviorHTMLDirective(\"fast-reflect-attr\", ReflectAttrBehavior, attributes);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}