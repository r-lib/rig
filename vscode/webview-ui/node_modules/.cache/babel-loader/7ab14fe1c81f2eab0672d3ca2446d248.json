{"ast":null,"code":"import { $global } from \"./platform.js\";\nconst updateQueue = $global.FAST.getById(1\n/* updateQueue */\n, () => {\n  const tasks = [];\n  const pendingErrors = [];\n\n  function throwFirstError() {\n    if (pendingErrors.length) {\n      throw pendingErrors.shift();\n    }\n  }\n\n  function tryRunTask(task) {\n    try {\n      task.call();\n    } catch (error) {\n      pendingErrors.push(error);\n      setTimeout(throwFirstError, 0);\n    }\n  }\n\n  function process() {\n    const capacity = 1024;\n    let index = 0;\n\n    while (index < tasks.length) {\n      tryRunTask(tasks[index]);\n      index++; // Prevent leaking memory for long chains of recursive calls to `DOM.queueUpdate`.\n      // If we call `DOM.queueUpdate` within a task scheduled by `DOM.queueUpdate`, the queue will\n      // grow, but to avoid an O(n) walk for every task we execute, we don't\n      // shift tasks off the queue after they have been executed.\n      // Instead, we periodically shift 1024 tasks off the queue.\n\n      if (index > capacity) {\n        // Manually shift all values starting at the index back to the\n        // beginning of the queue.\n        for (let scan = 0, newLength = tasks.length - index; scan < newLength; scan++) {\n          tasks[scan] = tasks[scan + index];\n        }\n\n        tasks.length -= index;\n        index = 0;\n      }\n    }\n\n    tasks.length = 0;\n  }\n\n  function enqueue(callable) {\n    if (tasks.length < 1) {\n      $global.requestAnimationFrame(process);\n    }\n\n    tasks.push(callable);\n  }\n\n  return Object.freeze({\n    enqueue,\n    process\n  });\n});\n/* eslint-disable */\n\nconst fastHTMLPolicy = $global.trustedTypes.createPolicy(\"fast-html\", {\n  createHTML: html => html\n});\n/* eslint-enable */\n\nlet htmlPolicy = fastHTMLPolicy;\nconst marker = `fast-${Math.random().toString(36).substring(2, 8)}`;\n/** @internal */\n\nexport const _interpolationStart = `${marker}{`;\n/** @internal */\n\nexport const _interpolationEnd = `}${marker}`;\n/**\n * Common DOM APIs.\n * @public\n */\n\nexport const DOM = Object.freeze({\n  /**\n   * Indicates whether the DOM supports the adoptedStyleSheets feature.\n   */\n  supportsAdoptedStyleSheets: Array.isArray(document.adoptedStyleSheets) && \"replace\" in CSSStyleSheet.prototype,\n\n  /**\n   * Sets the HTML trusted types policy used by the templating engine.\n   * @param policy - The policy to set for HTML.\n   * @remarks\n   * This API can only be called once, for security reasons. It should be\n   * called by the application developer at the start of their program.\n   */\n  setHTMLPolicy(policy) {\n    if (htmlPolicy !== fastHTMLPolicy) {\n      throw new Error(\"The HTML policy can only be set once.\");\n    }\n\n    htmlPolicy = policy;\n  },\n\n  /**\n   * Turns a string into trusted HTML using the configured trusted types policy.\n   * @param html - The string to turn into trusted HTML.\n   * @remarks\n   * Used internally by the template engine when creating templates\n   * and setting innerHTML.\n   */\n  createHTML(html) {\n    return htmlPolicy.createHTML(html);\n  },\n\n  /**\n   * Determines if the provided node is a template marker used by the runtime.\n   * @param node - The node to test.\n   */\n  isMarker(node) {\n    return node && node.nodeType === 8 && node.data.startsWith(marker);\n  },\n\n  /**\n   * Given a marker node, extract the {@link HTMLDirective} index from the placeholder.\n   * @param node - The marker node to extract the index from.\n   */\n  extractDirectiveIndexFromMarker(node) {\n    return parseInt(node.data.replace(`${marker}:`, \"\"));\n  },\n\n  /**\n   * Creates a placeholder string suitable for marking out a location *within*\n   * an attribute value or HTML content.\n   * @param index - The directive index to create the placeholder for.\n   * @remarks\n   * Used internally by binding directives.\n   */\n  createInterpolationPlaceholder(index) {\n    return `${_interpolationStart}${index}${_interpolationEnd}`;\n  },\n\n  /**\n   * Creates a placeholder that manifests itself as an attribute on an\n   * element.\n   * @param attributeName - The name of the custom attribute.\n   * @param index - The directive index to create the placeholder for.\n   * @remarks\n   * Used internally by attribute directives such as `ref`, `slotted`, and `children`.\n   */\n  createCustomAttributePlaceholder(attributeName, index) {\n    return `${attributeName}=\"${this.createInterpolationPlaceholder(index)}\"`;\n  },\n\n  /**\n   * Creates a placeholder that manifests itself as a marker within the DOM structure.\n   * @param index - The directive index to create the placeholder for.\n   * @remarks\n   * Used internally by structural directives such as `repeat`.\n   */\n  createBlockPlaceholder(index) {\n    return `<!--${marker}:${index}-->`;\n  },\n\n  /**\n   * Schedules DOM update work in the next async batch.\n   * @param callable - The callable function or object to queue.\n   */\n  queueUpdate: updateQueue.enqueue,\n\n  /**\n   * Immediately processes all work previously scheduled\n   * through queueUpdate.\n   * @remarks\n   * This also forces nextUpdate promises\n   * to resolve.\n   */\n  processUpdates: updateQueue.process,\n\n  /**\n   * Resolves with the next DOM update.\n   */\n  nextUpdate() {\n    return new Promise(updateQueue.enqueue);\n  },\n\n  /**\n   * Sets an attribute value on an element.\n   * @param element - The element to set the attribute value on.\n   * @param attributeName - The attribute name to set.\n   * @param value - The value of the attribute to set.\n   * @remarks\n   * If the value is `null` or `undefined`, the attribute is removed, otherwise\n   * it is set to the provided value using the standard `setAttribute` API.\n   */\n  setAttribute(element, attributeName, value) {\n    if (value === null || value === undefined) {\n      element.removeAttribute(attributeName);\n    } else {\n      element.setAttribute(attributeName, value);\n    }\n  },\n\n  /**\n   * Sets a boolean attribute value.\n   * @param element - The element to set the boolean attribute value on.\n   * @param attributeName - The attribute name to set.\n   * @param value - The value of the attribute to set.\n   * @remarks\n   * If the value is true, the attribute is added; otherwise it is removed.\n   */\n  setBooleanAttribute(element, attributeName, value) {\n    value ? element.setAttribute(attributeName, \"\") : element.removeAttribute(attributeName);\n  },\n\n  /**\n   * Removes all the child nodes of the provided parent node.\n   * @param parent - The node to remove the children from.\n   */\n  removeChildNodes(parent) {\n    for (let child = parent.firstChild; child !== null; child = parent.firstChild) {\n      parent.removeChild(child);\n    }\n  },\n\n  /**\n   * Creates a TreeWalker configured to walk a template fragment.\n   * @param fragment - The fragment to walk.\n   */\n  createTemplateWalker(fragment) {\n    return document.createTreeWalker(fragment, 133, // element, text, comment\n    null, false);\n  }\n\n});","map":{"version":3,"names":["$global","updateQueue","FAST","getById","tasks","pendingErrors","throwFirstError","length","shift","tryRunTask","task","call","error","push","setTimeout","process","capacity","index","scan","newLength","enqueue","callable","requestAnimationFrame","Object","freeze","fastHTMLPolicy","trustedTypes","createPolicy","createHTML","html","htmlPolicy","marker","Math","random","toString","substring","_interpolationStart","_interpolationEnd","DOM","supportsAdoptedStyleSheets","Array","isArray","document","adoptedStyleSheets","CSSStyleSheet","prototype","setHTMLPolicy","policy","Error","isMarker","node","nodeType","data","startsWith","extractDirectiveIndexFromMarker","parseInt","replace","createInterpolationPlaceholder","createCustomAttributePlaceholder","attributeName","createBlockPlaceholder","queueUpdate","processUpdates","nextUpdate","Promise","setAttribute","element","value","undefined","removeAttribute","setBooleanAttribute","removeChildNodes","parent","child","firstChild","removeChild","createTemplateWalker","fragment","createTreeWalker"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-element/dist/esm/dom.js"],"sourcesContent":["import { $global } from \"./platform.js\";\nconst updateQueue = $global.FAST.getById(1 /* updateQueue */, () => {\n    const tasks = [];\n    const pendingErrors = [];\n    function throwFirstError() {\n        if (pendingErrors.length) {\n            throw pendingErrors.shift();\n        }\n    }\n    function tryRunTask(task) {\n        try {\n            task.call();\n        }\n        catch (error) {\n            pendingErrors.push(error);\n            setTimeout(throwFirstError, 0);\n        }\n    }\n    function process() {\n        const capacity = 1024;\n        let index = 0;\n        while (index < tasks.length) {\n            tryRunTask(tasks[index]);\n            index++;\n            // Prevent leaking memory for long chains of recursive calls to `DOM.queueUpdate`.\n            // If we call `DOM.queueUpdate` within a task scheduled by `DOM.queueUpdate`, the queue will\n            // grow, but to avoid an O(n) walk for every task we execute, we don't\n            // shift tasks off the queue after they have been executed.\n            // Instead, we periodically shift 1024 tasks off the queue.\n            if (index > capacity) {\n                // Manually shift all values starting at the index back to the\n                // beginning of the queue.\n                for (let scan = 0, newLength = tasks.length - index; scan < newLength; scan++) {\n                    tasks[scan] = tasks[scan + index];\n                }\n                tasks.length -= index;\n                index = 0;\n            }\n        }\n        tasks.length = 0;\n    }\n    function enqueue(callable) {\n        if (tasks.length < 1) {\n            $global.requestAnimationFrame(process);\n        }\n        tasks.push(callable);\n    }\n    return Object.freeze({\n        enqueue,\n        process,\n    });\n});\n/* eslint-disable */\nconst fastHTMLPolicy = $global.trustedTypes.createPolicy(\"fast-html\", {\n    createHTML: html => html,\n});\n/* eslint-enable */\nlet htmlPolicy = fastHTMLPolicy;\nconst marker = `fast-${Math.random().toString(36).substring(2, 8)}`;\n/** @internal */\nexport const _interpolationStart = `${marker}{`;\n/** @internal */\nexport const _interpolationEnd = `}${marker}`;\n/**\n * Common DOM APIs.\n * @public\n */\nexport const DOM = Object.freeze({\n    /**\n     * Indicates whether the DOM supports the adoptedStyleSheets feature.\n     */\n    supportsAdoptedStyleSheets: Array.isArray(document.adoptedStyleSheets) &&\n        \"replace\" in CSSStyleSheet.prototype,\n    /**\n     * Sets the HTML trusted types policy used by the templating engine.\n     * @param policy - The policy to set for HTML.\n     * @remarks\n     * This API can only be called once, for security reasons. It should be\n     * called by the application developer at the start of their program.\n     */\n    setHTMLPolicy(policy) {\n        if (htmlPolicy !== fastHTMLPolicy) {\n            throw new Error(\"The HTML policy can only be set once.\");\n        }\n        htmlPolicy = policy;\n    },\n    /**\n     * Turns a string into trusted HTML using the configured trusted types policy.\n     * @param html - The string to turn into trusted HTML.\n     * @remarks\n     * Used internally by the template engine when creating templates\n     * and setting innerHTML.\n     */\n    createHTML(html) {\n        return htmlPolicy.createHTML(html);\n    },\n    /**\n     * Determines if the provided node is a template marker used by the runtime.\n     * @param node - The node to test.\n     */\n    isMarker(node) {\n        return node && node.nodeType === 8 && node.data.startsWith(marker);\n    },\n    /**\n     * Given a marker node, extract the {@link HTMLDirective} index from the placeholder.\n     * @param node - The marker node to extract the index from.\n     */\n    extractDirectiveIndexFromMarker(node) {\n        return parseInt(node.data.replace(`${marker}:`, \"\"));\n    },\n    /**\n     * Creates a placeholder string suitable for marking out a location *within*\n     * an attribute value or HTML content.\n     * @param index - The directive index to create the placeholder for.\n     * @remarks\n     * Used internally by binding directives.\n     */\n    createInterpolationPlaceholder(index) {\n        return `${_interpolationStart}${index}${_interpolationEnd}`;\n    },\n    /**\n     * Creates a placeholder that manifests itself as an attribute on an\n     * element.\n     * @param attributeName - The name of the custom attribute.\n     * @param index - The directive index to create the placeholder for.\n     * @remarks\n     * Used internally by attribute directives such as `ref`, `slotted`, and `children`.\n     */\n    createCustomAttributePlaceholder(attributeName, index) {\n        return `${attributeName}=\"${this.createInterpolationPlaceholder(index)}\"`;\n    },\n    /**\n     * Creates a placeholder that manifests itself as a marker within the DOM structure.\n     * @param index - The directive index to create the placeholder for.\n     * @remarks\n     * Used internally by structural directives such as `repeat`.\n     */\n    createBlockPlaceholder(index) {\n        return `<!--${marker}:${index}-->`;\n    },\n    /**\n     * Schedules DOM update work in the next async batch.\n     * @param callable - The callable function or object to queue.\n     */\n    queueUpdate: updateQueue.enqueue,\n    /**\n     * Immediately processes all work previously scheduled\n     * through queueUpdate.\n     * @remarks\n     * This also forces nextUpdate promises\n     * to resolve.\n     */\n    processUpdates: updateQueue.process,\n    /**\n     * Resolves with the next DOM update.\n     */\n    nextUpdate() {\n        return new Promise(updateQueue.enqueue);\n    },\n    /**\n     * Sets an attribute value on an element.\n     * @param element - The element to set the attribute value on.\n     * @param attributeName - The attribute name to set.\n     * @param value - The value of the attribute to set.\n     * @remarks\n     * If the value is `null` or `undefined`, the attribute is removed, otherwise\n     * it is set to the provided value using the standard `setAttribute` API.\n     */\n    setAttribute(element, attributeName, value) {\n        if (value === null || value === undefined) {\n            element.removeAttribute(attributeName);\n        }\n        else {\n            element.setAttribute(attributeName, value);\n        }\n    },\n    /**\n     * Sets a boolean attribute value.\n     * @param element - The element to set the boolean attribute value on.\n     * @param attributeName - The attribute name to set.\n     * @param value - The value of the attribute to set.\n     * @remarks\n     * If the value is true, the attribute is added; otherwise it is removed.\n     */\n    setBooleanAttribute(element, attributeName, value) {\n        value\n            ? element.setAttribute(attributeName, \"\")\n            : element.removeAttribute(attributeName);\n    },\n    /**\n     * Removes all the child nodes of the provided parent node.\n     * @param parent - The node to remove the children from.\n     */\n    removeChildNodes(parent) {\n        for (let child = parent.firstChild; child !== null; child = parent.firstChild) {\n            parent.removeChild(child);\n        }\n    },\n    /**\n     * Creates a TreeWalker configured to walk a template fragment.\n     * @param fragment - The fragment to walk.\n     */\n    createTemplateWalker(fragment) {\n        return document.createTreeWalker(fragment, 133, // element, text, comment\n        null, false);\n    },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}