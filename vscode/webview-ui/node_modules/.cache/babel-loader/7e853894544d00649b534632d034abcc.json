{"ast":null,"code":"import _classCallCheck from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { __decorate } from \"tslib\";\nimport { DOM, observable } from \"@microsoft/fast-element\";\nimport { isHTMLElement, keyArrowDown, keyArrowUp, keyEnd, keyHome } from \"@microsoft/fast-web-utilities\";\nimport { MenuItem, MenuItemRole, roleForMenuItem } from \"../menu-item/index.js\";\nimport { FoundationElement } from \"../foundation-element/foundation-element.js\";\n/**\n * A Menu Custom HTML Element.\n * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#menu | ARIA menu }.\n *\n * @slot - The default slot for the menu items\n *\n * @public\n */\n\nexport var Menu = /*#__PURE__*/function (_FoundationElement) {\n  _inherits(Menu, _FoundationElement);\n\n  var _super = _createSuper(Menu);\n\n  function Menu() {\n    var _this;\n\n    _classCallCheck(this, Menu);\n\n    _this = _super.apply(this, arguments);\n    _this.expandedItem = null;\n    /**\n     * The index of the focusable element in the items array\n     * defaults to -1\n     */\n\n    _this.focusIndex = -1;\n    /**\n     * @internal\n     */\n\n    _this.isNestedMenu = function () {\n      return _this.parentElement !== null && isHTMLElement(_this.parentElement) && _this.parentElement.getAttribute(\"role\") === \"menuitem\";\n    };\n    /**\n     * if focus is moving out of the menu, reset to a stable initial state\n     * @internal\n     */\n\n\n    _this.handleFocusOut = function (e) {\n      if (!_this.contains(e.relatedTarget) && _this.menuItems !== undefined) {\n        _this.collapseExpandedItem(); // find our first focusable element\n\n\n        var focusIndex = _this.menuItems.findIndex(_this.isFocusableElement); // set the current focus index's tabindex to -1\n\n\n        _this.menuItems[_this.focusIndex].setAttribute(\"tabindex\", \"-1\"); // set the first focusable element tabindex to 0\n\n\n        _this.menuItems[focusIndex].setAttribute(\"tabindex\", \"0\"); // set the focus index\n\n\n        _this.focusIndex = focusIndex;\n      }\n    };\n\n    _this.handleItemFocus = function (e) {\n      var targetItem = e.target;\n\n      if (_this.menuItems !== undefined && targetItem !== _this.menuItems[_this.focusIndex]) {\n        _this.menuItems[_this.focusIndex].setAttribute(\"tabindex\", \"-1\");\n\n        _this.focusIndex = _this.menuItems.indexOf(targetItem);\n        targetItem.setAttribute(\"tabindex\", \"0\");\n      }\n    };\n\n    _this.handleExpandedChanged = function (e) {\n      if (e.defaultPrevented || e.target === null || _this.menuItems === undefined || _this.menuItems.indexOf(e.target) < 0) {\n        return;\n      }\n\n      e.preventDefault();\n      var changedItem = e.target; // closing an expanded item without opening another\n\n      if (_this.expandedItem !== null && changedItem === _this.expandedItem && changedItem.expanded === false) {\n        _this.expandedItem = null;\n        return;\n      }\n\n      if (changedItem.expanded) {\n        if (_this.expandedItem !== null && _this.expandedItem !== changedItem) {\n          _this.expandedItem.expanded = false;\n        }\n\n        _this.menuItems[_this.focusIndex].setAttribute(\"tabindex\", \"-1\");\n\n        _this.expandedItem = changedItem;\n        _this.focusIndex = _this.menuItems.indexOf(changedItem);\n        changedItem.setAttribute(\"tabindex\", \"0\");\n      }\n    };\n\n    _this.removeItemListeners = function () {\n      if (_this.menuItems !== undefined) {\n        _this.menuItems.forEach(function (item) {\n          item.removeEventListener(\"expanded-change\", _this.handleExpandedChanged);\n          item.removeEventListener(\"focus\", _this.handleItemFocus);\n        });\n      }\n    };\n\n    _this.setItems = function () {\n      var newItems = _this.domChildren();\n\n      _this.removeItemListeners();\n\n      _this.menuItems = newItems;\n\n      var menuItems = _this.menuItems.filter(_this.isMenuItemElement); // if our focus index is not -1 we have items\n\n\n      if (menuItems.length) {\n        _this.focusIndex = 0;\n      }\n\n      function elementIndent(el) {\n        var role = el.getAttribute(\"role\");\n        var startSlot = el.querySelector(\"[slot=start]\");\n\n        if (role !== MenuItemRole.menuitem && startSlot === null) {\n          return 1;\n        } else if (role === MenuItemRole.menuitem && startSlot !== null) {\n          return 1;\n        } else if (role !== MenuItemRole.menuitem && startSlot !== null) {\n          return 2;\n        } else {\n          return 0;\n        }\n      }\n\n      var indent = menuItems.reduce(function (accum, current) {\n        var elementValue = elementIndent(current);\n        return accum > elementValue ? accum : elementValue;\n      }, 0);\n      menuItems.forEach(function (item, index) {\n        item.setAttribute(\"tabindex\", index === 0 ? \"0\" : \"-1\");\n        item.addEventListener(\"expanded-change\", _this.handleExpandedChanged);\n        item.addEventListener(\"focus\", _this.handleItemFocus);\n\n        if (item instanceof MenuItem) {\n          item.startColumnCount = indent;\n        }\n      });\n    };\n    /**\n     * handle change from child element\n     */\n\n\n    _this.changeHandler = function (e) {\n      if (_this.menuItems === undefined) {\n        return;\n      }\n\n      var changedMenuItem = e.target;\n\n      var changeItemIndex = _this.menuItems.indexOf(changedMenuItem);\n\n      if (changeItemIndex === -1) {\n        return;\n      }\n\n      if (changedMenuItem.role === \"menuitemradio\" && changedMenuItem.checked === true) {\n        for (var i = changeItemIndex - 1; i >= 0; --i) {\n          var item = _this.menuItems[i];\n          var role = item.getAttribute(\"role\");\n\n          if (role === MenuItemRole.menuitemradio) {\n            item.checked = false;\n          }\n\n          if (role === \"separator\") {\n            break;\n          }\n        }\n\n        var maxIndex = _this.menuItems.length - 1;\n\n        for (var _i = changeItemIndex + 1; _i <= maxIndex; ++_i) {\n          var _item = _this.menuItems[_i];\n\n          var _role = _item.getAttribute(\"role\");\n\n          if (_role === MenuItemRole.menuitemradio) {\n            _item.checked = false;\n          }\n\n          if (_role === \"separator\") {\n            break;\n          }\n        }\n      }\n    };\n    /**\n     * check if the item is a menu item\n     */\n\n\n    _this.isMenuItemElement = function (el) {\n      return isHTMLElement(el) && Menu.focusableElementRoles.hasOwnProperty(el.getAttribute(\"role\"));\n    };\n    /**\n     * check if the item is focusable\n     */\n\n\n    _this.isFocusableElement = function (el) {\n      return _this.isMenuItemElement(el);\n    };\n\n    return _this;\n  }\n\n  _createClass(Menu, [{\n    key: \"itemsChanged\",\n    value: function itemsChanged(oldValue, newValue) {\n      // only update children after the component is connected and\n      // the setItems has run on connectedCallback\n      // (menuItems is undefined until then)\n      if (this.$fastController.isConnected && this.menuItems !== undefined) {\n        this.setItems();\n      }\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(Menu.prototype), \"connectedCallback\", this).call(this);\n\n      DOM.queueUpdate(function () {\n        // wait until children have had a chance to\n        // connect before setting/checking their props/attributes\n        _this2.setItems();\n      });\n      this.addEventListener(\"change\", this.changeHandler);\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      _get(_getPrototypeOf(Menu.prototype), \"disconnectedCallback\", this).call(this);\n\n      this.removeItemListeners();\n      this.menuItems = undefined;\n      this.removeEventListener(\"change\", this.changeHandler);\n    }\n    /**\n     * Focuses the first item in the menu.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.setFocus(0, 1);\n    }\n    /**\n     * Collapses any expanded menu items.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"collapseExpandedItem\",\n    value: function collapseExpandedItem() {\n      if (this.expandedItem !== null) {\n        this.expandedItem.expanded = false;\n        this.expandedItem = null;\n      }\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"handleMenuKeyDown\",\n    value: function handleMenuKeyDown(e) {\n      if (e.defaultPrevented || this.menuItems === undefined) {\n        return;\n      }\n\n      switch (e.key) {\n        case keyArrowDown:\n          // go forward one index\n          this.setFocus(this.focusIndex + 1, 1);\n          return;\n\n        case keyArrowUp:\n          // go back one index\n          this.setFocus(this.focusIndex - 1, -1);\n          return;\n\n        case keyEnd:\n          // set focus on last item\n          this.setFocus(this.menuItems.length - 1, -1);\n          return;\n\n        case keyHome:\n          // set focus on first item\n          this.setFocus(0, 1);\n          return;\n\n        default:\n          // if we are not handling the event, do not prevent default\n          return true;\n      }\n    }\n    /**\n     * get an array of valid DOM children\n     */\n\n  }, {\n    key: \"domChildren\",\n    value: function domChildren() {\n      return Array.from(this.children).filter(function (child) {\n        return !child.hasAttribute(\"hidden\");\n      });\n    }\n  }, {\n    key: \"setFocus\",\n    value: function setFocus(focusIndex, adjustment) {\n      if (this.menuItems === undefined) {\n        return;\n      }\n\n      while (focusIndex >= 0 && focusIndex < this.menuItems.length) {\n        var child = this.menuItems[focusIndex];\n\n        if (this.isFocusableElement(child)) {\n          // change the previous index to -1\n          if (this.focusIndex > -1 && this.menuItems.length >= this.focusIndex - 1) {\n            this.menuItems[this.focusIndex].setAttribute(\"tabindex\", \"-1\");\n          } // update the focus index\n\n\n          this.focusIndex = focusIndex; // update the tabindex of next focusable element\n\n          child.setAttribute(\"tabindex\", \"0\"); // focus the element\n\n          child.focus();\n          break;\n        }\n\n        focusIndex += adjustment;\n      }\n    }\n  }]);\n\n  return Menu;\n}(FoundationElement);\nMenu.focusableElementRoles = roleForMenuItem;\n\n__decorate([observable], Menu.prototype, \"items\", void 0);","map":{"version":3,"names":["__decorate","DOM","observable","isHTMLElement","keyArrowDown","keyArrowUp","keyEnd","keyHome","MenuItem","MenuItemRole","roleForMenuItem","FoundationElement","Menu","arguments","expandedItem","focusIndex","isNestedMenu","parentElement","getAttribute","handleFocusOut","e","contains","relatedTarget","menuItems","undefined","collapseExpandedItem","findIndex","isFocusableElement","setAttribute","handleItemFocus","targetItem","target","indexOf","handleExpandedChanged","defaultPrevented","preventDefault","changedItem","expanded","removeItemListeners","forEach","item","removeEventListener","setItems","newItems","domChildren","filter","isMenuItemElement","length","elementIndent","el","role","startSlot","querySelector","menuitem","indent","reduce","accum","current","elementValue","index","addEventListener","startColumnCount","changeHandler","changedMenuItem","changeItemIndex","checked","i","menuitemradio","maxIndex","focusableElementRoles","hasOwnProperty","oldValue","newValue","$fastController","isConnected","queueUpdate","setFocus","key","Array","from","children","child","hasAttribute","adjustment","focus","prototype"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-foundation/dist/esm/menu/menu.js"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { DOM, observable } from \"@microsoft/fast-element\";\nimport { isHTMLElement, keyArrowDown, keyArrowUp, keyEnd, keyHome, } from \"@microsoft/fast-web-utilities\";\nimport { MenuItem, MenuItemRole, roleForMenuItem, } from \"../menu-item/index.js\";\nimport { FoundationElement } from \"../foundation-element/foundation-element.js\";\n/**\n * A Menu Custom HTML Element.\n * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#menu | ARIA menu }.\n *\n * @slot - The default slot for the menu items\n *\n * @public\n */\nexport class Menu extends FoundationElement {\n    constructor() {\n        super(...arguments);\n        this.expandedItem = null;\n        /**\n         * The index of the focusable element in the items array\n         * defaults to -1\n         */\n        this.focusIndex = -1;\n        /**\n         * @internal\n         */\n        this.isNestedMenu = () => {\n            return (this.parentElement !== null &&\n                isHTMLElement(this.parentElement) &&\n                this.parentElement.getAttribute(\"role\") === \"menuitem\");\n        };\n        /**\n         * if focus is moving out of the menu, reset to a stable initial state\n         * @internal\n         */\n        this.handleFocusOut = (e) => {\n            if (!this.contains(e.relatedTarget) && this.menuItems !== undefined) {\n                this.collapseExpandedItem();\n                // find our first focusable element\n                const focusIndex = this.menuItems.findIndex(this.isFocusableElement);\n                // set the current focus index's tabindex to -1\n                this.menuItems[this.focusIndex].setAttribute(\"tabindex\", \"-1\");\n                // set the first focusable element tabindex to 0\n                this.menuItems[focusIndex].setAttribute(\"tabindex\", \"0\");\n                // set the focus index\n                this.focusIndex = focusIndex;\n            }\n        };\n        this.handleItemFocus = (e) => {\n            const targetItem = e.target;\n            if (this.menuItems !== undefined &&\n                targetItem !== this.menuItems[this.focusIndex]) {\n                this.menuItems[this.focusIndex].setAttribute(\"tabindex\", \"-1\");\n                this.focusIndex = this.menuItems.indexOf(targetItem);\n                targetItem.setAttribute(\"tabindex\", \"0\");\n            }\n        };\n        this.handleExpandedChanged = (e) => {\n            if (e.defaultPrevented ||\n                e.target === null ||\n                this.menuItems === undefined ||\n                this.menuItems.indexOf(e.target) < 0) {\n                return;\n            }\n            e.preventDefault();\n            const changedItem = e.target;\n            // closing an expanded item without opening another\n            if (this.expandedItem !== null &&\n                changedItem === this.expandedItem &&\n                changedItem.expanded === false) {\n                this.expandedItem = null;\n                return;\n            }\n            if (changedItem.expanded) {\n                if (this.expandedItem !== null && this.expandedItem !== changedItem) {\n                    this.expandedItem.expanded = false;\n                }\n                this.menuItems[this.focusIndex].setAttribute(\"tabindex\", \"-1\");\n                this.expandedItem = changedItem;\n                this.focusIndex = this.menuItems.indexOf(changedItem);\n                changedItem.setAttribute(\"tabindex\", \"0\");\n            }\n        };\n        this.removeItemListeners = () => {\n            if (this.menuItems !== undefined) {\n                this.menuItems.forEach((item) => {\n                    item.removeEventListener(\"expanded-change\", this.handleExpandedChanged);\n                    item.removeEventListener(\"focus\", this.handleItemFocus);\n                });\n            }\n        };\n        this.setItems = () => {\n            const newItems = this.domChildren();\n            this.removeItemListeners();\n            this.menuItems = newItems;\n            const menuItems = this.menuItems.filter(this.isMenuItemElement);\n            // if our focus index is not -1 we have items\n            if (menuItems.length) {\n                this.focusIndex = 0;\n            }\n            function elementIndent(el) {\n                const role = el.getAttribute(\"role\");\n                const startSlot = el.querySelector(\"[slot=start]\");\n                if (role !== MenuItemRole.menuitem && startSlot === null) {\n                    return 1;\n                }\n                else if (role === MenuItemRole.menuitem && startSlot !== null) {\n                    return 1;\n                }\n                else if (role !== MenuItemRole.menuitem && startSlot !== null) {\n                    return 2;\n                }\n                else {\n                    return 0;\n                }\n            }\n            const indent = menuItems.reduce((accum, current) => {\n                const elementValue = elementIndent(current);\n                return accum > elementValue ? accum : elementValue;\n            }, 0);\n            menuItems.forEach((item, index) => {\n                item.setAttribute(\"tabindex\", index === 0 ? \"0\" : \"-1\");\n                item.addEventListener(\"expanded-change\", this.handleExpandedChanged);\n                item.addEventListener(\"focus\", this.handleItemFocus);\n                if (item instanceof MenuItem) {\n                    item.startColumnCount = indent;\n                }\n            });\n        };\n        /**\n         * handle change from child element\n         */\n        this.changeHandler = (e) => {\n            if (this.menuItems === undefined) {\n                return;\n            }\n            const changedMenuItem = e.target;\n            const changeItemIndex = this.menuItems.indexOf(changedMenuItem);\n            if (changeItemIndex === -1) {\n                return;\n            }\n            if (changedMenuItem.role === \"menuitemradio\" &&\n                changedMenuItem.checked === true) {\n                for (let i = changeItemIndex - 1; i >= 0; --i) {\n                    const item = this.menuItems[i];\n                    const role = item.getAttribute(\"role\");\n                    if (role === MenuItemRole.menuitemradio) {\n                        item.checked = false;\n                    }\n                    if (role === \"separator\") {\n                        break;\n                    }\n                }\n                const maxIndex = this.menuItems.length - 1;\n                for (let i = changeItemIndex + 1; i <= maxIndex; ++i) {\n                    const item = this.menuItems[i];\n                    const role = item.getAttribute(\"role\");\n                    if (role === MenuItemRole.menuitemradio) {\n                        item.checked = false;\n                    }\n                    if (role === \"separator\") {\n                        break;\n                    }\n                }\n            }\n        };\n        /**\n         * check if the item is a menu item\n         */\n        this.isMenuItemElement = (el) => {\n            return (isHTMLElement(el) &&\n                Menu.focusableElementRoles.hasOwnProperty(el.getAttribute(\"role\")));\n        };\n        /**\n         * check if the item is focusable\n         */\n        this.isFocusableElement = (el) => {\n            return this.isMenuItemElement(el);\n        };\n    }\n    itemsChanged(oldValue, newValue) {\n        // only update children after the component is connected and\n        // the setItems has run on connectedCallback\n        // (menuItems is undefined until then)\n        if (this.$fastController.isConnected && this.menuItems !== undefined) {\n            this.setItems();\n        }\n    }\n    /**\n     * @internal\n     */\n    connectedCallback() {\n        super.connectedCallback();\n        DOM.queueUpdate(() => {\n            // wait until children have had a chance to\n            // connect before setting/checking their props/attributes\n            this.setItems();\n        });\n        this.addEventListener(\"change\", this.changeHandler);\n    }\n    /**\n     * @internal\n     */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.removeItemListeners();\n        this.menuItems = undefined;\n        this.removeEventListener(\"change\", this.changeHandler);\n    }\n    /**\n     * Focuses the first item in the menu.\n     *\n     * @public\n     */\n    focus() {\n        this.setFocus(0, 1);\n    }\n    /**\n     * Collapses any expanded menu items.\n     *\n     * @public\n     */\n    collapseExpandedItem() {\n        if (this.expandedItem !== null) {\n            this.expandedItem.expanded = false;\n            this.expandedItem = null;\n        }\n    }\n    /**\n     * @internal\n     */\n    handleMenuKeyDown(e) {\n        if (e.defaultPrevented || this.menuItems === undefined) {\n            return;\n        }\n        switch (e.key) {\n            case keyArrowDown:\n                // go forward one index\n                this.setFocus(this.focusIndex + 1, 1);\n                return;\n            case keyArrowUp:\n                // go back one index\n                this.setFocus(this.focusIndex - 1, -1);\n                return;\n            case keyEnd:\n                // set focus on last item\n                this.setFocus(this.menuItems.length - 1, -1);\n                return;\n            case keyHome:\n                // set focus on first item\n                this.setFocus(0, 1);\n                return;\n            default:\n                // if we are not handling the event, do not prevent default\n                return true;\n        }\n    }\n    /**\n     * get an array of valid DOM children\n     */\n    domChildren() {\n        return Array.from(this.children).filter(child => !child.hasAttribute(\"hidden\"));\n    }\n    setFocus(focusIndex, adjustment) {\n        if (this.menuItems === undefined) {\n            return;\n        }\n        while (focusIndex >= 0 && focusIndex < this.menuItems.length) {\n            const child = this.menuItems[focusIndex];\n            if (this.isFocusableElement(child)) {\n                // change the previous index to -1\n                if (this.focusIndex > -1 &&\n                    this.menuItems.length >= this.focusIndex - 1) {\n                    this.menuItems[this.focusIndex].setAttribute(\"tabindex\", \"-1\");\n                }\n                // update the focus index\n                this.focusIndex = focusIndex;\n                // update the tabindex of next focusable element\n                child.setAttribute(\"tabindex\", \"0\");\n                // focus the element\n                child.focus();\n                break;\n            }\n            focusIndex += adjustment;\n        }\n    }\n}\nMenu.focusableElementRoles = roleForMenuItem;\n__decorate([\n    observable\n], Menu.prototype, \"items\", void 0);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}