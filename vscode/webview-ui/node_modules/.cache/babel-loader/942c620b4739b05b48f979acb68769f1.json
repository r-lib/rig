{"ast":null,"code":"import _objectSpread from\"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{vscode}from\"./utilities/vscode\";import{VSCodeButton,VSCodeTextField}from\"@vscode/webview-ui-toolkit/react\";import{useState,useCallback,useEffect}from'react';import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";;function RVersionList(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),versions=_useState2[0],setVersions=_useState2[1];var listener=useCallback(function(event){var message=event.data;switch(message.command){case'versions':setVersions(message.data);break;}},[]);useEffect(function(){window.addEventListener(\"message\",listener);return function(){window.removeEventListener(\"message\",listener);};},[listener]);var listItems=versions===null||versions===void 0?void 0:versions.map(function(v){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(RVersion,_objectSpread({},v))},v.name);});return/*#__PURE__*/_jsx(\"ul\",{children:listItems});}function RVersion(version){return/*#__PURE__*/_jsxs(_Fragment,{children:[version.default?\"✅\":\"\",\" \",version.name,\" (R \",version.version,\")\"]});}function App(){var _useState3=useState({newversion:''}),_useState4=_slicedToArray(_useState3,2),value=_useState4[0],setValue=_useState4[1];function refreshClick(){vscode.postMessage({command:\"refresh\"});}function installClick(){console.log(value.newversion);vscode.postMessage({command:\"install\",version:value.newversion});}return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Installalled R versions\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(RVersionList,{}),/*#__PURE__*/_jsx(VSCodeButton,{onClick:refreshClick,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Install another R version\"}),/*#__PURE__*/_jsx(VSCodeTextField,{value:value.newversion,placeholder:\"release\",children:\"Version\"}),/*#__PURE__*/_jsx(VSCodeButton,{onClick:installClick,children:\"Install\"})]});}export default App;","map":{"version":3,"names":["vscode","VSCodeButton","VSCodeTextField","useState","useCallback","useEffect","RVersionList","versions","setVersions","listener","event","message","data","command","window","addEventListener","removeEventListener","listItems","map","v","name","RVersion","version","default","App","newversion","value","setValue","refreshClick","postMessage","installClick","console","log"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/src/App.tsx"],"sourcesContent":["import { vscode } from \"./utilities/vscode\";\nimport { VSCodeButton, VSCodeTextField } from \"@vscode/webview-ui-toolkit/react\";\nimport { useState, useCallback, useEffect } from 'react';\nimport \"./App.css\";\n\ninterface IRVersion {\n  name: string;\n  default: boolean;\n  version: string;\n  aliases: Array<string>;\n  path: string;\n};\n\nfunction RVersionList() {\n  const [versions, setVersions] = useState<Array<IRVersion>>();\n\n  const listener = useCallback(event => {\n    const message = event.data;\n    switch (message.command) {\n    case 'versions':\n      setVersions(message.data);\n      break;\n    }\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener(\"message\", listener);\n    return () => {\n        window.removeEventListener(\"message\", listener);\n    };\n  }, [listener]);\n\n  const listItems = versions?.map(v =>\n    <li key={v.name}>\n      <RVersion {...v} />\n    </li>\n  );\n\n  return (\n    <ul>{listItems}</ul>\n  );\n}\n\n function RVersion(version: IRVersion) {\n   return <>\n     {version.default ? \"✅\" : \"\"} {version.name} (R {version.version})\n   </>\n }\n\ninterface IAppState {\n  newversion: string;\n}\n\nfunction App() {\n  const [value, setValue] = useState<IAppState>({ newversion: ''});\n\n  function refreshClick() {\n    vscode.postMessage({\n      command: \"refresh\"\n    });\n  }\n\n  function installClick() {\n    console.log(value.newversion);\n    vscode.postMessage({\n      command: \"install\",\n      version: value.newversion\n    });\n  }\n\n  return (\n    <main>\n      <h1>Installalled R versions</h1>\n      <div>\n        <RVersionList />\n        <VSCodeButton onClick={refreshClick}>Refresh</VSCodeButton>\n      </div>\n      <h1>Install another R version</h1>\n      <VSCodeTextField value={value.newversion} placeholder=\"release\">Version</VSCodeTextField>\n      <VSCodeButton onClick={installClick}>Install</VSCodeButton>\n    </main>\n  );\n}\n\nexport default App;\n"],"mappings":"uQAAA,OAASA,MAAT,KAAuB,oBAAvB,CACA,OAASC,YAAT,CAAuBC,eAAvB,KAA8C,kCAA9C,CACA,OAASC,QAAT,CAAmBC,WAAnB,CAAgCC,SAAhC,KAAiD,OAAjD,CACA,MAAO,WAAP,C,6IAQC,CAED,QAASC,aAAT,EAAwB,CACtB,cAAgCH,QAAQ,EAAxC,wCAAOI,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,SAAQ,CAAGL,WAAW,CAAC,SAAAM,KAAK,CAAI,CACpC,GAAMC,QAAO,CAAGD,KAAK,CAACE,IAAtB,CACA,OAAQD,OAAO,CAACE,OAAhB,EACA,IAAK,UAAL,CACEL,WAAW,CAACG,OAAO,CAACC,IAAT,CAAX,CACA,MAHF,CAKD,CAP2B,CAOzB,EAPyB,CAA5B,CASAP,SAAS,CAAC,UAAM,CACdS,MAAM,CAACC,gBAAP,CAAwB,SAAxB,CAAmCN,QAAnC,EACA,MAAO,WAAM,CACTK,MAAM,CAACE,mBAAP,CAA2B,SAA3B,CAAsCP,QAAtC,EACH,CAFD,CAGD,CALQ,CAKN,CAACA,QAAD,CALM,CAAT,CAOA,GAAMQ,UAAS,CAAGV,QAAH,SAAGA,QAAH,iBAAGA,QAAQ,CAAEW,GAAV,CAAc,SAAAC,CAAC,qBAC/B,iCACE,KAAC,QAAD,kBAAcA,CAAd,EADF,EAASA,CAAC,CAACC,IAAX,CAD+B,EAAf,CAAlB,CAMA,mBACE,oBAAKH,SAAL,EADF,CAGD,CAEA,QAASI,SAAT,CAAkBC,OAAlB,CAAsC,CACpC,mBAAO,2BACJA,OAAO,CAACC,OAAR,CAAkB,GAAlB,CAAwB,EADpB,KACyBD,OAAO,CAACF,IADjC,QAC2CE,OAAO,CAACA,OADnD,OAAP,CAGD,CAMF,QAASE,IAAT,EAAe,CACb,eAA0BrB,QAAQ,CAAY,CAAEsB,UAAU,CAAE,EAAd,CAAZ,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eAEA,QAASC,aAAT,EAAwB,CACtB5B,MAAM,CAAC6B,WAAP,CAAmB,CACjBhB,OAAO,CAAE,SADQ,CAAnB,EAGD,CAED,QAASiB,aAAT,EAAwB,CACtBC,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACD,UAAlB,EACAzB,MAAM,CAAC6B,WAAP,CAAmB,CACjBhB,OAAO,CAAE,SADQ,CAEjBS,OAAO,CAAEI,KAAK,CAACD,UAFE,CAAnB,EAID,CAED,mBACE,qCACE,+CADF,cAEE,oCACE,KAAC,YAAD,IADF,cAEE,KAAC,YAAD,EAAc,OAAO,CAAEG,YAAvB,qBAFF,GAFF,cAME,iDANF,cAOE,KAAC,eAAD,EAAiB,KAAK,CAAEF,KAAK,CAACD,UAA9B,CAA0C,WAAW,CAAC,SAAtD,qBAPF,cAQE,KAAC,YAAD,EAAc,OAAO,CAAEK,YAAvB,qBARF,GADF,CAYD,CAED,cAAeN,IAAf"},"metadata":{},"sourceType":"module"}