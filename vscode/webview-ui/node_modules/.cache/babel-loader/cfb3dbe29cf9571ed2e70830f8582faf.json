{"ast":null,"code":"import _classCallCheck from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { __decorate } from \"tslib\";\nimport { attr, DOM, Observable, observable } from \"@microsoft/fast-element\";\nimport { limit, uniqueId } from \"@microsoft/fast-web-utilities\";\nimport { DelegatesARIAListbox } from \"../listbox/listbox.js\";\nimport { StartEnd } from \"../patterns/start-end.js\";\nimport { SelectPosition } from \"../select/select.options.js\";\nimport { applyMixins } from \"../utilities/apply-mixins.js\";\nimport { FormAssociatedCombobox } from \"./combobox.form-associated.js\";\nimport { ComboboxAutocomplete } from \"./combobox.options.js\";\n/**\n * A Combobox Custom HTML Element.\n * Implements the {@link https://w3c.github.io/aria-practices/#combobox | ARIA combobox }.\n *\n * @slot start - Content which can be provided before the input\n * @slot end - Content which can be provided after the input\n * @slot control - Used to replace the input element representing the combobox\n * @slot indicator - The visual indicator representing the expanded state\n * @slot - The default slot for the options\n * @csspart control - The wrapper element containing the input area, including start and end\n * @csspart selected-value - The input element representing the selected value\n * @csspart indicator - The element wrapping the indicator slot\n * @csspart listbox - The wrapper for the listbox slotted options\n * @fires change - Fires a custom 'change' event when the value updates\n *\n * @public\n */\n\nexport var Combobox = /*#__PURE__*/function (_FormAssociatedCombob) {\n  _inherits(Combobox, _FormAssociatedCombob);\n\n  var _super = _createSuper(Combobox);\n\n  function Combobox() {\n    var _this;\n\n    _classCallCheck(this, Combobox);\n\n    _this = _super.apply(this, arguments);\n    /**\n     * The internal value property.\n     *\n     * @internal\n     */\n\n    _this._value = \"\";\n    /**\n     * The collection of currently filtered options.\n     *\n     * @public\n     */\n\n    _this.filteredOptions = [];\n    /**\n     * The current filter value.\n     *\n     * @internal\n     */\n\n    _this.filter = \"\";\n    /**\n     * The initial state of the position attribute.\n     *\n     * @internal\n     */\n\n    _this.forcedPosition = false;\n    /**\n     * The unique id for the internal listbox element.\n     *\n     * @internal\n     */\n\n    _this.listboxId = uniqueId(\"listbox-\");\n    /**\n     * The max height for the listbox when opened.\n     *\n     * @internal\n     */\n\n    _this.maxHeight = 0;\n    /**\n     * The open attribute.\n     *\n     * @public\n     * @remarks\n     * HTML Attribute: open\n     */\n\n    _this.open = false;\n    return _this;\n  }\n  /**\n   * Reset the element to its first selectable option when its parent form is reset.\n   *\n   * @internal\n   */\n\n\n  _createClass(Combobox, [{\n    key: \"formResetCallback\",\n    value: function formResetCallback() {\n      _get(_getPrototypeOf(Combobox.prototype), \"formResetCallback\", this).call(this);\n\n      this.setDefaultSelectedOption();\n      this.updateValue();\n    }\n    /** {@inheritDoc (FormAssociated:interface).validate} */\n\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      _get(_getPrototypeOf(Combobox.prototype), \"validate\", this).call(this, this.control);\n    }\n  }, {\n    key: \"isAutocompleteInline\",\n    get: function get() {\n      return this.autocomplete === ComboboxAutocomplete.inline || this.isAutocompleteBoth;\n    }\n  }, {\n    key: \"isAutocompleteList\",\n    get: function get() {\n      return this.autocomplete === ComboboxAutocomplete.list || this.isAutocompleteBoth;\n    }\n  }, {\n    key: \"isAutocompleteBoth\",\n    get: function get() {\n      return this.autocomplete === ComboboxAutocomplete.both;\n    }\n    /**\n     * Sets focus and synchronize ARIA attributes when the open property changes.\n     *\n     * @param prev - the previous open value\n     * @param next - the current open value\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"openChanged\",\n    value: function openChanged() {\n      var _this2 = this;\n\n      if (this.open) {\n        this.ariaControls = this.listboxId;\n        this.ariaExpanded = \"true\";\n        this.setPositioning();\n        this.focusAndScrollOptionIntoView(); // focus is directed to the element when `open` is changed programmatically\n\n        DOM.queueUpdate(function () {\n          return _this2.focus();\n        });\n        return;\n      }\n\n      this.ariaControls = \"\";\n      this.ariaExpanded = \"false\";\n    }\n    /**\n     * The list of options.\n     *\n     * @public\n     * @remarks\n     * Overrides `Listbox.options`.\n     */\n\n  }, {\n    key: \"options\",\n    get: function get() {\n      Observable.track(this, \"options\");\n      return this.filteredOptions.length ? this.filteredOptions : this._options;\n    },\n    set: function set(value) {\n      this._options = value;\n      Observable.notify(this, \"options\");\n    }\n    /**\n     * Updates the placeholder on the proxy element.\n     * @internal\n     */\n\n  }, {\n    key: \"placeholderChanged\",\n    value: function placeholderChanged() {\n      if (this.proxy instanceof HTMLInputElement) {\n        this.proxy.placeholder = this.placeholder;\n      }\n    }\n  }, {\n    key: \"positionChanged\",\n    value: function positionChanged(prev, next) {\n      this.positionAttribute = next;\n      this.setPositioning();\n    }\n    /**\n     * The value property.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"value\",\n    get: function get() {\n      Observable.track(this, \"value\");\n      return this._value;\n    },\n    set: function set(next) {\n      var _a, _b, _c;\n\n      var prev = \"\".concat(this._value);\n\n      if (this.$fastController.isConnected && this.options) {\n        var selectedIndex = this.options.findIndex(function (el) {\n          return el.text.toLowerCase() === next.toLowerCase();\n        });\n        var prevSelectedValue = (_a = this.options[this.selectedIndex]) === null || _a === void 0 ? void 0 : _a.text;\n        var nextSelectedValue = (_b = this.options[selectedIndex]) === null || _b === void 0 ? void 0 : _b.text;\n        this.selectedIndex = prevSelectedValue !== nextSelectedValue ? selectedIndex : this.selectedIndex;\n        next = ((_c = this.firstSelectedOption) === null || _c === void 0 ? void 0 : _c.text) || next;\n      }\n\n      if (prev !== next) {\n        this._value = next;\n\n        _get(_getPrototypeOf(Combobox.prototype), \"valueChanged\", this).call(this, prev, next);\n\n        Observable.notify(this, \"value\");\n      }\n    }\n    /**\n     * Handle opening and closing the listbox when the combobox is clicked.\n     *\n     * @param e - the mouse event\n     * @internal\n     */\n\n  }, {\n    key: \"clickHandler\",\n    value: function clickHandler(e) {\n      if (this.disabled) {\n        return;\n      }\n\n      if (this.open) {\n        var captured = e.target.closest(\"option,[role=option]\");\n\n        if (!captured || captured.disabled) {\n          return;\n        }\n\n        this.selectedOptions = [captured];\n        this.control.value = captured.text;\n        this.clearSelectionRange();\n        this.updateValue(true);\n      }\n\n      this.open = !this.open;\n\n      if (this.open) {\n        this.control.focus();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      _get(_getPrototypeOf(Combobox.prototype), \"connectedCallback\", this).call(this);\n\n      this.forcedPosition = !!this.positionAttribute;\n\n      if (this.value) {\n        this.initialValue = this.value;\n      }\n    }\n    /**\n     * Synchronize the `aria-disabled` property when the `disabled` property changes.\n     *\n     * @param prev - The previous disabled value\n     * @param next - The next disabled value\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"disabledChanged\",\n    value: function disabledChanged(prev, next) {\n      if (_get(_getPrototypeOf(Combobox.prototype), \"disabledChanged\", this)) {\n        _get(_getPrototypeOf(Combobox.prototype), \"disabledChanged\", this).call(this, prev, next);\n      }\n\n      this.ariaDisabled = this.disabled ? \"true\" : \"false\";\n    }\n    /**\n     * Filter available options by text value.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"filterOptions\",\n    value: function filterOptions() {\n      var _this3 = this;\n\n      if (!this.autocomplete || this.autocomplete === ComboboxAutocomplete.none) {\n        this.filter = \"\";\n      }\n\n      var filter = this.filter.toLowerCase();\n      this.filteredOptions = this._options.filter(function (o) {\n        return o.text.toLowerCase().startsWith(_this3.filter.toLowerCase());\n      });\n\n      if (this.isAutocompleteList) {\n        if (!this.filteredOptions.length && !filter) {\n          this.filteredOptions = this._options;\n        }\n\n        this._options.forEach(function (o) {\n          o.hidden = !_this3.filteredOptions.includes(o);\n        });\n      }\n    }\n    /**\n     * Focus the control and scroll the first selected option into view.\n     *\n     * @internal\n     * @remarks\n     * Overrides: `Listbox.focusAndScrollOptionIntoView`\n     */\n\n  }, {\n    key: \"focusAndScrollOptionIntoView\",\n    value: function focusAndScrollOptionIntoView() {\n      var _this4 = this;\n\n      if (this.contains(document.activeElement)) {\n        this.control.focus();\n\n        if (this.firstSelectedOption) {\n          requestAnimationFrame(function () {\n            var _a;\n\n            (_a = _this4.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.scrollIntoView({\n              block: \"nearest\"\n            });\n          });\n        }\n      }\n    }\n    /**\n     * Handle focus state when the element or its children lose focus.\n     *\n     * @param e - The focus event\n     * @internal\n     */\n\n  }, {\n    key: \"focusoutHandler\",\n    value: function focusoutHandler(e) {\n      this.syncValue();\n\n      if (!this.open) {\n        return true;\n      }\n\n      var focusTarget = e.relatedTarget;\n\n      if (this.isSameNode(focusTarget)) {\n        this.focus();\n        return;\n      }\n\n      if (!this.options || !this.options.includes(focusTarget)) {\n        this.open = false;\n      }\n    }\n    /**\n     * Handle content changes on the control input.\n     *\n     * @param e - the input event\n     * @internal\n     */\n\n  }, {\n    key: \"inputHandler\",\n    value: function inputHandler(e) {\n      this.filter = this.control.value;\n      this.filterOptions();\n\n      if (!this.isAutocompleteInline) {\n        this.selectedIndex = this.options.map(function (option) {\n          return option.text;\n        }).indexOf(this.control.value);\n      }\n\n      if (e.inputType.includes(\"deleteContent\") || !this.filter.length) {\n        return true;\n      }\n\n      if (this.isAutocompleteList && !this.open) {\n        this.open = true;\n      }\n\n      if (this.isAutocompleteInline) {\n        if (this.filteredOptions.length) {\n          this.selectedOptions = [this.filteredOptions[0]];\n          this.selectedIndex = this.options.indexOf(this.firstSelectedOption);\n          this.setInlineSelection();\n        } else {\n          this.selectedIndex = -1;\n        }\n      }\n\n      return;\n    }\n    /**\n     * Handle keydown actions for listbox navigation.\n     *\n     * @param e - the keyboard event\n     * @internal\n     */\n\n  }, {\n    key: \"keydownHandler\",\n    value: function keydownHandler(e) {\n      var key = e.key;\n\n      if (e.ctrlKey || e.shiftKey) {\n        return true;\n      }\n\n      switch (key) {\n        case \"Enter\":\n          {\n            this.syncValue();\n\n            if (this.isAutocompleteInline) {\n              this.filter = this.value;\n            }\n\n            this.open = false;\n            this.clearSelectionRange();\n            break;\n          }\n\n        case \"Escape\":\n          {\n            if (!this.isAutocompleteInline) {\n              this.selectedIndex = -1;\n            }\n\n            if (this.open) {\n              this.open = false;\n              break;\n            }\n\n            this.value = \"\";\n            this.control.value = \"\";\n            this.filter = \"\";\n            this.filterOptions();\n            break;\n          }\n\n        case \"Tab\":\n          {\n            this.setInputToSelection();\n\n            if (!this.open) {\n              return true;\n            }\n\n            e.preventDefault();\n            this.open = false;\n            break;\n          }\n\n        case \"ArrowUp\":\n        case \"ArrowDown\":\n          {\n            this.filterOptions();\n\n            if (!this.open) {\n              this.open = true;\n              break;\n            }\n\n            if (this.filteredOptions.length > 0) {\n              _get(_getPrototypeOf(Combobox.prototype), \"keydownHandler\", this).call(this, e);\n            }\n\n            if (this.isAutocompleteInline) {\n              this.setInlineSelection();\n            }\n\n            break;\n          }\n\n        default:\n          {\n            return true;\n          }\n      }\n    }\n    /**\n     * Handle keyup actions for value input and text field manipulations.\n     *\n     * @param e - the keyboard event\n     * @internal\n     */\n\n  }, {\n    key: \"keyupHandler\",\n    value: function keyupHandler(e) {\n      var key = e.key;\n\n      switch (key) {\n        case \"ArrowLeft\":\n        case \"ArrowRight\":\n        case \"Backspace\":\n        case \"Delete\":\n        case \"Home\":\n        case \"End\":\n          {\n            this.filter = this.control.value;\n            this.selectedIndex = -1;\n            this.filterOptions();\n            break;\n          }\n      }\n    }\n    /**\n     * Ensure that the selectedIndex is within the current allowable filtered range.\n     *\n     * @param prev - the previous selected index value\n     * @param next - the current selected index value\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"selectedIndexChanged\",\n    value: function selectedIndexChanged(prev, next) {\n      if (this.$fastController.isConnected) {\n        next = limit(-1, this.options.length - 1, next); // we only want to call the super method when the selectedIndex is in range\n\n        if (next !== this.selectedIndex) {\n          this.selectedIndex = next;\n          return;\n        }\n\n        _get(_getPrototypeOf(Combobox.prototype), \"selectedIndexChanged\", this).call(this, prev, next);\n      }\n    }\n    /**\n     * Move focus to the previous selectable option.\n     *\n     * @internal\n     * @remarks\n     * Overrides `Listbox.selectPreviousOption`\n     */\n\n  }, {\n    key: \"selectPreviousOption\",\n    value: function selectPreviousOption() {\n      if (!this.disabled && this.selectedIndex >= 0) {\n        this.selectedIndex = this.selectedIndex - 1;\n      }\n    }\n    /**\n     * Set the default selected options at initialization or reset.\n     *\n     * @internal\n     * @remarks\n     * Overrides `Listbox.setDefaultSelectedOption`\n     */\n\n  }, {\n    key: \"setDefaultSelectedOption\",\n    value: function setDefaultSelectedOption() {\n      if (this.$fastController.isConnected && this.options) {\n        var selectedIndex = this.options.findIndex(function (el) {\n          return el.getAttribute(\"selected\") !== null || el.selected;\n        });\n        this.selectedIndex = selectedIndex;\n\n        if (!this.dirtyValue && this.firstSelectedOption) {\n          this.value = this.firstSelectedOption.text;\n        }\n\n        this.setSelectedOptions();\n      }\n    }\n    /**\n     * Focus and set the content of the control based on the first selected option.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"setInputToSelection\",\n    value: function setInputToSelection() {\n      if (this.firstSelectedOption) {\n        this.control.value = this.firstSelectedOption.text;\n        this.control.focus();\n      }\n    }\n    /**\n     * Focus, set and select the content of the control based on the first selected option.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"setInlineSelection\",\n    value: function setInlineSelection() {\n      if (this.firstSelectedOption) {\n        this.setInputToSelection();\n        this.control.setSelectionRange(this.filter.length, this.control.value.length, \"backward\");\n      }\n    }\n    /**\n     * Determines if a value update should involve emitting a change event, then updates the value.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"syncValue\",\n    value: function syncValue() {\n      var _a;\n\n      var newValue = this.selectedIndex > -1 ? (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text : this.control.value;\n      this.updateValue(this.value !== newValue);\n    }\n    /**\n     * Calculate and apply listbox positioning based on available viewport space.\n     *\n     * @param force - direction to force the listbox to display\n     * @public\n     */\n\n  }, {\n    key: \"setPositioning\",\n    value: function setPositioning() {\n      var currentBox = this.getBoundingClientRect();\n      var viewportHeight = window.innerHeight;\n      var availableBottom = viewportHeight - currentBox.bottom;\n      this.position = this.forcedPosition ? this.positionAttribute : currentBox.top > availableBottom ? SelectPosition.above : SelectPosition.below;\n      this.positionAttribute = this.forcedPosition ? this.positionAttribute : this.position;\n      this.maxHeight = this.position === SelectPosition.above ? ~~currentBox.top : ~~availableBottom;\n    }\n    /**\n     * Ensure that the entire list of options is used when setting the selected property.\n     *\n     * @param prev - the previous list of selected options\n     * @param next - the current list of selected options\n     *\n     * @internal\n     * @remarks\n     * Overrides: `Listbox.selectedOptionsChanged`\n     */\n\n  }, {\n    key: \"selectedOptionsChanged\",\n    value: function selectedOptionsChanged(prev, next) {\n      if (this.$fastController.isConnected) {\n        this._options.forEach(function (o) {\n          o.selected = next.includes(o);\n        });\n      }\n    }\n    /**\n     * Synchronize the form-associated proxy and update the value property of the element.\n     *\n     * @param prev - the previous collection of slotted option elements\n     * @param next - the next collection of slotted option elements\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"slottedOptionsChanged\",\n    value: function slottedOptionsChanged(prev, next) {\n      _get(_getPrototypeOf(Combobox.prototype), \"slottedOptionsChanged\", this).call(this, prev, next);\n\n      this.updateValue();\n    }\n    /**\n     * Sets the value and to match the first selected option.\n     *\n     * @param shouldEmit - if true, the change event will be emitted\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"updateValue\",\n    value: function updateValue(shouldEmit) {\n      var _a;\n\n      if (this.$fastController.isConnected) {\n        this.value = ((_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text) || this.control.value;\n        this.control.value = this.value;\n      }\n\n      if (shouldEmit) {\n        this.$emit(\"change\");\n      }\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"clearSelectionRange\",\n    value: function clearSelectionRange() {\n      var controlValueLength = this.control.value.length;\n      this.control.setSelectionRange(controlValueLength, controlValueLength);\n    }\n  }]);\n\n  return Combobox;\n}(FormAssociatedCombobox);\n\n__decorate([attr({\n  attribute: \"autocomplete\",\n  mode: \"fromView\"\n})], Combobox.prototype, \"autocomplete\", void 0);\n\n__decorate([observable], Combobox.prototype, \"maxHeight\", void 0);\n\n__decorate([attr({\n  attribute: \"open\",\n  mode: \"boolean\"\n})], Combobox.prototype, \"open\", void 0);\n\n__decorate([attr], Combobox.prototype, \"placeholder\", void 0);\n\n__decorate([attr({\n  attribute: \"position\"\n})], Combobox.prototype, \"positionAttribute\", void 0);\n\n__decorate([observable], Combobox.prototype, \"position\", void 0);\n/**\n * Includes ARIA states and properties relating to the ARIA combobox role.\n *\n * @public\n */\n\n\nexport var DelegatesARIACombobox = function DelegatesARIACombobox() {\n  _classCallCheck(this, DelegatesARIACombobox);\n};\n\n__decorate([observable], DelegatesARIACombobox.prototype, \"ariaAutoComplete\", void 0);\n\n__decorate([observable], DelegatesARIACombobox.prototype, \"ariaControls\", void 0);\n\napplyMixins(DelegatesARIACombobox, DelegatesARIAListbox);\napplyMixins(Combobox, StartEnd, DelegatesARIACombobox);","map":{"version":3,"names":["__decorate","attr","DOM","Observable","observable","limit","uniqueId","DelegatesARIAListbox","StartEnd","SelectPosition","applyMixins","FormAssociatedCombobox","ComboboxAutocomplete","Combobox","arguments","_value","filteredOptions","filter","forcedPosition","listboxId","maxHeight","open","setDefaultSelectedOption","updateValue","control","autocomplete","inline","isAutocompleteBoth","list","both","ariaControls","ariaExpanded","setPositioning","focusAndScrollOptionIntoView","queueUpdate","focus","track","length","_options","value","notify","proxy","HTMLInputElement","placeholder","prev","next","positionAttribute","_a","_b","_c","$fastController","isConnected","options","selectedIndex","findIndex","el","text","toLowerCase","prevSelectedValue","nextSelectedValue","firstSelectedOption","e","disabled","captured","target","closest","selectedOptions","clearSelectionRange","initialValue","ariaDisabled","none","o","startsWith","isAutocompleteList","forEach","hidden","includes","contains","document","activeElement","requestAnimationFrame","scrollIntoView","block","syncValue","focusTarget","relatedTarget","isSameNode","filterOptions","isAutocompleteInline","map","option","indexOf","inputType","setInlineSelection","key","ctrlKey","shiftKey","setInputToSelection","preventDefault","getAttribute","selected","dirtyValue","setSelectedOptions","setSelectionRange","newValue","currentBox","getBoundingClientRect","viewportHeight","window","innerHeight","availableBottom","bottom","position","top","above","below","shouldEmit","$emit","controlValueLength","attribute","mode","prototype","DelegatesARIACombobox"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.js"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { attr, DOM, Observable, observable } from \"@microsoft/fast-element\";\nimport { limit, uniqueId } from \"@microsoft/fast-web-utilities\";\nimport { DelegatesARIAListbox } from \"../listbox/listbox.js\";\nimport { StartEnd } from \"../patterns/start-end.js\";\nimport { SelectPosition } from \"../select/select.options.js\";\nimport { applyMixins } from \"../utilities/apply-mixins.js\";\nimport { FormAssociatedCombobox } from \"./combobox.form-associated.js\";\nimport { ComboboxAutocomplete } from \"./combobox.options.js\";\n/**\n * A Combobox Custom HTML Element.\n * Implements the {@link https://w3c.github.io/aria-practices/#combobox | ARIA combobox }.\n *\n * @slot start - Content which can be provided before the input\n * @slot end - Content which can be provided after the input\n * @slot control - Used to replace the input element representing the combobox\n * @slot indicator - The visual indicator representing the expanded state\n * @slot - The default slot for the options\n * @csspart control - The wrapper element containing the input area, including start and end\n * @csspart selected-value - The input element representing the selected value\n * @csspart indicator - The element wrapping the indicator slot\n * @csspart listbox - The wrapper for the listbox slotted options\n * @fires change - Fires a custom 'change' event when the value updates\n *\n * @public\n */\nexport class Combobox extends FormAssociatedCombobox {\n    constructor() {\n        super(...arguments);\n        /**\n         * The internal value property.\n         *\n         * @internal\n         */\n        this._value = \"\";\n        /**\n         * The collection of currently filtered options.\n         *\n         * @public\n         */\n        this.filteredOptions = [];\n        /**\n         * The current filter value.\n         *\n         * @internal\n         */\n        this.filter = \"\";\n        /**\n         * The initial state of the position attribute.\n         *\n         * @internal\n         */\n        this.forcedPosition = false;\n        /**\n         * The unique id for the internal listbox element.\n         *\n         * @internal\n         */\n        this.listboxId = uniqueId(\"listbox-\");\n        /**\n         * The max height for the listbox when opened.\n         *\n         * @internal\n         */\n        this.maxHeight = 0;\n        /**\n         * The open attribute.\n         *\n         * @public\n         * @remarks\n         * HTML Attribute: open\n         */\n        this.open = false;\n    }\n    /**\n     * Reset the element to its first selectable option when its parent form is reset.\n     *\n     * @internal\n     */\n    formResetCallback() {\n        super.formResetCallback();\n        this.setDefaultSelectedOption();\n        this.updateValue();\n    }\n    /** {@inheritDoc (FormAssociated:interface).validate} */\n    validate() {\n        super.validate(this.control);\n    }\n    get isAutocompleteInline() {\n        return (this.autocomplete === ComboboxAutocomplete.inline || this.isAutocompleteBoth);\n    }\n    get isAutocompleteList() {\n        return this.autocomplete === ComboboxAutocomplete.list || this.isAutocompleteBoth;\n    }\n    get isAutocompleteBoth() {\n        return this.autocomplete === ComboboxAutocomplete.both;\n    }\n    /**\n     * Sets focus and synchronize ARIA attributes when the open property changes.\n     *\n     * @param prev - the previous open value\n     * @param next - the current open value\n     *\n     * @internal\n     */\n    openChanged() {\n        if (this.open) {\n            this.ariaControls = this.listboxId;\n            this.ariaExpanded = \"true\";\n            this.setPositioning();\n            this.focusAndScrollOptionIntoView();\n            // focus is directed to the element when `open` is changed programmatically\n            DOM.queueUpdate(() => this.focus());\n            return;\n        }\n        this.ariaControls = \"\";\n        this.ariaExpanded = \"false\";\n    }\n    /**\n     * The list of options.\n     *\n     * @public\n     * @remarks\n     * Overrides `Listbox.options`.\n     */\n    get options() {\n        Observable.track(this, \"options\");\n        return this.filteredOptions.length ? this.filteredOptions : this._options;\n    }\n    set options(value) {\n        this._options = value;\n        Observable.notify(this, \"options\");\n    }\n    /**\n     * Updates the placeholder on the proxy element.\n     * @internal\n     */\n    placeholderChanged() {\n        if (this.proxy instanceof HTMLInputElement) {\n            this.proxy.placeholder = this.placeholder;\n        }\n    }\n    positionChanged(prev, next) {\n        this.positionAttribute = next;\n        this.setPositioning();\n    }\n    /**\n     * The value property.\n     *\n     * @public\n     */\n    get value() {\n        Observable.track(this, \"value\");\n        return this._value;\n    }\n    set value(next) {\n        var _a, _b, _c;\n        const prev = `${this._value}`;\n        if (this.$fastController.isConnected && this.options) {\n            const selectedIndex = this.options.findIndex(el => el.text.toLowerCase() === next.toLowerCase());\n            const prevSelectedValue = (_a = this.options[this.selectedIndex]) === null || _a === void 0 ? void 0 : _a.text;\n            const nextSelectedValue = (_b = this.options[selectedIndex]) === null || _b === void 0 ? void 0 : _b.text;\n            this.selectedIndex =\n                prevSelectedValue !== nextSelectedValue\n                    ? selectedIndex\n                    : this.selectedIndex;\n            next = ((_c = this.firstSelectedOption) === null || _c === void 0 ? void 0 : _c.text) || next;\n        }\n        if (prev !== next) {\n            this._value = next;\n            super.valueChanged(prev, next);\n            Observable.notify(this, \"value\");\n        }\n    }\n    /**\n     * Handle opening and closing the listbox when the combobox is clicked.\n     *\n     * @param e - the mouse event\n     * @internal\n     */\n    clickHandler(e) {\n        if (this.disabled) {\n            return;\n        }\n        if (this.open) {\n            const captured = e.target.closest(`option,[role=option]`);\n            if (!captured || captured.disabled) {\n                return;\n            }\n            this.selectedOptions = [captured];\n            this.control.value = captured.text;\n            this.clearSelectionRange();\n            this.updateValue(true);\n        }\n        this.open = !this.open;\n        if (this.open) {\n            this.control.focus();\n        }\n        return true;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.forcedPosition = !!this.positionAttribute;\n        if (this.value) {\n            this.initialValue = this.value;\n        }\n    }\n    /**\n     * Synchronize the `aria-disabled` property when the `disabled` property changes.\n     *\n     * @param prev - The previous disabled value\n     * @param next - The next disabled value\n     *\n     * @internal\n     */\n    disabledChanged(prev, next) {\n        if (super.disabledChanged) {\n            super.disabledChanged(prev, next);\n        }\n        this.ariaDisabled = this.disabled ? \"true\" : \"false\";\n    }\n    /**\n     * Filter available options by text value.\n     *\n     * @public\n     */\n    filterOptions() {\n        if (!this.autocomplete || this.autocomplete === ComboboxAutocomplete.none) {\n            this.filter = \"\";\n        }\n        const filter = this.filter.toLowerCase();\n        this.filteredOptions = this._options.filter(o => o.text.toLowerCase().startsWith(this.filter.toLowerCase()));\n        if (this.isAutocompleteList) {\n            if (!this.filteredOptions.length && !filter) {\n                this.filteredOptions = this._options;\n            }\n            this._options.forEach(o => {\n                o.hidden = !this.filteredOptions.includes(o);\n            });\n        }\n    }\n    /**\n     * Focus the control and scroll the first selected option into view.\n     *\n     * @internal\n     * @remarks\n     * Overrides: `Listbox.focusAndScrollOptionIntoView`\n     */\n    focusAndScrollOptionIntoView() {\n        if (this.contains(document.activeElement)) {\n            this.control.focus();\n            if (this.firstSelectedOption) {\n                requestAnimationFrame(() => {\n                    var _a;\n                    (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.scrollIntoView({ block: \"nearest\" });\n                });\n            }\n        }\n    }\n    /**\n     * Handle focus state when the element or its children lose focus.\n     *\n     * @param e - The focus event\n     * @internal\n     */\n    focusoutHandler(e) {\n        this.syncValue();\n        if (!this.open) {\n            return true;\n        }\n        const focusTarget = e.relatedTarget;\n        if (this.isSameNode(focusTarget)) {\n            this.focus();\n            return;\n        }\n        if (!this.options || !this.options.includes(focusTarget)) {\n            this.open = false;\n        }\n    }\n    /**\n     * Handle content changes on the control input.\n     *\n     * @param e - the input event\n     * @internal\n     */\n    inputHandler(e) {\n        this.filter = this.control.value;\n        this.filterOptions();\n        if (!this.isAutocompleteInline) {\n            this.selectedIndex = this.options\n                .map(option => option.text)\n                .indexOf(this.control.value);\n        }\n        if (e.inputType.includes(\"deleteContent\") || !this.filter.length) {\n            return true;\n        }\n        if (this.isAutocompleteList && !this.open) {\n            this.open = true;\n        }\n        if (this.isAutocompleteInline) {\n            if (this.filteredOptions.length) {\n                this.selectedOptions = [this.filteredOptions[0]];\n                this.selectedIndex = this.options.indexOf(this.firstSelectedOption);\n                this.setInlineSelection();\n            }\n            else {\n                this.selectedIndex = -1;\n            }\n        }\n        return;\n    }\n    /**\n     * Handle keydown actions for listbox navigation.\n     *\n     * @param e - the keyboard event\n     * @internal\n     */\n    keydownHandler(e) {\n        const key = e.key;\n        if (e.ctrlKey || e.shiftKey) {\n            return true;\n        }\n        switch (key) {\n            case \"Enter\": {\n                this.syncValue();\n                if (this.isAutocompleteInline) {\n                    this.filter = this.value;\n                }\n                this.open = false;\n                this.clearSelectionRange();\n                break;\n            }\n            case \"Escape\": {\n                if (!this.isAutocompleteInline) {\n                    this.selectedIndex = -1;\n                }\n                if (this.open) {\n                    this.open = false;\n                    break;\n                }\n                this.value = \"\";\n                this.control.value = \"\";\n                this.filter = \"\";\n                this.filterOptions();\n                break;\n            }\n            case \"Tab\": {\n                this.setInputToSelection();\n                if (!this.open) {\n                    return true;\n                }\n                e.preventDefault();\n                this.open = false;\n                break;\n            }\n            case \"ArrowUp\":\n            case \"ArrowDown\": {\n                this.filterOptions();\n                if (!this.open) {\n                    this.open = true;\n                    break;\n                }\n                if (this.filteredOptions.length > 0) {\n                    super.keydownHandler(e);\n                }\n                if (this.isAutocompleteInline) {\n                    this.setInlineSelection();\n                }\n                break;\n            }\n            default: {\n                return true;\n            }\n        }\n    }\n    /**\n     * Handle keyup actions for value input and text field manipulations.\n     *\n     * @param e - the keyboard event\n     * @internal\n     */\n    keyupHandler(e) {\n        const key = e.key;\n        switch (key) {\n            case \"ArrowLeft\":\n            case \"ArrowRight\":\n            case \"Backspace\":\n            case \"Delete\":\n            case \"Home\":\n            case \"End\": {\n                this.filter = this.control.value;\n                this.selectedIndex = -1;\n                this.filterOptions();\n                break;\n            }\n        }\n    }\n    /**\n     * Ensure that the selectedIndex is within the current allowable filtered range.\n     *\n     * @param prev - the previous selected index value\n     * @param next - the current selected index value\n     *\n     * @internal\n     */\n    selectedIndexChanged(prev, next) {\n        if (this.$fastController.isConnected) {\n            next = limit(-1, this.options.length - 1, next);\n            // we only want to call the super method when the selectedIndex is in range\n            if (next !== this.selectedIndex) {\n                this.selectedIndex = next;\n                return;\n            }\n            super.selectedIndexChanged(prev, next);\n        }\n    }\n    /**\n     * Move focus to the previous selectable option.\n     *\n     * @internal\n     * @remarks\n     * Overrides `Listbox.selectPreviousOption`\n     */\n    selectPreviousOption() {\n        if (!this.disabled && this.selectedIndex >= 0) {\n            this.selectedIndex = this.selectedIndex - 1;\n        }\n    }\n    /**\n     * Set the default selected options at initialization or reset.\n     *\n     * @internal\n     * @remarks\n     * Overrides `Listbox.setDefaultSelectedOption`\n     */\n    setDefaultSelectedOption() {\n        if (this.$fastController.isConnected && this.options) {\n            const selectedIndex = this.options.findIndex(el => el.getAttribute(\"selected\") !== null || el.selected);\n            this.selectedIndex = selectedIndex;\n            if (!this.dirtyValue && this.firstSelectedOption) {\n                this.value = this.firstSelectedOption.text;\n            }\n            this.setSelectedOptions();\n        }\n    }\n    /**\n     * Focus and set the content of the control based on the first selected option.\n     *\n     * @internal\n     */\n    setInputToSelection() {\n        if (this.firstSelectedOption) {\n            this.control.value = this.firstSelectedOption.text;\n            this.control.focus();\n        }\n    }\n    /**\n     * Focus, set and select the content of the control based on the first selected option.\n     *\n     * @internal\n     */\n    setInlineSelection() {\n        if (this.firstSelectedOption) {\n            this.setInputToSelection();\n            this.control.setSelectionRange(this.filter.length, this.control.value.length, \"backward\");\n        }\n    }\n    /**\n     * Determines if a value update should involve emitting a change event, then updates the value.\n     *\n     * @internal\n     */\n    syncValue() {\n        var _a;\n        const newValue = this.selectedIndex > -1 ? (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text : this.control.value;\n        this.updateValue(this.value !== newValue);\n    }\n    /**\n     * Calculate and apply listbox positioning based on available viewport space.\n     *\n     * @param force - direction to force the listbox to display\n     * @public\n     */\n    setPositioning() {\n        const currentBox = this.getBoundingClientRect();\n        const viewportHeight = window.innerHeight;\n        const availableBottom = viewportHeight - currentBox.bottom;\n        this.position = this.forcedPosition\n            ? this.positionAttribute\n            : currentBox.top > availableBottom\n                ? SelectPosition.above\n                : SelectPosition.below;\n        this.positionAttribute = this.forcedPosition\n            ? this.positionAttribute\n            : this.position;\n        this.maxHeight =\n            this.position === SelectPosition.above ? ~~currentBox.top : ~~availableBottom;\n    }\n    /**\n     * Ensure that the entire list of options is used when setting the selected property.\n     *\n     * @param prev - the previous list of selected options\n     * @param next - the current list of selected options\n     *\n     * @internal\n     * @remarks\n     * Overrides: `Listbox.selectedOptionsChanged`\n     */\n    selectedOptionsChanged(prev, next) {\n        if (this.$fastController.isConnected) {\n            this._options.forEach(o => {\n                o.selected = next.includes(o);\n            });\n        }\n    }\n    /**\n     * Synchronize the form-associated proxy and update the value property of the element.\n     *\n     * @param prev - the previous collection of slotted option elements\n     * @param next - the next collection of slotted option elements\n     *\n     * @internal\n     */\n    slottedOptionsChanged(prev, next) {\n        super.slottedOptionsChanged(prev, next);\n        this.updateValue();\n    }\n    /**\n     * Sets the value and to match the first selected option.\n     *\n     * @param shouldEmit - if true, the change event will be emitted\n     *\n     * @internal\n     */\n    updateValue(shouldEmit) {\n        var _a;\n        if (this.$fastController.isConnected) {\n            this.value = ((_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text) || this.control.value;\n            this.control.value = this.value;\n        }\n        if (shouldEmit) {\n            this.$emit(\"change\");\n        }\n    }\n    /**\n     * @internal\n     */\n    clearSelectionRange() {\n        const controlValueLength = this.control.value.length;\n        this.control.setSelectionRange(controlValueLength, controlValueLength);\n    }\n}\n__decorate([\n    attr({ attribute: \"autocomplete\", mode: \"fromView\" })\n], Combobox.prototype, \"autocomplete\", void 0);\n__decorate([\n    observable\n], Combobox.prototype, \"maxHeight\", void 0);\n__decorate([\n    attr({ attribute: \"open\", mode: \"boolean\" })\n], Combobox.prototype, \"open\", void 0);\n__decorate([\n    attr\n], Combobox.prototype, \"placeholder\", void 0);\n__decorate([\n    attr({ attribute: \"position\" })\n], Combobox.prototype, \"positionAttribute\", void 0);\n__decorate([\n    observable\n], Combobox.prototype, \"position\", void 0);\n/**\n * Includes ARIA states and properties relating to the ARIA combobox role.\n *\n * @public\n */\nexport class DelegatesARIACombobox {\n}\n__decorate([\n    observable\n], DelegatesARIACombobox.prototype, \"ariaAutoComplete\", void 0);\n__decorate([\n    observable\n], DelegatesARIACombobox.prototype, \"ariaControls\", void 0);\napplyMixins(DelegatesARIACombobox, DelegatesARIAListbox);\napplyMixins(Combobox, StartEnd, DelegatesARIACombobox);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}