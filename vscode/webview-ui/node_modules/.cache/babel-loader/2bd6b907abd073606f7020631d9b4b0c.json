{"ast":null,"code":"import _classCallCheck from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { __decorate } from \"tslib\";\nimport { attr, DOM, nullableNumberConverter, observable } from \"@microsoft/fast-element\";\nimport { inRange, keyArrowDown, keyArrowUp, keyEnd, keyEscape, keyHome, keySpace, keyTab } from \"@microsoft/fast-web-utilities\";\nimport { Listbox } from \"./listbox.js\";\n/**\n * A Listbox Custom HTML Element.\n * Implements the {@link https://w3c.github.io/aria/#listbox | ARIA listbox }.\n *\n * @public\n */\n\nexport var ListboxElement = /*#__PURE__*/function (_Listbox) {\n  _inherits(ListboxElement, _Listbox);\n\n  var _super = _createSuper(ListboxElement);\n\n  function ListboxElement() {\n    var _this;\n\n    _classCallCheck(this, ListboxElement);\n\n    _this = _super.apply(this, arguments);\n    /**\n     * The index of the most recently checked option.\n     *\n     * @internal\n     * @remarks\n     * Multiple-selection mode only.\n     */\n\n    _this.activeIndex = -1;\n    /**\n     * The start index when checking a range of options.\n     *\n     * @internal\n     */\n\n    _this.rangeStartIndex = -1;\n    return _this;\n  }\n  /**\n   * Returns the last checked option.\n   *\n   * @internal\n   */\n\n\n  _createClass(ListboxElement, [{\n    key: \"activeOption\",\n    get: function get() {\n      return this.options[this.activeIndex];\n    }\n    /**\n     * Returns the list of checked options.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"checkedOptions\",\n    get: function get() {\n      var _a;\n\n      return (_a = this.options) === null || _a === void 0 ? void 0 : _a.filter(function (o) {\n        return o.checked;\n      });\n    }\n    /**\n     * Returns the index of the first selected option.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"firstSelectedOptionIndex\",\n    get: function get() {\n      return this.options.indexOf(this.firstSelectedOption);\n    }\n    /**\n     * Updates the `ariaActiveDescendant` property when the active index changes.\n     *\n     * @param prev - the previous active index\n     * @param next - the next active index\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"activeIndexChanged\",\n    value: function activeIndexChanged(prev, next) {\n      var _a, _b;\n\n      this.ariaActiveDescendant = (_b = (_a = this.options[next]) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : \"\";\n      this.focusAndScrollOptionIntoView();\n    }\n    /**\n     * Toggles the checked state for the currently active option.\n     *\n     * @remarks\n     * Multiple-selection mode only.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"checkActiveIndex\",\n    value: function checkActiveIndex() {\n      if (!this.multiple) {\n        return;\n      }\n\n      var activeItem = this.activeOption;\n\n      if (activeItem) {\n        activeItem.checked = true;\n      }\n    }\n    /**\n     * Sets the active index to the first option and marks it as checked.\n     *\n     * @remarks\n     * Multi-selection mode only.\n     *\n     * @param preserveChecked - mark all options unchecked before changing the active index\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"checkFirstOption\",\n    value: function checkFirstOption() {\n      var _this2 = this;\n\n      var preserveChecked = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (preserveChecked) {\n        if (this.rangeStartIndex === -1) {\n          this.rangeStartIndex = this.activeIndex + 1;\n        }\n\n        this.options.forEach(function (o, i) {\n          o.checked = inRange(i, _this2.rangeStartIndex);\n        });\n      } else {\n        this.uncheckAllOptions();\n      }\n\n      this.activeIndex = 0;\n      this.checkActiveIndex();\n    }\n    /**\n     * Decrements the active index and sets the matching option as checked.\n     *\n     * @remarks\n     * Multi-selection mode only.\n     *\n     * @param preserveChecked - mark all options unchecked before changing the active index\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"checkLastOption\",\n    value: function checkLastOption() {\n      var _this3 = this;\n\n      var preserveChecked = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (preserveChecked) {\n        if (this.rangeStartIndex === -1) {\n          this.rangeStartIndex = this.activeIndex;\n        }\n\n        this.options.forEach(function (o, i) {\n          o.checked = inRange(i, _this3.rangeStartIndex, _this3.options.length);\n        });\n      } else {\n        this.uncheckAllOptions();\n      }\n\n      this.activeIndex = this.options.length - 1;\n      this.checkActiveIndex();\n    }\n    /**\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      _get(_getPrototypeOf(ListboxElement.prototype), \"connectedCallback\", this).call(this);\n\n      this.addEventListener(\"focusout\", this.focusoutHandler);\n    }\n    /**\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.removeEventListener(\"focusout\", this.focusoutHandler);\n\n      _get(_getPrototypeOf(ListboxElement.prototype), \"disconnectedCallback\", this).call(this);\n    }\n    /**\n     * Increments the active index and marks the matching option as checked.\n     *\n     * @remarks\n     * Multiple-selection mode only.\n     *\n     * @param preserveChecked - mark all options unchecked before changing the active index\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"checkNextOption\",\n    value: function checkNextOption() {\n      var _this4 = this;\n\n      var preserveChecked = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (preserveChecked) {\n        if (this.rangeStartIndex === -1) {\n          this.rangeStartIndex = this.activeIndex;\n        }\n\n        this.options.forEach(function (o, i) {\n          o.checked = inRange(i, _this4.rangeStartIndex, _this4.activeIndex + 1);\n        });\n      } else {\n        this.uncheckAllOptions();\n      }\n\n      this.activeIndex += this.activeIndex < this.options.length - 1 ? 1 : 0;\n      this.checkActiveIndex();\n    }\n    /**\n     * Decrements the active index and marks the matching option as checked.\n     *\n     * @remarks\n     * Multiple-selection mode only.\n     *\n     * @param preserveChecked - mark all options unchecked before changing the active index\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"checkPreviousOption\",\n    value: function checkPreviousOption() {\n      var _this5 = this;\n\n      var preserveChecked = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (preserveChecked) {\n        if (this.rangeStartIndex === -1) {\n          this.rangeStartIndex = this.activeIndex;\n        }\n\n        if (this.checkedOptions.length === 1) {\n          this.rangeStartIndex += 1;\n        }\n\n        this.options.forEach(function (o, i) {\n          o.checked = inRange(i, _this5.activeIndex, _this5.rangeStartIndex);\n        });\n      } else {\n        this.uncheckAllOptions();\n      }\n\n      this.activeIndex -= this.activeIndex > 0 ? 1 : 0;\n      this.checkActiveIndex();\n    }\n    /**\n     * Handles click events for listbox options.\n     *\n     * @param e - the event object\n     *\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"clickHandler\",\n    value: function clickHandler(e) {\n      var _a;\n\n      if (!this.multiple) {\n        return _get(_getPrototypeOf(ListboxElement.prototype), \"clickHandler\", this).call(this, e);\n      }\n\n      var captured = (_a = e.target) === null || _a === void 0 ? void 0 : _a.closest(\"[role=option]\");\n\n      if (!captured || captured.disabled) {\n        return;\n      }\n\n      this.uncheckAllOptions();\n      this.activeIndex = this.options.indexOf(captured);\n      this.checkActiveIndex();\n      this.toggleSelectedForAllCheckedOptions();\n      return true;\n    }\n    /**\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"focusAndScrollOptionIntoView\",\n    value: function focusAndScrollOptionIntoView() {\n      _get(_getPrototypeOf(ListboxElement.prototype), \"focusAndScrollOptionIntoView\", this).call(this, this.activeOption);\n    }\n    /**\n     * In multiple-selection mode:\n     * If any options are selected, the first selected option is checked when\n     * the listbox receives focus. If no options are selected, the first\n     * selectable option is checked.\n     *\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"focusinHandler\",\n    value: function focusinHandler(e) {\n      if (!this.multiple) {\n        return _get(_getPrototypeOf(ListboxElement.prototype), \"focusinHandler\", this).call(this, e);\n      }\n\n      if (!this.shouldSkipFocus && e.target === e.currentTarget) {\n        this.uncheckAllOptions();\n\n        if (this.activeIndex === -1) {\n          this.activeIndex = this.firstSelectedOptionIndex !== -1 ? this.firstSelectedOptionIndex : 0;\n        }\n\n        this.checkActiveIndex();\n        this.setSelectedOptions();\n        this.focusAndScrollOptionIntoView();\n      }\n\n      this.shouldSkipFocus = false;\n    }\n    /**\n     * Unchecks all options when the listbox loses focus.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"focusoutHandler\",\n    value: function focusoutHandler(e) {\n      if (this.multiple) {\n        this.uncheckAllOptions();\n      }\n    }\n    /**\n     * Handles keydown actions for listbox navigation and typeahead\n     *\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"keydownHandler\",\n    value: function keydownHandler(e) {\n      if (!this.multiple) {\n        return _get(_getPrototypeOf(ListboxElement.prototype), \"keydownHandler\", this).call(this, e);\n      }\n\n      if (this.disabled) {\n        return true;\n      }\n\n      var key = e.key,\n          shiftKey = e.shiftKey;\n      this.shouldSkipFocus = false;\n\n      switch (key) {\n        // Select the first available option\n        case keyHome:\n          {\n            this.checkFirstOption(shiftKey);\n            return;\n          }\n        // Select the next selectable option\n\n        case keyArrowDown:\n          {\n            this.checkNextOption(shiftKey);\n            return;\n          }\n        // Select the previous selectable option\n\n        case keyArrowUp:\n          {\n            this.checkPreviousOption(shiftKey);\n            return;\n          }\n        // Select the last available option\n\n        case keyEnd:\n          {\n            this.checkLastOption(shiftKey);\n            return;\n          }\n\n        case keyTab:\n          {\n            this.focusAndScrollOptionIntoView();\n            return true;\n          }\n\n        case keyEscape:\n          {\n            this.uncheckAllOptions();\n            this.checkActiveIndex();\n            return true;\n          }\n\n        case keySpace:\n          {\n            e.preventDefault();\n\n            if (this.typeAheadExpired) {\n              this.toggleSelectedForAllCheckedOptions();\n              return;\n            }\n          }\n        // Send key to Typeahead handler\n\n        default:\n          {\n            if (key.length === 1) {\n              this.handleTypeAhead(\"\".concat(key));\n            }\n\n            return true;\n          }\n      }\n    }\n    /**\n     * Prevents `focusin` events from firing before `click` events when the\n     * element is unfocused.\n     *\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"mousedownHandler\",\n    value: function mousedownHandler(e) {\n      if (e.offsetX >= 0 && e.offsetX <= this.scrollWidth) {\n        return _get(_getPrototypeOf(ListboxElement.prototype), \"mousedownHandler\", this).call(this, e);\n      }\n    }\n    /**\n     * Switches between single-selection and multi-selection mode.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"multipleChanged\",\n    value: function multipleChanged(prev, next) {\n      var _a;\n\n      this.ariaMultiSelectable = next ? \"true\" : null;\n      (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach(function (o) {\n        o.checked = next ? false : undefined;\n      });\n      this.setSelectedOptions();\n    }\n    /**\n     * Sets an option as selected and gives it focus.\n     *\n     * @override\n     * @public\n     */\n\n  }, {\n    key: \"setSelectedOptions\",\n    value: function setSelectedOptions() {\n      if (!this.multiple) {\n        _get(_getPrototypeOf(ListboxElement.prototype), \"setSelectedOptions\", this).call(this);\n\n        return;\n      }\n\n      if (this.$fastController.isConnected && this.options) {\n        this.selectedOptions = this.options.filter(function (o) {\n          return o.selected;\n        });\n        this.focusAndScrollOptionIntoView();\n      }\n    }\n    /**\n     * Ensures the size is a positive integer when the property is updated.\n     *\n     * @param prev - the previous size value\n     * @param next - the current size value\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"sizeChanged\",\n    value: function sizeChanged(prev, next) {\n      var _this6 = this;\n\n      var _a;\n\n      var size = Math.max(0, parseInt((_a = next === null || next === void 0 ? void 0 : next.toFixed()) !== null && _a !== void 0 ? _a : \"\", 10));\n\n      if (size !== next) {\n        DOM.queueUpdate(function () {\n          _this6.size = size;\n        });\n      }\n    }\n    /**\n     * Toggles the selected state of the provided options. If any provided items\n     * are in an unselected state, all items are set to selected. If every\n     * provided item is selected, they are all unselected.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"toggleSelectedForAllCheckedOptions\",\n    value: function toggleSelectedForAllCheckedOptions() {\n      var enabledCheckedOptions = this.checkedOptions.filter(function (o) {\n        return !o.disabled;\n      });\n      var force = !enabledCheckedOptions.every(function (o) {\n        return o.selected;\n      });\n      enabledCheckedOptions.forEach(function (o) {\n        return o.selected = force;\n      });\n      this.selectedIndex = this.options.indexOf(enabledCheckedOptions[enabledCheckedOptions.length - 1]);\n      this.setSelectedOptions();\n    }\n    /**\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"typeaheadBufferChanged\",\n    value: function typeaheadBufferChanged(prev, next) {\n      if (!this.multiple) {\n        _get(_getPrototypeOf(ListboxElement.prototype), \"typeaheadBufferChanged\", this).call(this, prev, next);\n\n        return;\n      }\n\n      if (this.$fastController.isConnected) {\n        var typeaheadMatches = this.getTypeaheadMatches();\n        var activeIndex = this.options.indexOf(typeaheadMatches[0]);\n\n        if (activeIndex > -1) {\n          this.activeIndex = activeIndex;\n          this.uncheckAllOptions();\n          this.checkActiveIndex();\n        }\n\n        this.typeAheadExpired = false;\n      }\n    }\n    /**\n     * Unchecks all options.\n     *\n     * @remarks\n     * Multiple-selection mode only.\n     *\n     * @param preserveChecked - reset the rangeStartIndex\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"uncheckAllOptions\",\n    value: function uncheckAllOptions() {\n      var _this7 = this;\n\n      var preserveChecked = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.options.forEach(function (o) {\n        return o.checked = _this7.multiple ? false : undefined;\n      });\n\n      if (!preserveChecked) {\n        this.rangeStartIndex = -1;\n      }\n    }\n  }]);\n\n  return ListboxElement;\n}(Listbox);\n\n__decorate([observable], ListboxElement.prototype, \"activeIndex\", void 0);\n\n__decorate([attr({\n  mode: \"boolean\"\n})], ListboxElement.prototype, \"multiple\", void 0);\n\n__decorate([attr({\n  converter: nullableNumberConverter\n})], ListboxElement.prototype, \"size\", void 0);","map":{"version":3,"names":["__decorate","attr","DOM","nullableNumberConverter","observable","inRange","keyArrowDown","keyArrowUp","keyEnd","keyEscape","keyHome","keySpace","keyTab","Listbox","ListboxElement","arguments","activeIndex","rangeStartIndex","options","_a","filter","o","checked","indexOf","firstSelectedOption","prev","next","_b","ariaActiveDescendant","id","focusAndScrollOptionIntoView","multiple","activeItem","activeOption","preserveChecked","forEach","i","uncheckAllOptions","checkActiveIndex","length","addEventListener","focusoutHandler","removeEventListener","checkedOptions","e","captured","target","closest","disabled","toggleSelectedForAllCheckedOptions","shouldSkipFocus","currentTarget","firstSelectedOptionIndex","setSelectedOptions","key","shiftKey","checkFirstOption","checkNextOption","checkPreviousOption","checkLastOption","preventDefault","typeAheadExpired","handleTypeAhead","offsetX","scrollWidth","ariaMultiSelectable","undefined","$fastController","isConnected","selectedOptions","selected","size","Math","max","parseInt","toFixed","queueUpdate","enabledCheckedOptions","force","every","selectedIndex","typeaheadMatches","getTypeaheadMatches","prototype","mode","converter"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.element.js"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { attr, DOM, nullableNumberConverter, observable } from \"@microsoft/fast-element\";\nimport { inRange, keyArrowDown, keyArrowUp, keyEnd, keyEscape, keyHome, keySpace, keyTab, } from \"@microsoft/fast-web-utilities\";\nimport { Listbox } from \"./listbox.js\";\n/**\n * A Listbox Custom HTML Element.\n * Implements the {@link https://w3c.github.io/aria/#listbox | ARIA listbox }.\n *\n * @public\n */\nexport class ListboxElement extends Listbox {\n    constructor() {\n        super(...arguments);\n        /**\n         * The index of the most recently checked option.\n         *\n         * @internal\n         * @remarks\n         * Multiple-selection mode only.\n         */\n        this.activeIndex = -1;\n        /**\n         * The start index when checking a range of options.\n         *\n         * @internal\n         */\n        this.rangeStartIndex = -1;\n    }\n    /**\n     * Returns the last checked option.\n     *\n     * @internal\n     */\n    get activeOption() {\n        return this.options[this.activeIndex];\n    }\n    /**\n     * Returns the list of checked options.\n     *\n     * @internal\n     */\n    get checkedOptions() {\n        var _a;\n        return (_a = this.options) === null || _a === void 0 ? void 0 : _a.filter(o => o.checked);\n    }\n    /**\n     * Returns the index of the first selected option.\n     *\n     * @internal\n     */\n    get firstSelectedOptionIndex() {\n        return this.options.indexOf(this.firstSelectedOption);\n    }\n    /**\n     * Updates the `ariaActiveDescendant` property when the active index changes.\n     *\n     * @param prev - the previous active index\n     * @param next - the next active index\n     *\n     * @internal\n     */\n    activeIndexChanged(prev, next) {\n        var _a, _b;\n        this.ariaActiveDescendant = (_b = (_a = this.options[next]) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : \"\";\n        this.focusAndScrollOptionIntoView();\n    }\n    /**\n     * Toggles the checked state for the currently active option.\n     *\n     * @remarks\n     * Multiple-selection mode only.\n     *\n     * @internal\n     */\n    checkActiveIndex() {\n        if (!this.multiple) {\n            return;\n        }\n        const activeItem = this.activeOption;\n        if (activeItem) {\n            activeItem.checked = true;\n        }\n    }\n    /**\n     * Sets the active index to the first option and marks it as checked.\n     *\n     * @remarks\n     * Multi-selection mode only.\n     *\n     * @param preserveChecked - mark all options unchecked before changing the active index\n     *\n     * @internal\n     */\n    checkFirstOption(preserveChecked = false) {\n        if (preserveChecked) {\n            if (this.rangeStartIndex === -1) {\n                this.rangeStartIndex = this.activeIndex + 1;\n            }\n            this.options.forEach((o, i) => {\n                o.checked = inRange(i, this.rangeStartIndex);\n            });\n        }\n        else {\n            this.uncheckAllOptions();\n        }\n        this.activeIndex = 0;\n        this.checkActiveIndex();\n    }\n    /**\n     * Decrements the active index and sets the matching option as checked.\n     *\n     * @remarks\n     * Multi-selection mode only.\n     *\n     * @param preserveChecked - mark all options unchecked before changing the active index\n     *\n     * @internal\n     */\n    checkLastOption(preserveChecked = false) {\n        if (preserveChecked) {\n            if (this.rangeStartIndex === -1) {\n                this.rangeStartIndex = this.activeIndex;\n            }\n            this.options.forEach((o, i) => {\n                o.checked = inRange(i, this.rangeStartIndex, this.options.length);\n            });\n        }\n        else {\n            this.uncheckAllOptions();\n        }\n        this.activeIndex = this.options.length - 1;\n        this.checkActiveIndex();\n    }\n    /**\n     * @override\n     * @internal\n     */\n    connectedCallback() {\n        super.connectedCallback();\n        this.addEventListener(\"focusout\", this.focusoutHandler);\n    }\n    /**\n     * @override\n     * @internal\n     */\n    disconnectedCallback() {\n        this.removeEventListener(\"focusout\", this.focusoutHandler);\n        super.disconnectedCallback();\n    }\n    /**\n     * Increments the active index and marks the matching option as checked.\n     *\n     * @remarks\n     * Multiple-selection mode only.\n     *\n     * @param preserveChecked - mark all options unchecked before changing the active index\n     *\n     * @internal\n     */\n    checkNextOption(preserveChecked = false) {\n        if (preserveChecked) {\n            if (this.rangeStartIndex === -1) {\n                this.rangeStartIndex = this.activeIndex;\n            }\n            this.options.forEach((o, i) => {\n                o.checked = inRange(i, this.rangeStartIndex, this.activeIndex + 1);\n            });\n        }\n        else {\n            this.uncheckAllOptions();\n        }\n        this.activeIndex += this.activeIndex < this.options.length - 1 ? 1 : 0;\n        this.checkActiveIndex();\n    }\n    /**\n     * Decrements the active index and marks the matching option as checked.\n     *\n     * @remarks\n     * Multiple-selection mode only.\n     *\n     * @param preserveChecked - mark all options unchecked before changing the active index\n     *\n     * @internal\n     */\n    checkPreviousOption(preserveChecked = false) {\n        if (preserveChecked) {\n            if (this.rangeStartIndex === -1) {\n                this.rangeStartIndex = this.activeIndex;\n            }\n            if (this.checkedOptions.length === 1) {\n                this.rangeStartIndex += 1;\n            }\n            this.options.forEach((o, i) => {\n                o.checked = inRange(i, this.activeIndex, this.rangeStartIndex);\n            });\n        }\n        else {\n            this.uncheckAllOptions();\n        }\n        this.activeIndex -= this.activeIndex > 0 ? 1 : 0;\n        this.checkActiveIndex();\n    }\n    /**\n     * Handles click events for listbox options.\n     *\n     * @param e - the event object\n     *\n     * @override\n     * @internal\n     */\n    clickHandler(e) {\n        var _a;\n        if (!this.multiple) {\n            return super.clickHandler(e);\n        }\n        const captured = (_a = e.target) === null || _a === void 0 ? void 0 : _a.closest(`[role=option]`);\n        if (!captured || captured.disabled) {\n            return;\n        }\n        this.uncheckAllOptions();\n        this.activeIndex = this.options.indexOf(captured);\n        this.checkActiveIndex();\n        this.toggleSelectedForAllCheckedOptions();\n        return true;\n    }\n    /**\n     * @override\n     * @internal\n     */\n    focusAndScrollOptionIntoView() {\n        super.focusAndScrollOptionIntoView(this.activeOption);\n    }\n    /**\n     * In multiple-selection mode:\n     * If any options are selected, the first selected option is checked when\n     * the listbox receives focus. If no options are selected, the first\n     * selectable option is checked.\n     *\n     * @override\n     * @internal\n     */\n    focusinHandler(e) {\n        if (!this.multiple) {\n            return super.focusinHandler(e);\n        }\n        if (!this.shouldSkipFocus && e.target === e.currentTarget) {\n            this.uncheckAllOptions();\n            if (this.activeIndex === -1) {\n                this.activeIndex =\n                    this.firstSelectedOptionIndex !== -1\n                        ? this.firstSelectedOptionIndex\n                        : 0;\n            }\n            this.checkActiveIndex();\n            this.setSelectedOptions();\n            this.focusAndScrollOptionIntoView();\n        }\n        this.shouldSkipFocus = false;\n    }\n    /**\n     * Unchecks all options when the listbox loses focus.\n     *\n     * @internal\n     */\n    focusoutHandler(e) {\n        if (this.multiple) {\n            this.uncheckAllOptions();\n        }\n    }\n    /**\n     * Handles keydown actions for listbox navigation and typeahead\n     *\n     * @override\n     * @internal\n     */\n    keydownHandler(e) {\n        if (!this.multiple) {\n            return super.keydownHandler(e);\n        }\n        if (this.disabled) {\n            return true;\n        }\n        const { key, shiftKey } = e;\n        this.shouldSkipFocus = false;\n        switch (key) {\n            // Select the first available option\n            case keyHome: {\n                this.checkFirstOption(shiftKey);\n                return;\n            }\n            // Select the next selectable option\n            case keyArrowDown: {\n                this.checkNextOption(shiftKey);\n                return;\n            }\n            // Select the previous selectable option\n            case keyArrowUp: {\n                this.checkPreviousOption(shiftKey);\n                return;\n            }\n            // Select the last available option\n            case keyEnd: {\n                this.checkLastOption(shiftKey);\n                return;\n            }\n            case keyTab: {\n                this.focusAndScrollOptionIntoView();\n                return true;\n            }\n            case keyEscape: {\n                this.uncheckAllOptions();\n                this.checkActiveIndex();\n                return true;\n            }\n            case keySpace: {\n                e.preventDefault();\n                if (this.typeAheadExpired) {\n                    this.toggleSelectedForAllCheckedOptions();\n                    return;\n                }\n            }\n            // Send key to Typeahead handler\n            default: {\n                if (key.length === 1) {\n                    this.handleTypeAhead(`${key}`);\n                }\n                return true;\n            }\n        }\n    }\n    /**\n     * Prevents `focusin` events from firing before `click` events when the\n     * element is unfocused.\n     *\n     * @override\n     * @internal\n     */\n    mousedownHandler(e) {\n        if (e.offsetX >= 0 && e.offsetX <= this.scrollWidth) {\n            return super.mousedownHandler(e);\n        }\n    }\n    /**\n     * Switches between single-selection and multi-selection mode.\n     *\n     * @internal\n     */\n    multipleChanged(prev, next) {\n        var _a;\n        this.ariaMultiSelectable = next ? \"true\" : null;\n        (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach(o => {\n            o.checked = next ? false : undefined;\n        });\n        this.setSelectedOptions();\n    }\n    /**\n     * Sets an option as selected and gives it focus.\n     *\n     * @override\n     * @public\n     */\n    setSelectedOptions() {\n        if (!this.multiple) {\n            super.setSelectedOptions();\n            return;\n        }\n        if (this.$fastController.isConnected && this.options) {\n            this.selectedOptions = this.options.filter(o => o.selected);\n            this.focusAndScrollOptionIntoView();\n        }\n    }\n    /**\n     * Ensures the size is a positive integer when the property is updated.\n     *\n     * @param prev - the previous size value\n     * @param next - the current size value\n     *\n     * @internal\n     */\n    sizeChanged(prev, next) {\n        var _a;\n        const size = Math.max(0, parseInt((_a = next === null || next === void 0 ? void 0 : next.toFixed()) !== null && _a !== void 0 ? _a : \"\", 10));\n        if (size !== next) {\n            DOM.queueUpdate(() => {\n                this.size = size;\n            });\n        }\n    }\n    /**\n     * Toggles the selected state of the provided options. If any provided items\n     * are in an unselected state, all items are set to selected. If every\n     * provided item is selected, they are all unselected.\n     *\n     * @internal\n     */\n    toggleSelectedForAllCheckedOptions() {\n        const enabledCheckedOptions = this.checkedOptions.filter(o => !o.disabled);\n        const force = !enabledCheckedOptions.every(o => o.selected);\n        enabledCheckedOptions.forEach(o => (o.selected = force));\n        this.selectedIndex = this.options.indexOf(enabledCheckedOptions[enabledCheckedOptions.length - 1]);\n        this.setSelectedOptions();\n    }\n    /**\n     * @override\n     * @internal\n     */\n    typeaheadBufferChanged(prev, next) {\n        if (!this.multiple) {\n            super.typeaheadBufferChanged(prev, next);\n            return;\n        }\n        if (this.$fastController.isConnected) {\n            const typeaheadMatches = this.getTypeaheadMatches();\n            const activeIndex = this.options.indexOf(typeaheadMatches[0]);\n            if (activeIndex > -1) {\n                this.activeIndex = activeIndex;\n                this.uncheckAllOptions();\n                this.checkActiveIndex();\n            }\n            this.typeAheadExpired = false;\n        }\n    }\n    /**\n     * Unchecks all options.\n     *\n     * @remarks\n     * Multiple-selection mode only.\n     *\n     * @param preserveChecked - reset the rangeStartIndex\n     *\n     * @internal\n     */\n    uncheckAllOptions(preserveChecked = false) {\n        this.options.forEach(o => (o.checked = this.multiple ? false : undefined));\n        if (!preserveChecked) {\n            this.rangeStartIndex = -1;\n        }\n    }\n}\n__decorate([\n    observable\n], ListboxElement.prototype, \"activeIndex\", void 0);\n__decorate([\n    attr({ mode: \"boolean\" })\n], ListboxElement.prototype, \"multiple\", void 0);\n__decorate([\n    attr({ converter: nullableNumberConverter })\n], ListboxElement.prototype, \"size\", void 0);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}