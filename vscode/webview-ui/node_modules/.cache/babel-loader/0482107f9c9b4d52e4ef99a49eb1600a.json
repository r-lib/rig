{"ast":null,"code":"import { Observable } from \"../observation/observable.js\";\nimport { emptyArray } from \"../platform.js\";\n/**\n * Creates a function that can be used to filter a Node array, selecting only elements.\n * @param selector - An optional selector to restrict the filter to.\n * @public\n */\n\nexport function elements(selector) {\n  if (selector) {\n    return function (value, index, array) {\n      return value.nodeType === 1 && value.matches(selector);\n    };\n  }\n\n  return function (value, index, array) {\n    return value.nodeType === 1;\n  };\n}\n/**\n * A base class for node observation.\n * @internal\n */\n\nexport class NodeObservationBehavior {\n  /**\n   * Creates an instance of NodeObservationBehavior.\n   * @param target - The target to assign the nodes property on.\n   * @param options - The options to use in configuring node observation.\n   */\n  constructor(target, options) {\n    this.target = target;\n    this.options = options;\n    this.source = null;\n  }\n  /**\n   * Bind this behavior to the source.\n   * @param source - The source to bind to.\n   * @param context - The execution context that the binding is operating within.\n   */\n\n\n  bind(source) {\n    const name = this.options.property;\n    this.shouldUpdate = Observable.getAccessors(source).some(x => x.name === name);\n    this.source = source;\n    this.updateTarget(this.computeNodes());\n\n    if (this.shouldUpdate) {\n      this.observe();\n    }\n  }\n  /**\n   * Unbinds this behavior from the source.\n   * @param source - The source to unbind from.\n   */\n\n\n  unbind() {\n    this.updateTarget(emptyArray);\n    this.source = null;\n\n    if (this.shouldUpdate) {\n      this.disconnect();\n    }\n  }\n  /** @internal */\n\n\n  handleEvent() {\n    this.updateTarget(this.computeNodes());\n  }\n\n  computeNodes() {\n    let nodes = this.getNodes();\n\n    if (this.options.filter !== void 0) {\n      nodes = nodes.filter(this.options.filter);\n    }\n\n    return nodes;\n  }\n\n  updateTarget(value) {\n    this.source[this.options.property] = value;\n  }\n\n}","map":{"version":3,"names":["Observable","emptyArray","elements","selector","value","index","array","nodeType","matches","NodeObservationBehavior","constructor","target","options","source","bind","name","property","shouldUpdate","getAccessors","some","x","updateTarget","computeNodes","observe","unbind","disconnect","handleEvent","nodes","getNodes","filter"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-element/dist/esm/templating/node-observation.js"],"sourcesContent":["import { Observable } from \"../observation/observable.js\";\nimport { emptyArray } from \"../platform.js\";\n/**\n * Creates a function that can be used to filter a Node array, selecting only elements.\n * @param selector - An optional selector to restrict the filter to.\n * @public\n */\nexport function elements(selector) {\n    if (selector) {\n        return function (value, index, array) {\n            return value.nodeType === 1 && value.matches(selector);\n        };\n    }\n    return function (value, index, array) {\n        return value.nodeType === 1;\n    };\n}\n/**\n * A base class for node observation.\n * @internal\n */\nexport class NodeObservationBehavior {\n    /**\n     * Creates an instance of NodeObservationBehavior.\n     * @param target - The target to assign the nodes property on.\n     * @param options - The options to use in configuring node observation.\n     */\n    constructor(target, options) {\n        this.target = target;\n        this.options = options;\n        this.source = null;\n    }\n    /**\n     * Bind this behavior to the source.\n     * @param source - The source to bind to.\n     * @param context - The execution context that the binding is operating within.\n     */\n    bind(source) {\n        const name = this.options.property;\n        this.shouldUpdate = Observable.getAccessors(source).some((x) => x.name === name);\n        this.source = source;\n        this.updateTarget(this.computeNodes());\n        if (this.shouldUpdate) {\n            this.observe();\n        }\n    }\n    /**\n     * Unbinds this behavior from the source.\n     * @param source - The source to unbind from.\n     */\n    unbind() {\n        this.updateTarget(emptyArray);\n        this.source = null;\n        if (this.shouldUpdate) {\n            this.disconnect();\n        }\n    }\n    /** @internal */\n    handleEvent() {\n        this.updateTarget(this.computeNodes());\n    }\n    computeNodes() {\n        let nodes = this.getNodes();\n        if (this.options.filter !== void 0) {\n            nodes = nodes.filter(this.options.filter);\n        }\n        return nodes;\n    }\n    updateTarget(value) {\n        this.source[this.options.property] = value;\n    }\n}\n"],"mappings":"AAAA,SAASA,UAAT,QAA2B,8BAA3B;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;EAC/B,IAAIA,QAAJ,EAAc;IACV,OAAO,UAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,KAAxB,EAA+B;MAClC,OAAOF,KAAK,CAACG,QAAN,KAAmB,CAAnB,IAAwBH,KAAK,CAACI,OAAN,CAAcL,QAAd,CAA/B;IACH,CAFD;EAGH;;EACD,OAAO,UAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,KAAxB,EAA+B;IAClC,OAAOF,KAAK,CAACG,QAAN,KAAmB,CAA1B;EACH,CAFD;AAGH;AACD;AACA;AACA;AACA;;AACA,OAAO,MAAME,uBAAN,CAA8B;EACjC;AACJ;AACA;AACA;AACA;EACIC,WAAW,CAACC,MAAD,EAASC,OAAT,EAAkB;IACzB,KAAKD,MAAL,GAAcA,MAAd;IACA,KAAKC,OAAL,GAAeA,OAAf;IACA,KAAKC,MAAL,GAAc,IAAd;EACH;EACD;AACJ;AACA;AACA;AACA;;;EACIC,IAAI,CAACD,MAAD,EAAS;IACT,MAAME,IAAI,GAAG,KAAKH,OAAL,CAAaI,QAA1B;IACA,KAAKC,YAAL,GAAoBjB,UAAU,CAACkB,YAAX,CAAwBL,MAAxB,EAAgCM,IAAhC,CAAsCC,CAAD,IAAOA,CAAC,CAACL,IAAF,KAAWA,IAAvD,CAApB;IACA,KAAKF,MAAL,GAAcA,MAAd;IACA,KAAKQ,YAAL,CAAkB,KAAKC,YAAL,EAAlB;;IACA,IAAI,KAAKL,YAAT,EAAuB;MACnB,KAAKM,OAAL;IACH;EACJ;EACD;AACJ;AACA;AACA;;;EACIC,MAAM,GAAG;IACL,KAAKH,YAAL,CAAkBpB,UAAlB;IACA,KAAKY,MAAL,GAAc,IAAd;;IACA,IAAI,KAAKI,YAAT,EAAuB;MACnB,KAAKQ,UAAL;IACH;EACJ;EACD;;;EACAC,WAAW,GAAG;IACV,KAAKL,YAAL,CAAkB,KAAKC,YAAL,EAAlB;EACH;;EACDA,YAAY,GAAG;IACX,IAAIK,KAAK,GAAG,KAAKC,QAAL,EAAZ;;IACA,IAAI,KAAKhB,OAAL,CAAaiB,MAAb,KAAwB,KAAK,CAAjC,EAAoC;MAChCF,KAAK,GAAGA,KAAK,CAACE,MAAN,CAAa,KAAKjB,OAAL,CAAaiB,MAA1B,CAAR;IACH;;IACD,OAAOF,KAAP;EACH;;EACDN,YAAY,CAACjB,KAAD,EAAQ;IAChB,KAAKS,MAAL,CAAY,KAAKD,OAAL,CAAaI,QAAzB,IAAqCZ,KAArC;EACH;;AAjDgC"},"metadata":{},"sourceType":"module"}