{"ast":null,"code":"import _classCallCheck from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { __decorate } from \"tslib\";\nimport { attr, DOM, observable, RepeatDirective } from \"@microsoft/fast-element\";\nimport { eventFocus, eventFocusOut, eventKeyDown, keyArrowDown, keyArrowUp, keyEnd, keyHome, keyPageDown, keyPageUp } from \"@microsoft/fast-web-utilities\";\nimport { FoundationElement } from \"../foundation-element/foundation-element.js\";\nimport { DataGridRowTypes, GenerateHeaderOptions } from \"./data-grid.options.js\";\nexport { DataGridRowTypes, GenerateHeaderOptions };\n/**\n * A Data Grid Custom HTML Element.\n *\n * @slot - The default slot for custom row elements\n * @public\n */\n\nexport var DataGrid = /*#__PURE__*/function (_FoundationElement) {\n  _inherits(DataGrid, _FoundationElement);\n\n  var _super = _createSuper(DataGrid);\n\n  function DataGrid() {\n    var _this;\n\n    _classCallCheck(this, DataGrid);\n\n    _this = _super.call(this);\n    /**\n     * When true the component will not add itself to the tab queue.\n     * Default is false.\n     *\n     * @public\n     * @remarks\n     * HTML Attribute: no-tabbing\n     */\n\n    _this.noTabbing = false;\n    /**\n     *  Whether the grid should automatically generate a header row and its type\n     *\n     * @public\n     * @remarks\n     * HTML Attribute: generate-header\n     */\n\n    _this.generateHeader = GenerateHeaderOptions.default;\n    /**\n     * The data being displayed in the grid\n     *\n     * @public\n     */\n\n    _this.rowsData = [];\n    /**\n     * The column definitions of the grid\n     *\n     * @public\n     */\n\n    _this.columnDefinitions = null;\n    /**\n     * The index of the row that will receive focus the next time the\n     * grid is focused. This value changes as focus moves to different\n     * rows within the grid.  Changing this value when focus is already\n     * within the grid moves focus to the specified row.\n     *\n     * @public\n     */\n\n    _this.focusRowIndex = 0;\n    /**\n     * The index of the column that will receive focus the next time the\n     * grid is focused. This value changes as focus moves to different rows\n     * within the grid.  Changing this value when focus is already within\n     * the grid moves focus to the specified column.\n     *\n     * @public\n     */\n\n    _this.focusColumnIndex = 0;\n    _this.rowsPlaceholder = null;\n    _this.generatedHeader = null;\n    _this.isUpdatingFocus = false;\n    _this.pendingFocusUpdate = false;\n    _this.rowindexUpdateQueued = false;\n    _this.columnDefinitionsStale = true;\n    _this.generatedGridTemplateColumns = \"\";\n\n    _this.focusOnCell = function (rowIndex, columnIndex, scrollIntoView) {\n      if (_this.rowElements.length === 0) {\n        _this.focusRowIndex = 0;\n        _this.focusColumnIndex = 0;\n        return;\n      }\n\n      var focusRowIndex = Math.max(0, Math.min(_this.rowElements.length - 1, rowIndex));\n      var focusRow = _this.rowElements[focusRowIndex];\n      var cells = focusRow.querySelectorAll('[role=\"cell\"], [role=\"gridcell\"], [role=\"columnheader\"], [role=\"rowheader\"]');\n      var focusColumnIndex = Math.max(0, Math.min(cells.length - 1, columnIndex));\n      var focusTarget = cells[focusColumnIndex];\n\n      if (scrollIntoView && _this.scrollHeight !== _this.clientHeight && (focusRowIndex < _this.focusRowIndex && _this.scrollTop > 0 || focusRowIndex > _this.focusRowIndex && _this.scrollTop < _this.scrollHeight - _this.clientHeight)) {\n        focusTarget.scrollIntoView({\n          block: \"center\",\n          inline: \"center\"\n        });\n      }\n\n      focusTarget.focus();\n    };\n\n    _this.onChildListChange = function (mutations,\n    /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\n    observer) {\n      if (mutations && mutations.length) {\n        mutations.forEach(function (mutation) {\n          mutation.addedNodes.forEach(function (newNode) {\n            if (newNode.nodeType === 1 && newNode.getAttribute(\"role\") === \"row\") {\n              newNode.columnDefinitions = _this.columnDefinitions;\n            }\n          });\n        });\n\n        _this.queueRowIndexUpdate();\n      }\n    };\n\n    _this.queueRowIndexUpdate = function () {\n      if (!_this.rowindexUpdateQueued) {\n        _this.rowindexUpdateQueued = true;\n        DOM.queueUpdate(_this.updateRowIndexes);\n      }\n    };\n\n    _this.updateRowIndexes = function () {\n      var newGridTemplateColumns = _this.gridTemplateColumns;\n\n      if (newGridTemplateColumns === undefined) {\n        // try to generate columns based on manual rows\n        if (_this.generatedGridTemplateColumns === \"\" && _this.rowElements.length > 0) {\n          var firstRow = _this.rowElements[0];\n          _this.generatedGridTemplateColumns = new Array(firstRow.cellElements.length).fill(\"1fr\").join(\" \");\n        }\n\n        newGridTemplateColumns = _this.generatedGridTemplateColumns;\n      }\n\n      _this.rowElements.forEach(function (element, index) {\n        var thisRow = element;\n        thisRow.rowIndex = index;\n        thisRow.gridTemplateColumns = newGridTemplateColumns;\n\n        if (_this.columnDefinitionsStale) {\n          thisRow.columnDefinitions = _this.columnDefinitions;\n        }\n      });\n\n      _this.rowindexUpdateQueued = false;\n      _this.columnDefinitionsStale = false;\n    };\n\n    return _this;\n  }\n  /**\n   *  generates a gridTemplateColumns based on columndata array\n   */\n\n\n  _createClass(DataGrid, [{\n    key: \"noTabbingChanged\",\n    value: function noTabbingChanged() {\n      if (this.$fastController.isConnected) {\n        if (this.noTabbing) {\n          this.setAttribute(\"tabIndex\", \"-1\");\n        } else {\n          this.setAttribute(\"tabIndex\", this.contains(document.activeElement) || this === document.activeElement ? \"-1\" : \"0\");\n        }\n      }\n    }\n  }, {\n    key: \"generateHeaderChanged\",\n    value: function generateHeaderChanged() {\n      if (this.$fastController.isConnected) {\n        this.toggleGeneratedHeader();\n      }\n    }\n  }, {\n    key: \"gridTemplateColumnsChanged\",\n    value: function gridTemplateColumnsChanged() {\n      if (this.$fastController.isConnected) {\n        this.updateRowIndexes();\n      }\n    }\n  }, {\n    key: \"rowsDataChanged\",\n    value: function rowsDataChanged() {\n      if (this.columnDefinitions === null && this.rowsData.length > 0) {\n        this.columnDefinitions = DataGrid.generateColumns(this.rowsData[0]);\n      }\n\n      if (this.$fastController.isConnected) {\n        this.toggleGeneratedHeader();\n      }\n    }\n  }, {\n    key: \"columnDefinitionsChanged\",\n    value: function columnDefinitionsChanged() {\n      if (this.columnDefinitions === null) {\n        this.generatedGridTemplateColumns = \"\";\n        return;\n      }\n\n      this.generatedGridTemplateColumns = DataGrid.generateTemplateColumns(this.columnDefinitions);\n\n      if (this.$fastController.isConnected) {\n        this.columnDefinitionsStale = true;\n        this.queueRowIndexUpdate();\n      }\n    }\n  }, {\n    key: \"headerCellItemTemplateChanged\",\n    value: function headerCellItemTemplateChanged() {\n      if (this.$fastController.isConnected) {\n        if (this.generatedHeader !== null) {\n          this.generatedHeader.headerCellItemTemplate = this.headerCellItemTemplate;\n        }\n      }\n    }\n  }, {\n    key: \"focusRowIndexChanged\",\n    value: function focusRowIndexChanged() {\n      if (this.$fastController.isConnected) {\n        this.queueFocusUpdate();\n      }\n    }\n  }, {\n    key: \"focusColumnIndexChanged\",\n    value: function focusColumnIndexChanged() {\n      if (this.$fastController.isConnected) {\n        this.queueFocusUpdate();\n      }\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      _get(_getPrototypeOf(DataGrid.prototype), \"connectedCallback\", this).call(this);\n\n      if (this.rowItemTemplate === undefined) {\n        this.rowItemTemplate = this.defaultRowItemTemplate;\n      }\n\n      this.rowsPlaceholder = document.createComment(\"\");\n      this.appendChild(this.rowsPlaceholder);\n      this.toggleGeneratedHeader();\n      this.rowsRepeatBehavior = new RepeatDirective(function (x) {\n        return x.rowsData;\n      }, function (x) {\n        return x.rowItemTemplate;\n      }, {\n        positioning: true\n      }).createBehavior(this.rowsPlaceholder);\n      /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */\n\n      this.$fastController.addBehaviors([this.rowsRepeatBehavior]);\n      this.addEventListener(\"row-focused\", this.handleRowFocus);\n      this.addEventListener(eventFocus, this.handleFocus);\n      this.addEventListener(eventKeyDown, this.handleKeydown);\n      this.addEventListener(eventFocusOut, this.handleFocusOut);\n      this.observer = new MutationObserver(this.onChildListChange); // only observe if nodes are added or removed\n\n      this.observer.observe(this, {\n        childList: true\n      });\n\n      if (this.noTabbing) {\n        this.setAttribute(\"tabindex\", \"-1\");\n      }\n\n      DOM.queueUpdate(this.queueRowIndexUpdate);\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      _get(_getPrototypeOf(DataGrid.prototype), \"disconnectedCallback\", this).call(this);\n\n      this.removeEventListener(\"row-focused\", this.handleRowFocus);\n      this.removeEventListener(eventFocus, this.handleFocus);\n      this.removeEventListener(eventKeyDown, this.handleKeydown);\n      this.removeEventListener(eventFocusOut, this.handleFocusOut); // disconnect observer\n\n      this.observer.disconnect();\n      this.rowsPlaceholder = null;\n      this.generatedHeader = null;\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"handleRowFocus\",\n    value: function handleRowFocus(e) {\n      this.isUpdatingFocus = true;\n      var focusRow = e.target;\n      this.focusRowIndex = this.rowElements.indexOf(focusRow);\n      this.focusColumnIndex = focusRow.focusColumnIndex;\n      this.setAttribute(\"tabIndex\", \"-1\");\n      this.isUpdatingFocus = false;\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"handleFocus\",\n    value: function handleFocus(e) {\n      this.focusOnCell(this.focusRowIndex, this.focusColumnIndex, true);\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"handleFocusOut\",\n    value: function handleFocusOut(e) {\n      if (e.relatedTarget === null || !this.contains(e.relatedTarget)) {\n        this.setAttribute(\"tabIndex\", this.noTabbing ? \"-1\" : \"0\");\n      }\n    }\n    /**\n     * @internal\n     */\n\n  }, {\n    key: \"handleKeydown\",\n    value: function handleKeydown(e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var newFocusRowIndex;\n      var maxIndex = this.rowElements.length - 1;\n      var currentGridBottom = this.offsetHeight + this.scrollTop;\n      var lastRow = this.rowElements[maxIndex];\n\n      switch (e.key) {\n        case keyArrowUp:\n          e.preventDefault(); // focus up one row\n\n          this.focusOnCell(this.focusRowIndex - 1, this.focusColumnIndex, true);\n          break;\n\n        case keyArrowDown:\n          e.preventDefault(); // focus down one row\n\n          this.focusOnCell(this.focusRowIndex + 1, this.focusColumnIndex, true);\n          break;\n\n        case keyPageUp:\n          e.preventDefault();\n\n          if (this.rowElements.length === 0) {\n            this.focusOnCell(0, 0, false);\n            break;\n          }\n\n          if (this.focusRowIndex === 0) {\n            this.focusOnCell(0, this.focusColumnIndex, false);\n            return;\n          }\n\n          newFocusRowIndex = this.focusRowIndex - 1;\n\n          for (newFocusRowIndex; newFocusRowIndex >= 0; newFocusRowIndex--) {\n            var thisRow = this.rowElements[newFocusRowIndex];\n\n            if (thisRow.offsetTop < this.scrollTop) {\n              this.scrollTop = thisRow.offsetTop + thisRow.clientHeight - this.clientHeight;\n              break;\n            }\n          }\n\n          this.focusOnCell(newFocusRowIndex, this.focusColumnIndex, false);\n          break;\n\n        case keyPageDown:\n          e.preventDefault();\n\n          if (this.rowElements.length === 0) {\n            this.focusOnCell(0, 0, false);\n            break;\n          } // focus down one \"page\"\n\n\n          if (this.focusRowIndex >= maxIndex || lastRow.offsetTop + lastRow.offsetHeight <= currentGridBottom) {\n            this.focusOnCell(maxIndex, this.focusColumnIndex, false);\n            return;\n          }\n\n          newFocusRowIndex = this.focusRowIndex + 1;\n\n          for (newFocusRowIndex; newFocusRowIndex <= maxIndex; newFocusRowIndex++) {\n            var _thisRow = this.rowElements[newFocusRowIndex];\n\n            if (_thisRow.offsetTop + _thisRow.offsetHeight > currentGridBottom) {\n              var stickyHeaderOffset = 0;\n\n              if (this.generateHeader === GenerateHeaderOptions.sticky && this.generatedHeader !== null) {\n                stickyHeaderOffset = this.generatedHeader.clientHeight;\n              }\n\n              this.scrollTop = _thisRow.offsetTop - stickyHeaderOffset;\n              break;\n            }\n          }\n\n          this.focusOnCell(newFocusRowIndex, this.focusColumnIndex, false);\n          break;\n\n        case keyHome:\n          if (e.ctrlKey) {\n            e.preventDefault(); // focus first cell of first row\n\n            this.focusOnCell(0, 0, true);\n          }\n\n          break;\n\n        case keyEnd:\n          if (e.ctrlKey && this.columnDefinitions !== null) {\n            e.preventDefault(); // focus last cell of last row\n\n            this.focusOnCell(this.rowElements.length - 1, this.columnDefinitions.length - 1, true);\n          }\n\n          break;\n      }\n    }\n  }, {\n    key: \"queueFocusUpdate\",\n    value: function queueFocusUpdate() {\n      var _this2 = this;\n\n      if (this.isUpdatingFocus && (this.contains(document.activeElement) || this === document.activeElement)) {\n        return;\n      }\n\n      if (this.pendingFocusUpdate === false) {\n        this.pendingFocusUpdate = true;\n        DOM.queueUpdate(function () {\n          return _this2.updateFocus();\n        });\n      }\n    }\n  }, {\n    key: \"updateFocus\",\n    value: function updateFocus() {\n      this.pendingFocusUpdate = false;\n      this.focusOnCell(this.focusRowIndex, this.focusColumnIndex, true);\n    }\n  }, {\n    key: \"toggleGeneratedHeader\",\n    value: function toggleGeneratedHeader() {\n      if (this.generatedHeader !== null) {\n        this.removeChild(this.generatedHeader);\n        this.generatedHeader = null;\n      }\n\n      if (this.generateHeader !== GenerateHeaderOptions.none && this.rowsData.length > 0) {\n        var generatedHeaderElement = document.createElement(this.rowElementTag);\n        this.generatedHeader = generatedHeaderElement;\n        this.generatedHeader.columnDefinitions = this.columnDefinitions;\n        this.generatedHeader.gridTemplateColumns = this.gridTemplateColumns;\n        this.generatedHeader.rowType = this.generateHeader === GenerateHeaderOptions.sticky ? DataGridRowTypes.stickyHeader : DataGridRowTypes.header;\n\n        if (this.firstChild !== null || this.rowsPlaceholder !== null) {\n          this.insertBefore(generatedHeaderElement, this.firstChild !== null ? this.firstChild : this.rowsPlaceholder);\n        }\n\n        return;\n      }\n    }\n  }], [{\n    key: \"generateTemplateColumns\",\n    value: function generateTemplateColumns(columnDefinitions) {\n      var templateColumns = \"\";\n      columnDefinitions.forEach(function (column) {\n        templateColumns = \"\".concat(templateColumns).concat(templateColumns === \"\" ? \"\" : \" \", \"1fr\");\n      });\n      return templateColumns;\n    }\n  }]);\n\n  return DataGrid;\n}(FoundationElement);\n/**\n *  generates a basic column definition by examining sample row data\n */\n\nDataGrid.generateColumns = function (row) {\n  return Object.getOwnPropertyNames(row).map(function (property, index) {\n    return {\n      columnDataKey: property,\n      gridColumn: \"\".concat(index)\n    };\n  });\n};\n\n__decorate([attr({\n  attribute: \"no-tabbing\",\n  mode: \"boolean\"\n})], DataGrid.prototype, \"noTabbing\", void 0);\n\n__decorate([attr({\n  attribute: \"generate-header\"\n})], DataGrid.prototype, \"generateHeader\", void 0);\n\n__decorate([attr({\n  attribute: \"grid-template-columns\"\n})], DataGrid.prototype, \"gridTemplateColumns\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"rowsData\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"columnDefinitions\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"rowItemTemplate\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"cellItemTemplate\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"headerCellItemTemplate\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"focusRowIndex\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"focusColumnIndex\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"defaultRowItemTemplate\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"rowElementTag\", void 0);\n\n__decorate([observable], DataGrid.prototype, \"rowElements\", void 0);","map":{"version":3,"names":["__decorate","attr","DOM","observable","RepeatDirective","eventFocus","eventFocusOut","eventKeyDown","keyArrowDown","keyArrowUp","keyEnd","keyHome","keyPageDown","keyPageUp","FoundationElement","DataGridRowTypes","GenerateHeaderOptions","DataGrid","noTabbing","generateHeader","default","rowsData","columnDefinitions","focusRowIndex","focusColumnIndex","rowsPlaceholder","generatedHeader","isUpdatingFocus","pendingFocusUpdate","rowindexUpdateQueued","columnDefinitionsStale","generatedGridTemplateColumns","focusOnCell","rowIndex","columnIndex","scrollIntoView","rowElements","length","Math","max","min","focusRow","cells","querySelectorAll","focusTarget","scrollHeight","clientHeight","scrollTop","block","inline","focus","onChildListChange","mutations","observer","forEach","mutation","addedNodes","newNode","nodeType","getAttribute","queueRowIndexUpdate","queueUpdate","updateRowIndexes","newGridTemplateColumns","gridTemplateColumns","undefined","firstRow","Array","cellElements","fill","join","element","index","thisRow","$fastController","isConnected","setAttribute","contains","document","activeElement","toggleGeneratedHeader","generateColumns","generateTemplateColumns","headerCellItemTemplate","queueFocusUpdate","rowItemTemplate","defaultRowItemTemplate","createComment","appendChild","rowsRepeatBehavior","x","positioning","createBehavior","addBehaviors","addEventListener","handleRowFocus","handleFocus","handleKeydown","handleFocusOut","MutationObserver","observe","childList","removeEventListener","disconnect","e","target","indexOf","relatedTarget","defaultPrevented","newFocusRowIndex","maxIndex","currentGridBottom","offsetHeight","lastRow","key","preventDefault","offsetTop","stickyHeaderOffset","sticky","ctrlKey","updateFocus","removeChild","none","generatedHeaderElement","createElement","rowElementTag","rowType","stickyHeader","header","firstChild","insertBefore","templateColumns","column","row","Object","getOwnPropertyNames","map","property","columnDataKey","gridColumn","attribute","mode","prototype"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.js"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { attr, DOM, observable, RepeatDirective, } from \"@microsoft/fast-element\";\nimport { eventFocus, eventFocusOut, eventKeyDown, keyArrowDown, keyArrowUp, keyEnd, keyHome, keyPageDown, keyPageUp, } from \"@microsoft/fast-web-utilities\";\nimport { FoundationElement } from \"../foundation-element/foundation-element.js\";\nimport { DataGridRowTypes, GenerateHeaderOptions } from \"./data-grid.options.js\";\nexport { DataGridRowTypes, GenerateHeaderOptions };\n/**\n * A Data Grid Custom HTML Element.\n *\n * @slot - The default slot for custom row elements\n * @public\n */\nexport class DataGrid extends FoundationElement {\n    constructor() {\n        super();\n        /**\n         * When true the component will not add itself to the tab queue.\n         * Default is false.\n         *\n         * @public\n         * @remarks\n         * HTML Attribute: no-tabbing\n         */\n        this.noTabbing = false;\n        /**\n         *  Whether the grid should automatically generate a header row and its type\n         *\n         * @public\n         * @remarks\n         * HTML Attribute: generate-header\n         */\n        this.generateHeader = GenerateHeaderOptions.default;\n        /**\n         * The data being displayed in the grid\n         *\n         * @public\n         */\n        this.rowsData = [];\n        /**\n         * The column definitions of the grid\n         *\n         * @public\n         */\n        this.columnDefinitions = null;\n        /**\n         * The index of the row that will receive focus the next time the\n         * grid is focused. This value changes as focus moves to different\n         * rows within the grid.  Changing this value when focus is already\n         * within the grid moves focus to the specified row.\n         *\n         * @public\n         */\n        this.focusRowIndex = 0;\n        /**\n         * The index of the column that will receive focus the next time the\n         * grid is focused. This value changes as focus moves to different rows\n         * within the grid.  Changing this value when focus is already within\n         * the grid moves focus to the specified column.\n         *\n         * @public\n         */\n        this.focusColumnIndex = 0;\n        this.rowsPlaceholder = null;\n        this.generatedHeader = null;\n        this.isUpdatingFocus = false;\n        this.pendingFocusUpdate = false;\n        this.rowindexUpdateQueued = false;\n        this.columnDefinitionsStale = true;\n        this.generatedGridTemplateColumns = \"\";\n        this.focusOnCell = (rowIndex, columnIndex, scrollIntoView) => {\n            if (this.rowElements.length === 0) {\n                this.focusRowIndex = 0;\n                this.focusColumnIndex = 0;\n                return;\n            }\n            const focusRowIndex = Math.max(0, Math.min(this.rowElements.length - 1, rowIndex));\n            const focusRow = this.rowElements[focusRowIndex];\n            const cells = focusRow.querySelectorAll('[role=\"cell\"], [role=\"gridcell\"], [role=\"columnheader\"], [role=\"rowheader\"]');\n            const focusColumnIndex = Math.max(0, Math.min(cells.length - 1, columnIndex));\n            const focusTarget = cells[focusColumnIndex];\n            if (scrollIntoView &&\n                this.scrollHeight !== this.clientHeight &&\n                ((focusRowIndex < this.focusRowIndex && this.scrollTop > 0) ||\n                    (focusRowIndex > this.focusRowIndex &&\n                        this.scrollTop < this.scrollHeight - this.clientHeight))) {\n                focusTarget.scrollIntoView({ block: \"center\", inline: \"center\" });\n            }\n            focusTarget.focus();\n        };\n        this.onChildListChange = (mutations, \n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\n        observer) => {\n            if (mutations && mutations.length) {\n                mutations.forEach((mutation) => {\n                    mutation.addedNodes.forEach((newNode) => {\n                        if (newNode.nodeType === 1 &&\n                            newNode.getAttribute(\"role\") === \"row\") {\n                            newNode.columnDefinitions = this.columnDefinitions;\n                        }\n                    });\n                });\n                this.queueRowIndexUpdate();\n            }\n        };\n        this.queueRowIndexUpdate = () => {\n            if (!this.rowindexUpdateQueued) {\n                this.rowindexUpdateQueued = true;\n                DOM.queueUpdate(this.updateRowIndexes);\n            }\n        };\n        this.updateRowIndexes = () => {\n            let newGridTemplateColumns = this.gridTemplateColumns;\n            if (newGridTemplateColumns === undefined) {\n                // try to generate columns based on manual rows\n                if (this.generatedGridTemplateColumns === \"\" && this.rowElements.length > 0) {\n                    const firstRow = this.rowElements[0];\n                    this.generatedGridTemplateColumns = new Array(firstRow.cellElements.length)\n                        .fill(\"1fr\")\n                        .join(\" \");\n                }\n                newGridTemplateColumns = this.generatedGridTemplateColumns;\n            }\n            this.rowElements.forEach((element, index) => {\n                const thisRow = element;\n                thisRow.rowIndex = index;\n                thisRow.gridTemplateColumns = newGridTemplateColumns;\n                if (this.columnDefinitionsStale) {\n                    thisRow.columnDefinitions = this.columnDefinitions;\n                }\n            });\n            this.rowindexUpdateQueued = false;\n            this.columnDefinitionsStale = false;\n        };\n    }\n    /**\n     *  generates a gridTemplateColumns based on columndata array\n     */\n    static generateTemplateColumns(columnDefinitions) {\n        let templateColumns = \"\";\n        columnDefinitions.forEach((column) => {\n            templateColumns = `${templateColumns}${templateColumns === \"\" ? \"\" : \" \"}${\"1fr\"}`;\n        });\n        return templateColumns;\n    }\n    noTabbingChanged() {\n        if (this.$fastController.isConnected) {\n            if (this.noTabbing) {\n                this.setAttribute(\"tabIndex\", \"-1\");\n            }\n            else {\n                this.setAttribute(\"tabIndex\", this.contains(document.activeElement) ||\n                    this === document.activeElement\n                    ? \"-1\"\n                    : \"0\");\n            }\n        }\n    }\n    generateHeaderChanged() {\n        if (this.$fastController.isConnected) {\n            this.toggleGeneratedHeader();\n        }\n    }\n    gridTemplateColumnsChanged() {\n        if (this.$fastController.isConnected) {\n            this.updateRowIndexes();\n        }\n    }\n    rowsDataChanged() {\n        if (this.columnDefinitions === null && this.rowsData.length > 0) {\n            this.columnDefinitions = DataGrid.generateColumns(this.rowsData[0]);\n        }\n        if (this.$fastController.isConnected) {\n            this.toggleGeneratedHeader();\n        }\n    }\n    columnDefinitionsChanged() {\n        if (this.columnDefinitions === null) {\n            this.generatedGridTemplateColumns = \"\";\n            return;\n        }\n        this.generatedGridTemplateColumns = DataGrid.generateTemplateColumns(this.columnDefinitions);\n        if (this.$fastController.isConnected) {\n            this.columnDefinitionsStale = true;\n            this.queueRowIndexUpdate();\n        }\n    }\n    headerCellItemTemplateChanged() {\n        if (this.$fastController.isConnected) {\n            if (this.generatedHeader !== null) {\n                this.generatedHeader.headerCellItemTemplate = this.headerCellItemTemplate;\n            }\n        }\n    }\n    focusRowIndexChanged() {\n        if (this.$fastController.isConnected) {\n            this.queueFocusUpdate();\n        }\n    }\n    focusColumnIndexChanged() {\n        if (this.$fastController.isConnected) {\n            this.queueFocusUpdate();\n        }\n    }\n    /**\n     * @internal\n     */\n    connectedCallback() {\n        super.connectedCallback();\n        if (this.rowItemTemplate === undefined) {\n            this.rowItemTemplate = this.defaultRowItemTemplate;\n        }\n        this.rowsPlaceholder = document.createComment(\"\");\n        this.appendChild(this.rowsPlaceholder);\n        this.toggleGeneratedHeader();\n        this.rowsRepeatBehavior = new RepeatDirective(x => x.rowsData, x => x.rowItemTemplate, { positioning: true }).createBehavior(this.rowsPlaceholder);\n        /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */\n        this.$fastController.addBehaviors([this.rowsRepeatBehavior]);\n        this.addEventListener(\"row-focused\", this.handleRowFocus);\n        this.addEventListener(eventFocus, this.handleFocus);\n        this.addEventListener(eventKeyDown, this.handleKeydown);\n        this.addEventListener(eventFocusOut, this.handleFocusOut);\n        this.observer = new MutationObserver(this.onChildListChange);\n        // only observe if nodes are added or removed\n        this.observer.observe(this, { childList: true });\n        if (this.noTabbing) {\n            this.setAttribute(\"tabindex\", \"-1\");\n        }\n        DOM.queueUpdate(this.queueRowIndexUpdate);\n    }\n    /**\n     * @internal\n     */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.removeEventListener(\"row-focused\", this.handleRowFocus);\n        this.removeEventListener(eventFocus, this.handleFocus);\n        this.removeEventListener(eventKeyDown, this.handleKeydown);\n        this.removeEventListener(eventFocusOut, this.handleFocusOut);\n        // disconnect observer\n        this.observer.disconnect();\n        this.rowsPlaceholder = null;\n        this.generatedHeader = null;\n    }\n    /**\n     * @internal\n     */\n    handleRowFocus(e) {\n        this.isUpdatingFocus = true;\n        const focusRow = e.target;\n        this.focusRowIndex = this.rowElements.indexOf(focusRow);\n        this.focusColumnIndex = focusRow.focusColumnIndex;\n        this.setAttribute(\"tabIndex\", \"-1\");\n        this.isUpdatingFocus = false;\n    }\n    /**\n     * @internal\n     */\n    handleFocus(e) {\n        this.focusOnCell(this.focusRowIndex, this.focusColumnIndex, true);\n    }\n    /**\n     * @internal\n     */\n    handleFocusOut(e) {\n        if (e.relatedTarget === null || !this.contains(e.relatedTarget)) {\n            this.setAttribute(\"tabIndex\", this.noTabbing ? \"-1\" : \"0\");\n        }\n    }\n    /**\n     * @internal\n     */\n    handleKeydown(e) {\n        if (e.defaultPrevented) {\n            return;\n        }\n        let newFocusRowIndex;\n        const maxIndex = this.rowElements.length - 1;\n        const currentGridBottom = this.offsetHeight + this.scrollTop;\n        const lastRow = this.rowElements[maxIndex];\n        switch (e.key) {\n            case keyArrowUp:\n                e.preventDefault();\n                // focus up one row\n                this.focusOnCell(this.focusRowIndex - 1, this.focusColumnIndex, true);\n                break;\n            case keyArrowDown:\n                e.preventDefault();\n                // focus down one row\n                this.focusOnCell(this.focusRowIndex + 1, this.focusColumnIndex, true);\n                break;\n            case keyPageUp:\n                e.preventDefault();\n                if (this.rowElements.length === 0) {\n                    this.focusOnCell(0, 0, false);\n                    break;\n                }\n                if (this.focusRowIndex === 0) {\n                    this.focusOnCell(0, this.focusColumnIndex, false);\n                    return;\n                }\n                newFocusRowIndex = this.focusRowIndex - 1;\n                for (newFocusRowIndex; newFocusRowIndex >= 0; newFocusRowIndex--) {\n                    const thisRow = this.rowElements[newFocusRowIndex];\n                    if (thisRow.offsetTop < this.scrollTop) {\n                        this.scrollTop =\n                            thisRow.offsetTop + thisRow.clientHeight - this.clientHeight;\n                        break;\n                    }\n                }\n                this.focusOnCell(newFocusRowIndex, this.focusColumnIndex, false);\n                break;\n            case keyPageDown:\n                e.preventDefault();\n                if (this.rowElements.length === 0) {\n                    this.focusOnCell(0, 0, false);\n                    break;\n                }\n                // focus down one \"page\"\n                if (this.focusRowIndex >= maxIndex ||\n                    lastRow.offsetTop + lastRow.offsetHeight <= currentGridBottom) {\n                    this.focusOnCell(maxIndex, this.focusColumnIndex, false);\n                    return;\n                }\n                newFocusRowIndex = this.focusRowIndex + 1;\n                for (newFocusRowIndex; newFocusRowIndex <= maxIndex; newFocusRowIndex++) {\n                    const thisRow = this.rowElements[newFocusRowIndex];\n                    if (thisRow.offsetTop + thisRow.offsetHeight > currentGridBottom) {\n                        let stickyHeaderOffset = 0;\n                        if (this.generateHeader === GenerateHeaderOptions.sticky &&\n                            this.generatedHeader !== null) {\n                            stickyHeaderOffset = this.generatedHeader.clientHeight;\n                        }\n                        this.scrollTop = thisRow.offsetTop - stickyHeaderOffset;\n                        break;\n                    }\n                }\n                this.focusOnCell(newFocusRowIndex, this.focusColumnIndex, false);\n                break;\n            case keyHome:\n                if (e.ctrlKey) {\n                    e.preventDefault();\n                    // focus first cell of first row\n                    this.focusOnCell(0, 0, true);\n                }\n                break;\n            case keyEnd:\n                if (e.ctrlKey && this.columnDefinitions !== null) {\n                    e.preventDefault();\n                    // focus last cell of last row\n                    this.focusOnCell(this.rowElements.length - 1, this.columnDefinitions.length - 1, true);\n                }\n                break;\n        }\n    }\n    queueFocusUpdate() {\n        if (this.isUpdatingFocus &&\n            (this.contains(document.activeElement) || this === document.activeElement)) {\n            return;\n        }\n        if (this.pendingFocusUpdate === false) {\n            this.pendingFocusUpdate = true;\n            DOM.queueUpdate(() => this.updateFocus());\n        }\n    }\n    updateFocus() {\n        this.pendingFocusUpdate = false;\n        this.focusOnCell(this.focusRowIndex, this.focusColumnIndex, true);\n    }\n    toggleGeneratedHeader() {\n        if (this.generatedHeader !== null) {\n            this.removeChild(this.generatedHeader);\n            this.generatedHeader = null;\n        }\n        if (this.generateHeader !== GenerateHeaderOptions.none &&\n            this.rowsData.length > 0) {\n            const generatedHeaderElement = document.createElement(this.rowElementTag);\n            this.generatedHeader = generatedHeaderElement;\n            this.generatedHeader.columnDefinitions = this.columnDefinitions;\n            this.generatedHeader.gridTemplateColumns = this.gridTemplateColumns;\n            this.generatedHeader.rowType =\n                this.generateHeader === GenerateHeaderOptions.sticky\n                    ? DataGridRowTypes.stickyHeader\n                    : DataGridRowTypes.header;\n            if (this.firstChild !== null || this.rowsPlaceholder !== null) {\n                this.insertBefore(generatedHeaderElement, this.firstChild !== null ? this.firstChild : this.rowsPlaceholder);\n            }\n            return;\n        }\n    }\n}\n/**\n *  generates a basic column definition by examining sample row data\n */\nDataGrid.generateColumns = (row) => {\n    return Object.getOwnPropertyNames(row).map((property, index) => {\n        return {\n            columnDataKey: property,\n            gridColumn: `${index}`,\n        };\n    });\n};\n__decorate([\n    attr({ attribute: \"no-tabbing\", mode: \"boolean\" })\n], DataGrid.prototype, \"noTabbing\", void 0);\n__decorate([\n    attr({ attribute: \"generate-header\" })\n], DataGrid.prototype, \"generateHeader\", void 0);\n__decorate([\n    attr({ attribute: \"grid-template-columns\" })\n], DataGrid.prototype, \"gridTemplateColumns\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"rowsData\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"columnDefinitions\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"rowItemTemplate\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"cellItemTemplate\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"headerCellItemTemplate\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"focusRowIndex\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"focusColumnIndex\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"defaultRowItemTemplate\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"rowElementTag\", void 0);\n__decorate([\n    observable\n], DataGrid.prototype, \"rowElements\", void 0);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}