{"ast":null,"code":"import _classCallCheck from\"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";/**\n * A utility wrapper around the acquireVsCodeApi() function, which enables\n * message passing and state management between the webview and extension\n * contexts.\n *\n * This utility also enables webview code to be run in a web browser-based\n * dev server by using native web browser features that mock the functionality\n * enabled by acquireVsCodeApi.\n */var VSCodeAPIWrapper=/*#__PURE__*/function(){function VSCodeAPIWrapper(){_classCallCheck(this,VSCodeAPIWrapper);this.vsCodeApi=void 0;// Check if the acquireVsCodeApi function exists in the current development\n// context (i.e. VS Code development window or web browser)\nif(typeof acquireVsCodeApi===\"function\"){this.vsCodeApi=acquireVsCodeApi();}}/**\n   * Post a message (i.e. send arbitrary data) to the owner of the webview.\n   *\n   * @remarks When running webview code inside a web browser, postMessage will instead\n   * log the given message to the console.\n   *\n   * @param message Abitrary data (must be JSON serializable) to send to the extension context.\n   */_createClass(VSCodeAPIWrapper,[{key:\"postMessage\",value:function postMessage(message){if(this.vsCodeApi){this.vsCodeApi.postMessage(message);}else{console.log(message);}}/**\n   * Get the persistent state stored for this webview.\n   *\n   * @remarks When running webview source code inside a web browser, getState will retrieve state\n   * from local storage (https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage).\n   *\n   * @return The current state or `undefined` if no state has been set.\n   */},{key:\"getState\",value:function getState(){if(this.vsCodeApi){return this.vsCodeApi.getState();}else{var state=localStorage.getItem(\"vscodeState\");return state?JSON.parse(state):undefined;}}/**\n   * Set the persistent state stored for this webview.\n   *\n   * @remarks When running webview source code inside a web browser, setState will set the given\n   * state using local storage (https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage).\n   *\n   * @param newState New persisted state. This must be a JSON serializable object. Can be retrieved\n   * using {@link getState}.\n   *\n   * @return The new state.\n   */},{key:\"setState\",value:function setState(newState){if(this.vsCodeApi){return this.vsCodeApi.setState(newState);}else{localStorage.setItem(\"vscodeState\",JSON.stringify(newState));return newState;}}}]);return VSCodeAPIWrapper;}();// Exports class singleton to prevent multiple invocations of acquireVsCodeApi.\nexport var vscode=new VSCodeAPIWrapper();","map":{"version":3,"names":["VSCodeAPIWrapper","vsCodeApi","acquireVsCodeApi","message","postMessage","console","log","getState","state","localStorage","getItem","JSON","parse","undefined","newState","setState","setItem","stringify","vscode"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/src/utilities/vscode.ts"],"sourcesContent":["import type { WebviewApi } from \"vscode-webview\";\n\n/**\n * A utility wrapper around the acquireVsCodeApi() function, which enables\n * message passing and state management between the webview and extension\n * contexts.\n *\n * This utility also enables webview code to be run in a web browser-based\n * dev server by using native web browser features that mock the functionality\n * enabled by acquireVsCodeApi.\n */\nclass VSCodeAPIWrapper {\n  private readonly vsCodeApi: WebviewApi<unknown> | undefined;\n\n  constructor() {\n    // Check if the acquireVsCodeApi function exists in the current development\n    // context (i.e. VS Code development window or web browser)\n    if (typeof acquireVsCodeApi === \"function\") {\n      this.vsCodeApi = acquireVsCodeApi();\n    }\n  }\n\n  /**\n   * Post a message (i.e. send arbitrary data) to the owner of the webview.\n   *\n   * @remarks When running webview code inside a web browser, postMessage will instead\n   * log the given message to the console.\n   *\n   * @param message Abitrary data (must be JSON serializable) to send to the extension context.\n   */\n  public postMessage(message: unknown) {\n    if (this.vsCodeApi) {\n      this.vsCodeApi.postMessage(message);\n    } else {\n      console.log(message);\n    }\n  }\n\n  /**\n   * Get the persistent state stored for this webview.\n   *\n   * @remarks When running webview source code inside a web browser, getState will retrieve state\n   * from local storage (https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage).\n   *\n   * @return The current state or `undefined` if no state has been set.\n   */\n  public getState(): unknown | undefined {\n    if (this.vsCodeApi) {\n      return this.vsCodeApi.getState();\n    } else {\n      const state = localStorage.getItem(\"vscodeState\");\n      return state ? JSON.parse(state) : undefined;\n    }\n  }\n\n  /**\n   * Set the persistent state stored for this webview.\n   *\n   * @remarks When running webview source code inside a web browser, setState will set the given\n   * state using local storage (https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage).\n   *\n   * @param newState New persisted state. This must be a JSON serializable object. Can be retrieved\n   * using {@link getState}.\n   *\n   * @return The new state.\n   */\n  public setState<T extends unknown | undefined>(newState: T): T {\n    if (this.vsCodeApi) {\n      return this.vsCodeApi.setState(newState);\n    } else {\n      localStorage.setItem(\"vscodeState\", JSON.stringify(newState));\n      return newState;\n    }\n  }\n}\n\n// Exports class singleton to prevent multiple invocations of acquireVsCodeApi.\nexport const vscode = new VSCodeAPIWrapper();\n"],"mappings":"sQAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G,GACMA,iB,yBAGJ,2BAAc,6CAFGC,SAEH,QACZ;AACA;AACA,GAAI,MAAOC,iBAAP,GAA4B,UAAhC,CAA4C,CAC1C,KAAKD,SAAL,CAAiBC,gBAAgB,EAAjC,CACD,CACF,CAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA,K,wDACE,qBAAmBC,OAAnB,CAAqC,CACnC,GAAI,KAAKF,SAAT,CAAoB,CAClB,KAAKA,SAAL,CAAeG,WAAf,CAA2BD,OAA3B,EACD,CAFD,IAEO,CACLE,OAAO,CAACC,GAAR,CAAYH,OAAZ,EACD,CACF,CAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA,K,wBACE,mBAAuC,CACrC,GAAI,KAAKF,SAAT,CAAoB,CAClB,MAAO,MAAKA,SAAL,CAAeM,QAAf,EAAP,CACD,CAFD,IAEO,CACL,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAd,CACA,MAAOF,MAAK,CAAGG,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAH,CAAuBK,SAAnC,CACD,CACF,CAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,K,wBACE,kBAA+CC,QAA/C,CAA+D,CAC7D,GAAI,KAAKb,SAAT,CAAoB,CAClB,MAAO,MAAKA,SAAL,CAAec,QAAf,CAAwBD,QAAxB,CAAP,CACD,CAFD,IAEO,CACLL,YAAY,CAACO,OAAb,CAAqB,aAArB,CAAoCL,IAAI,CAACM,SAAL,CAAeH,QAAf,CAApC,EACA,MAAOA,SAAP,CACD,CACF,C,gCAGH;AACA,MAAO,IAAMI,OAAM,CAAG,GAAIlB,iBAAJ,EAAf"},"metadata":{},"sourceType":"module"}