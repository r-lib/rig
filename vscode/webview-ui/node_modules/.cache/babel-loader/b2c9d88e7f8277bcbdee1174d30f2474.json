{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { DOM, ElementStyles, FASTElement, observable, Observable } from \"@microsoft/fast-element\";\nexport const defaultElement = document.createElement(\"div\");\n\nfunction isFastElement(element) {\n  return element instanceof FASTElement;\n}\n\nclass QueuedStyleSheetTarget {\n  setProperty(name, value) {\n    DOM.queueUpdate(() => this.target.setProperty(name, value));\n  }\n\n  removeProperty(name) {\n    DOM.queueUpdate(() => this.target.removeProperty(name));\n  }\n\n}\n/**\n * Handles setting properties for a FASTElement using Constructable Stylesheets\n */\n\n\nclass ConstructableStyleSheetTarget extends QueuedStyleSheetTarget {\n  constructor(source) {\n    super();\n    const sheet = new CSSStyleSheet();\n    this.target = sheet.cssRules[sheet.insertRule(\":host{}\")].style;\n    source.$fastController.addStyles(ElementStyles.create([sheet]));\n  }\n\n}\n\nclass DocumentStyleSheetTarget extends QueuedStyleSheetTarget {\n  constructor() {\n    super();\n    const sheet = new CSSStyleSheet();\n    this.target = sheet.cssRules[sheet.insertRule(\":root{}\")].style;\n    document.adoptedStyleSheets = [...document.adoptedStyleSheets, sheet];\n  }\n\n}\n\nclass HeadStyleElementStyleSheetTarget extends QueuedStyleSheetTarget {\n  constructor() {\n    super();\n    this.style = document.createElement(\"style\");\n    document.head.appendChild(this.style);\n    const {\n      sheet\n    } = this.style; // Because the HTMLStyleElement has been appended,\n    // there shouldn't exist a case where `sheet` is null,\n    // but if-check it just in case.\n\n    if (sheet) {\n      // https://github.com/jsdom/jsdom uses https://github.com/NV/CSSOM for it's CSSOM implementation,\n      // which implements the DOM Level 2 spec for CSSStyleSheet where insertRule() requires an index argument.\n      const index = sheet.insertRule(\":root{}\", sheet.cssRules.length);\n      this.target = sheet.cssRules[index].style;\n    }\n  }\n\n}\n/**\n * Handles setting properties for a FASTElement using an HTMLStyleElement\n */\n\n\nclass StyleElementStyleSheetTarget {\n  constructor(target) {\n    this.store = new Map();\n    this.target = null;\n    const controller = target.$fastController;\n    this.style = document.createElement(\"style\");\n    controller.addStyles(this.style);\n    Observable.getNotifier(controller).subscribe(this, \"isConnected\");\n    this.handleChange(controller, \"isConnected\");\n  }\n\n  targetChanged() {\n    if (this.target !== null) {\n      for (const [key, value] of this.store.entries()) {\n        this.target.setProperty(key, value);\n      }\n    }\n  }\n\n  setProperty(name, value) {\n    this.store.set(name, value);\n    DOM.queueUpdate(() => {\n      if (this.target !== null) {\n        this.target.setProperty(name, value);\n      }\n    });\n  }\n\n  removeProperty(name) {\n    this.store.delete(name);\n    DOM.queueUpdate(() => {\n      if (this.target !== null) {\n        this.target.removeProperty(name);\n      }\n    });\n  }\n\n  handleChange(source, key) {\n    // HTMLStyleElement.sheet is null if the element isn't connected to the DOM,\n    // so this method reacts to changes in DOM connection for the element hosting\n    // the HTMLStyleElement.\n    //\n    // All rules applied via the CSSOM also get cleared when the element disconnects,\n    // so we need to add a new rule each time and populate it with the stored properties\n    const {\n      sheet\n    } = this.style;\n\n    if (sheet) {\n      // Safari will throw if we try to use the return result of insertRule()\n      // to index the rule inline, so store as a const prior to indexing.\n      // https://github.com/jsdom/jsdom uses https://github.com/NV/CSSOM for it's CSSOM implementation,\n      // which implements the DOM Level 2 spec for CSSStyleSheet where insertRule() requires an index argument.\n      const index = sheet.insertRule(\":host{}\", sheet.cssRules.length);\n      this.target = sheet.cssRules[index].style;\n    } else {\n      this.target = null;\n    }\n  }\n\n}\n\n__decorate([observable], StyleElementStyleSheetTarget.prototype, \"target\", void 0);\n/**\n * Handles setting properties for a normal HTMLElement\n */\n\n\nclass ElementStyleSheetTarget {\n  constructor(source) {\n    this.target = source.style;\n  }\n\n  setProperty(name, value) {\n    DOM.queueUpdate(() => this.target.setProperty(name, value));\n  }\n\n  removeProperty(name) {\n    DOM.queueUpdate(() => this.target.removeProperty(name));\n  }\n\n}\n/**\n * Controls emission for default values. This control is capable\n * of emitting to multiple {@link PropertyTarget | PropertyTargets},\n * and only emits if it has at least one root.\n *\n * @internal\n */\n\n\nexport class RootStyleSheetTarget {\n  setProperty(name, value) {\n    RootStyleSheetTarget.properties[name] = value;\n\n    for (const target of RootStyleSheetTarget.roots.values()) {\n      PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(target)).setProperty(name, value);\n    }\n  }\n\n  removeProperty(name) {\n    delete RootStyleSheetTarget.properties[name];\n\n    for (const target of RootStyleSheetTarget.roots.values()) {\n      PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(target)).removeProperty(name);\n    }\n  }\n\n  static registerRoot(root) {\n    const {\n      roots\n    } = RootStyleSheetTarget;\n\n    if (!roots.has(root)) {\n      roots.add(root);\n      const target = PropertyTargetManager.getOrCreate(this.normalizeRoot(root));\n\n      for (const key in RootStyleSheetTarget.properties) {\n        target.setProperty(key, RootStyleSheetTarget.properties[key]);\n      }\n    }\n  }\n\n  static unregisterRoot(root) {\n    const {\n      roots\n    } = RootStyleSheetTarget;\n\n    if (roots.has(root)) {\n      roots.delete(root);\n      const target = PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(root));\n\n      for (const key in RootStyleSheetTarget.properties) {\n        target.removeProperty(key);\n      }\n    }\n  }\n  /**\n   * Returns the document when provided the default element,\n   * otherwise is a no-op\n   * @param root - the root to normalize\n   */\n\n\n  static normalizeRoot(root) {\n    return root === defaultElement ? document : root;\n  }\n\n}\nRootStyleSheetTarget.roots = new Set();\nRootStyleSheetTarget.properties = {}; // Caches PropertyTarget instances\n\nconst propertyTargetCache = new WeakMap(); // Use Constructable StyleSheets for FAST elements when supported, otherwise use\n// HTMLStyleElement instances\n\nconst propertyTargetCtor = DOM.supportsAdoptedStyleSheets ? ConstructableStyleSheetTarget : StyleElementStyleSheetTarget;\n/**\n * Manages creation and caching of PropertyTarget instances.\n *\n * @internal\n */\n\nexport const PropertyTargetManager = Object.freeze({\n  getOrCreate(source) {\n    if (propertyTargetCache.has(source)) {\n      /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */\n      return propertyTargetCache.get(source);\n    }\n\n    let target;\n\n    if (source === defaultElement) {\n      target = new RootStyleSheetTarget();\n    } else if (source instanceof Document) {\n      target = DOM.supportsAdoptedStyleSheets ? new DocumentStyleSheetTarget() : new HeadStyleElementStyleSheetTarget();\n    } else if (isFastElement(source)) {\n      target = new propertyTargetCtor(source);\n    } else {\n      target = new ElementStyleSheetTarget(source);\n    }\n\n    propertyTargetCache.set(source, target);\n    return target;\n  }\n\n});","map":{"version":3,"names":["__decorate","DOM","ElementStyles","FASTElement","observable","Observable","defaultElement","document","createElement","isFastElement","element","QueuedStyleSheetTarget","setProperty","name","value","queueUpdate","target","removeProperty","ConstructableStyleSheetTarget","constructor","source","sheet","CSSStyleSheet","cssRules","insertRule","style","$fastController","addStyles","create","DocumentStyleSheetTarget","adoptedStyleSheets","HeadStyleElementStyleSheetTarget","head","appendChild","index","length","StyleElementStyleSheetTarget","store","Map","controller","getNotifier","subscribe","handleChange","targetChanged","key","entries","set","delete","prototype","ElementStyleSheetTarget","RootStyleSheetTarget","properties","roots","values","PropertyTargetManager","getOrCreate","normalizeRoot","registerRoot","root","has","add","unregisterRoot","Set","propertyTargetCache","WeakMap","propertyTargetCtor","supportsAdoptedStyleSheets","Object","freeze","get","Document"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-foundation/dist/esm/design-token/custom-property-manager.js"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { DOM, ElementStyles, FASTElement, observable, Observable, } from \"@microsoft/fast-element\";\nexport const defaultElement = document.createElement(\"div\");\nfunction isFastElement(element) {\n    return element instanceof FASTElement;\n}\nclass QueuedStyleSheetTarget {\n    setProperty(name, value) {\n        DOM.queueUpdate(() => this.target.setProperty(name, value));\n    }\n    removeProperty(name) {\n        DOM.queueUpdate(() => this.target.removeProperty(name));\n    }\n}\n/**\n * Handles setting properties for a FASTElement using Constructable Stylesheets\n */\nclass ConstructableStyleSheetTarget extends QueuedStyleSheetTarget {\n    constructor(source) {\n        super();\n        const sheet = new CSSStyleSheet();\n        this.target = sheet.cssRules[sheet.insertRule(\":host{}\")].style;\n        source.$fastController.addStyles(ElementStyles.create([sheet]));\n    }\n}\nclass DocumentStyleSheetTarget extends QueuedStyleSheetTarget {\n    constructor() {\n        super();\n        const sheet = new CSSStyleSheet();\n        this.target = sheet.cssRules[sheet.insertRule(\":root{}\")].style;\n        document.adoptedStyleSheets = [\n            ...document.adoptedStyleSheets,\n            sheet,\n        ];\n    }\n}\nclass HeadStyleElementStyleSheetTarget extends QueuedStyleSheetTarget {\n    constructor() {\n        super();\n        this.style = document.createElement(\"style\");\n        document.head.appendChild(this.style);\n        const { sheet } = this.style;\n        // Because the HTMLStyleElement has been appended,\n        // there shouldn't exist a case where `sheet` is null,\n        // but if-check it just in case.\n        if (sheet) {\n            // https://github.com/jsdom/jsdom uses https://github.com/NV/CSSOM for it's CSSOM implementation,\n            // which implements the DOM Level 2 spec for CSSStyleSheet where insertRule() requires an index argument.\n            const index = sheet.insertRule(\":root{}\", sheet.cssRules.length);\n            this.target = sheet.cssRules[index].style;\n        }\n    }\n}\n/**\n * Handles setting properties for a FASTElement using an HTMLStyleElement\n */\nclass StyleElementStyleSheetTarget {\n    constructor(target) {\n        this.store = new Map();\n        this.target = null;\n        const controller = target.$fastController;\n        this.style = document.createElement(\"style\");\n        controller.addStyles(this.style);\n        Observable.getNotifier(controller).subscribe(this, \"isConnected\");\n        this.handleChange(controller, \"isConnected\");\n    }\n    targetChanged() {\n        if (this.target !== null) {\n            for (const [key, value] of this.store.entries()) {\n                this.target.setProperty(key, value);\n            }\n        }\n    }\n    setProperty(name, value) {\n        this.store.set(name, value);\n        DOM.queueUpdate(() => {\n            if (this.target !== null) {\n                this.target.setProperty(name, value);\n            }\n        });\n    }\n    removeProperty(name) {\n        this.store.delete(name);\n        DOM.queueUpdate(() => {\n            if (this.target !== null) {\n                this.target.removeProperty(name);\n            }\n        });\n    }\n    handleChange(source, key) {\n        // HTMLStyleElement.sheet is null if the element isn't connected to the DOM,\n        // so this method reacts to changes in DOM connection for the element hosting\n        // the HTMLStyleElement.\n        //\n        // All rules applied via the CSSOM also get cleared when the element disconnects,\n        // so we need to add a new rule each time and populate it with the stored properties\n        const { sheet } = this.style;\n        if (sheet) {\n            // Safari will throw if we try to use the return result of insertRule()\n            // to index the rule inline, so store as a const prior to indexing.\n            // https://github.com/jsdom/jsdom uses https://github.com/NV/CSSOM for it's CSSOM implementation,\n            // which implements the DOM Level 2 spec for CSSStyleSheet where insertRule() requires an index argument.\n            const index = sheet.insertRule(\":host{}\", sheet.cssRules.length);\n            this.target = sheet.cssRules[index].style;\n        }\n        else {\n            this.target = null;\n        }\n    }\n}\n__decorate([\n    observable\n], StyleElementStyleSheetTarget.prototype, \"target\", void 0);\n/**\n * Handles setting properties for a normal HTMLElement\n */\nclass ElementStyleSheetTarget {\n    constructor(source) {\n        this.target = source.style;\n    }\n    setProperty(name, value) {\n        DOM.queueUpdate(() => this.target.setProperty(name, value));\n    }\n    removeProperty(name) {\n        DOM.queueUpdate(() => this.target.removeProperty(name));\n    }\n}\n/**\n * Controls emission for default values. This control is capable\n * of emitting to multiple {@link PropertyTarget | PropertyTargets},\n * and only emits if it has at least one root.\n *\n * @internal\n */\nexport class RootStyleSheetTarget {\n    setProperty(name, value) {\n        RootStyleSheetTarget.properties[name] = value;\n        for (const target of RootStyleSheetTarget.roots.values()) {\n            PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(target)).setProperty(name, value);\n        }\n    }\n    removeProperty(name) {\n        delete RootStyleSheetTarget.properties[name];\n        for (const target of RootStyleSheetTarget.roots.values()) {\n            PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(target)).removeProperty(name);\n        }\n    }\n    static registerRoot(root) {\n        const { roots } = RootStyleSheetTarget;\n        if (!roots.has(root)) {\n            roots.add(root);\n            const target = PropertyTargetManager.getOrCreate(this.normalizeRoot(root));\n            for (const key in RootStyleSheetTarget.properties) {\n                target.setProperty(key, RootStyleSheetTarget.properties[key]);\n            }\n        }\n    }\n    static unregisterRoot(root) {\n        const { roots } = RootStyleSheetTarget;\n        if (roots.has(root)) {\n            roots.delete(root);\n            const target = PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(root));\n            for (const key in RootStyleSheetTarget.properties) {\n                target.removeProperty(key);\n            }\n        }\n    }\n    /**\n     * Returns the document when provided the default element,\n     * otherwise is a no-op\n     * @param root - the root to normalize\n     */\n    static normalizeRoot(root) {\n        return root === defaultElement ? document : root;\n    }\n}\nRootStyleSheetTarget.roots = new Set();\nRootStyleSheetTarget.properties = {};\n// Caches PropertyTarget instances\nconst propertyTargetCache = new WeakMap();\n// Use Constructable StyleSheets for FAST elements when supported, otherwise use\n// HTMLStyleElement instances\nconst propertyTargetCtor = DOM.supportsAdoptedStyleSheets\n    ? ConstructableStyleSheetTarget\n    : StyleElementStyleSheetTarget;\n/**\n * Manages creation and caching of PropertyTarget instances.\n *\n * @internal\n */\nexport const PropertyTargetManager = Object.freeze({\n    getOrCreate(source) {\n        if (propertyTargetCache.has(source)) {\n            /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */\n            return propertyTargetCache.get(source);\n        }\n        let target;\n        if (source === defaultElement) {\n            target = new RootStyleSheetTarget();\n        }\n        else if (source instanceof Document) {\n            target = DOM.supportsAdoptedStyleSheets\n                ? new DocumentStyleSheetTarget()\n                : new HeadStyleElementStyleSheetTarget();\n        }\n        else if (isFastElement(source)) {\n            target = new propertyTargetCtor(source);\n        }\n        else {\n            target = new ElementStyleSheetTarget(source);\n        }\n        propertyTargetCache.set(source, target);\n        return target;\n    },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}