{"ast":null,"code":"import _classCallCheck from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { __decorate } from \"tslib\";\nimport { attr, DOM, Observable, observable, volatile } from \"@microsoft/fast-element\";\nimport { keyArrowDown, keyArrowUp, keyEnd, keyEnter, keyEscape, keyHome, keySpace, keyTab, uniqueId } from \"@microsoft/fast-web-utilities\";\nimport { DelegatesARIAListbox, Listbox } from \"../listbox/listbox.js\";\nimport { StartEnd } from \"../patterns/start-end.js\";\nimport { applyMixins } from \"../utilities/apply-mixins.js\";\nimport { FormAssociatedSelect } from \"./select.form-associated.js\";\nimport { SelectPosition } from \"./select.options.js\";\n/**\n * A Select Custom HTML Element.\n * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#select | ARIA select }.\n *\n * @slot start - Content which can be provided before the button content\n * @slot end - Content which can be provided after the button content\n * @slot button-container - The element representing the select button\n * @slot selected-value - The selected value\n * @slot indicator - The visual indicator for the expand/collapse state of the button\n * @slot - The default slot for slotted options\n * @csspart control - The element representing the select invoking element\n * @csspart selected-value - The element wrapping the selected value\n * @csspart indicator - The element wrapping the visual indicator\n * @csspart listbox - The listbox element\n * @fires input - Fires a custom 'input' event when the value updates\n * @fires change - Fires a custom 'change' event when the value updates\n *\n * @public\n */\n\nexport var Select = /*#__PURE__*/function (_FormAssociatedSelect) {\n  _inherits(Select, _FormAssociatedSelect);\n\n  var _super = _createSuper(Select);\n\n  function Select() {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _super.apply(this, arguments);\n    /**\n     * The open attribute.\n     *\n     * @public\n     * @remarks\n     * HTML Attribute: open\n     */\n\n    _this.open = false;\n    /**\n     * Indicates the initial state of the position attribute.\n     *\n     * @internal\n     */\n\n    _this.forcedPosition = false;\n    /**\n     * The unique id for the internal listbox element.\n     *\n     * @internal\n     */\n\n    _this.listboxId = uniqueId(\"listbox-\");\n    /**\n     * The max height for the listbox when opened.\n     *\n     * @internal\n     */\n\n    _this.maxHeight = 0;\n    return _this;\n  }\n  /**\n   * Sets focus and synchronizes ARIA attributes when the open property changes.\n   *\n   * @param prev - the previous open value\n   * @param next - the current open value\n   *\n   * @internal\n   */\n\n\n  _createClass(Select, [{\n    key: \"openChanged\",\n    value: function openChanged(prev, next) {\n      var _this2 = this;\n\n      if (!this.collapsible) {\n        return;\n      }\n\n      if (this.open) {\n        this.ariaControls = this.listboxId;\n        this.ariaExpanded = \"true\";\n        this.setPositioning();\n        this.focusAndScrollOptionIntoView();\n        this.indexWhenOpened = this.selectedIndex; // focus is directed to the element when `open` is changed programmatically\n\n        DOM.queueUpdate(function () {\n          return _this2.focus();\n        });\n        return;\n      }\n\n      this.ariaControls = \"\";\n      this.ariaExpanded = \"false\";\n    }\n    /**\n     * The component is collapsible when in single-selection mode with no size attribute.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"collapsible\",\n    get: function get() {\n      return !(this.multiple || typeof this.size === \"number\");\n    }\n    /**\n     * The value property.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"value\",\n    get: function get() {\n      Observable.track(this, \"value\");\n      return this._value;\n    },\n    set: function set(next) {\n      var _a, _b, _c, _d, _e, _f, _g;\n\n      var prev = \"\".concat(this._value);\n\n      if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.length) {\n        var selectedIndex = this._options.findIndex(function (el) {\n          return el.value === next;\n        });\n\n        var prevSelectedValue = (_c = (_b = this._options[this.selectedIndex]) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : null;\n        var nextSelectedValue = (_e = (_d = this._options[selectedIndex]) === null || _d === void 0 ? void 0 : _d.value) !== null && _e !== void 0 ? _e : null;\n\n        if (selectedIndex === -1 || prevSelectedValue !== nextSelectedValue) {\n          next = \"\";\n          this.selectedIndex = selectedIndex;\n        }\n\n        next = (_g = (_f = this.firstSelectedOption) === null || _f === void 0 ? void 0 : _f.value) !== null && _g !== void 0 ? _g : next;\n      }\n\n      if (prev !== next) {\n        this._value = next;\n\n        _get(_getPrototypeOf(Select.prototype), \"valueChanged\", this).call(this, prev, next);\n\n        Observable.notify(this, \"value\");\n        this.updateDisplayValue();\n      }\n    }\n    /**\n     * Sets the value and display value to match the first selected option.\n     *\n     * @param shouldEmit - if true, the input and change events will be emitted\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"updateValue\",\n    value: function updateValue(shouldEmit) {\n      var _a, _b;\n\n      if (this.$fastController.isConnected) {\n        this.value = (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : \"\";\n      }\n\n      if (shouldEmit) {\n        this.$emit(\"input\");\n        this.$emit(\"change\", this, {\n          bubbles: true,\n          composed: undefined\n        });\n      }\n    }\n    /**\n     * Updates the proxy value when the selected index changes.\n     *\n     * @param prev - the previous selected index\n     * @param next - the next selected index\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"selectedIndexChanged\",\n    value: function selectedIndexChanged(prev, next) {\n      _get(_getPrototypeOf(Select.prototype), \"selectedIndexChanged\", this).call(this, prev, next);\n\n      this.updateValue();\n    }\n  }, {\n    key: \"positionChanged\",\n    value: function positionChanged(prev, next) {\n      this.positionAttribute = next;\n      this.setPositioning();\n    }\n    /**\n     * Calculate and apply listbox positioning based on available viewport space.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"setPositioning\",\n    value: function setPositioning() {\n      var currentBox = this.getBoundingClientRect();\n      var viewportHeight = window.innerHeight;\n      var availableBottom = viewportHeight - currentBox.bottom;\n      this.position = this.forcedPosition ? this.positionAttribute : currentBox.top > availableBottom ? SelectPosition.above : SelectPosition.below;\n      this.positionAttribute = this.forcedPosition ? this.positionAttribute : this.position;\n      this.maxHeight = this.position === SelectPosition.above ? ~~currentBox.top : ~~availableBottom;\n    }\n    /**\n     * The value displayed on the button.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"displayValue\",\n    get: function get() {\n      var _a, _b;\n\n      Observable.track(this, \"displayValue\");\n      return (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text) !== null && _b !== void 0 ? _b : \"\";\n    }\n    /**\n     * Synchronize the `aria-disabled` property when the `disabled` property changes.\n     *\n     * @param prev - The previous disabled value\n     * @param next - The next disabled value\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"disabledChanged\",\n    value: function disabledChanged(prev, next) {\n      if (_get(_getPrototypeOf(Select.prototype), \"disabledChanged\", this)) {\n        _get(_getPrototypeOf(Select.prototype), \"disabledChanged\", this).call(this, prev, next);\n      }\n\n      this.ariaDisabled = this.disabled ? \"true\" : \"false\";\n    }\n    /**\n     * Reset the element to its first selectable option when its parent form is reset.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"formResetCallback\",\n    value: function formResetCallback() {\n      this.setProxyOptions(); // Call the base class's implementation setDefaultSelectedOption instead of the select's\n      // override, in order to reset the selectedIndex without using the value property.\n\n      _get(_getPrototypeOf(Select.prototype), \"setDefaultSelectedOption\", this).call(this);\n\n      if (this.selectedIndex === -1) {\n        this.selectedIndex = 0;\n      }\n    }\n    /**\n     * Handle opening and closing the listbox when the select is clicked.\n     *\n     * @param e - the mouse event\n     * @internal\n     */\n\n  }, {\n    key: \"clickHandler\",\n    value: function clickHandler(e) {\n      // do nothing if the select is disabled\n      if (this.disabled) {\n        return;\n      }\n\n      if (this.open) {\n        var captured = e.target.closest(\"option,[role=option]\");\n\n        if (captured && captured.disabled) {\n          return;\n        }\n      }\n\n      _get(_getPrototypeOf(Select.prototype), \"clickHandler\", this).call(this, e);\n\n      this.open = this.collapsible && !this.open;\n\n      if (!this.open && this.indexWhenOpened !== this.selectedIndex) {\n        this.updateValue(true);\n      }\n\n      return true;\n    }\n    /**\n     * Handles focus state when the element or its children lose focus.\n     *\n     * @param e - The focus event\n     * @internal\n     */\n\n  }, {\n    key: \"focusoutHandler\",\n    value: function focusoutHandler(e) {\n      var _a;\n\n      _get(_getPrototypeOf(Select.prototype), \"focusoutHandler\", this).call(this, e);\n\n      if (!this.open) {\n        return true;\n      }\n\n      var focusTarget = e.relatedTarget;\n\n      if (this.isSameNode(focusTarget)) {\n        this.focus();\n        return;\n      }\n\n      if (!((_a = this.options) === null || _a === void 0 ? void 0 : _a.includes(focusTarget))) {\n        this.open = false;\n\n        if (this.indexWhenOpened !== this.selectedIndex) {\n          this.updateValue(true);\n        }\n      }\n    }\n    /**\n     * Updates the value when an option's value changes.\n     *\n     * @param source - the source object\n     * @param propertyName - the property to evaluate\n     *\n     * @internal\n     * @override\n     */\n\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(source, propertyName) {\n      _get(_getPrototypeOf(Select.prototype), \"handleChange\", this).call(this, source, propertyName);\n\n      if (propertyName === \"value\") {\n        this.updateValue();\n      }\n    }\n    /**\n     * Synchronize the form-associated proxy and updates the value property of the element.\n     *\n     * @param prev - the previous collection of slotted option elements\n     * @param next - the next collection of slotted option elements\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"slottedOptionsChanged\",\n    value: function slottedOptionsChanged(prev, next) {\n      var _this3 = this;\n\n      this.options.forEach(function (o) {\n        var notifier = Observable.getNotifier(o);\n        notifier.unsubscribe(_this3, \"value\");\n      });\n\n      _get(_getPrototypeOf(Select.prototype), \"slottedOptionsChanged\", this).call(this, prev, next);\n\n      this.options.forEach(function (o) {\n        var notifier = Observable.getNotifier(o);\n        notifier.subscribe(_this3, \"value\");\n      });\n      this.setProxyOptions();\n      this.updateValue();\n    }\n    /**\n     * Prevents focus when size is set and a scrollbar is clicked.\n     *\n     * @param e - the mouse event object\n     *\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"mousedownHandler\",\n    value: function mousedownHandler(e) {\n      var _a;\n\n      if (e.offsetX >= 0 && e.offsetX <= ((_a = this.listbox) === null || _a === void 0 ? void 0 : _a.scrollWidth)) {\n        return _get(_getPrototypeOf(Select.prototype), \"mousedownHandler\", this).call(this, e);\n      }\n\n      return this.collapsible;\n    }\n    /**\n     * Sets the multiple property on the proxy element.\n     *\n     * @param prev - the previous multiple value\n     * @param next - the current multiple value\n     */\n\n  }, {\n    key: \"multipleChanged\",\n    value: function multipleChanged(prev, next) {\n      _get(_getPrototypeOf(Select.prototype), \"multipleChanged\", this).call(this, prev, next);\n\n      if (this.proxy) {\n        this.proxy.multiple = next;\n      }\n    }\n    /**\n     * Updates the selectedness of each option when the list of selected options changes.\n     *\n     * @param prev - the previous list of selected options\n     * @param next - the current list of selected options\n     *\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"selectedOptionsChanged\",\n    value: function selectedOptionsChanged(prev, next) {\n      var _this4 = this;\n\n      var _a;\n\n      _get(_getPrototypeOf(Select.prototype), \"selectedOptionsChanged\", this).call(this, prev, next);\n\n      (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach(function (o, i) {\n        var _a;\n\n        var proxyOption = (_a = _this4.proxy) === null || _a === void 0 ? void 0 : _a.options.item(i);\n\n        if (proxyOption) {\n          proxyOption.selected = o.selected;\n        }\n      });\n    }\n    /**\n     * Sets the selected index to match the first option with the selected attribute, or\n     * the first selectable option.\n     *\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"setDefaultSelectedOption\",\n    value: function setDefaultSelectedOption() {\n      var _this5 = this;\n\n      var _a;\n\n      var options = (_a = this.options) !== null && _a !== void 0 ? _a : Array.from(this.children).filter(Listbox.slottedOptionFilter);\n      var selectedIndex = options === null || options === void 0 ? void 0 : options.findIndex(function (el) {\n        return el.hasAttribute(\"selected\") || el.selected || el.value === _this5.value;\n      });\n\n      if (selectedIndex !== -1) {\n        this.selectedIndex = selectedIndex;\n        return;\n      }\n\n      this.selectedIndex = 0;\n    }\n    /**\n     * Resets and fills the proxy to match the component's options.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"setProxyOptions\",\n    value: function setProxyOptions() {\n      var _this6 = this;\n\n      if (this.proxy instanceof HTMLSelectElement && this.options) {\n        this.proxy.options.length = 0;\n        this.options.forEach(function (option) {\n          var proxyOption = option.proxy || (option instanceof HTMLOptionElement ? option.cloneNode() : null);\n\n          if (proxyOption) {\n            _this6.proxy.options.add(proxyOption);\n          }\n        });\n      }\n    }\n    /**\n     * Handle keyboard interaction for the select.\n     *\n     * @param e - the keyboard event\n     * @internal\n     */\n\n  }, {\n    key: \"keydownHandler\",\n    value: function keydownHandler(e) {\n      _get(_getPrototypeOf(Select.prototype), \"keydownHandler\", this).call(this, e);\n\n      var key = e.key || e.key.charCodeAt(0);\n\n      switch (key) {\n        case keySpace:\n          {\n            e.preventDefault();\n\n            if (this.collapsible && this.typeAheadExpired) {\n              this.open = !this.open;\n            }\n\n            break;\n          }\n\n        case keyHome:\n        case keyEnd:\n          {\n            e.preventDefault();\n            break;\n          }\n\n        case keyEnter:\n          {\n            e.preventDefault();\n            this.open = !this.open;\n            break;\n          }\n\n        case keyEscape:\n          {\n            if (this.collapsible && this.open) {\n              e.preventDefault();\n              this.open = false;\n            }\n\n            break;\n          }\n\n        case keyTab:\n          {\n            if (this.collapsible && this.open) {\n              e.preventDefault();\n              this.open = false;\n            }\n\n            return true;\n          }\n      }\n\n      if (!this.open && this.indexWhenOpened !== this.selectedIndex) {\n        this.updateValue(true);\n        this.indexWhenOpened = this.selectedIndex;\n      }\n\n      return !(key === keyArrowDown || key === keyArrowUp);\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      _get(_getPrototypeOf(Select.prototype), \"connectedCallback\", this).call(this);\n\n      this.forcedPosition = !!this.positionAttribute;\n      this.addEventListener(\"contentchange\", this.updateDisplayValue);\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.removeEventListener(\"contentchange\", this.updateDisplayValue);\n\n      _get(_getPrototypeOf(Select.prototype), \"disconnectedCallback\", this).call(this);\n    }\n    /**\n     * Updates the proxy's size property when the size attribute changes.\n     *\n     * @param prev - the previous size\n     * @param next - the current size\n     *\n     * @override\n     * @internal\n     */\n\n  }, {\n    key: \"sizeChanged\",\n    value: function sizeChanged(prev, next) {\n      _get(_getPrototypeOf(Select.prototype), \"sizeChanged\", this).call(this, prev, next);\n\n      if (this.proxy) {\n        this.proxy.size = next;\n      }\n    }\n    /**\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"updateDisplayValue\",\n    value: function updateDisplayValue() {\n      if (this.collapsible) {\n        Observable.notify(this, \"displayValue\");\n      }\n    }\n  }]);\n\n  return Select;\n}(FormAssociatedSelect);\n\n__decorate([attr({\n  attribute: \"open\",\n  mode: \"boolean\"\n})], Select.prototype, \"open\", void 0);\n\n__decorate([volatile], Select.prototype, \"collapsible\", null);\n\n__decorate([observable], Select.prototype, \"control\", void 0);\n\n__decorate([attr({\n  attribute: \"position\"\n})], Select.prototype, \"positionAttribute\", void 0);\n\n__decorate([observable], Select.prototype, \"position\", void 0);\n\n__decorate([observable], Select.prototype, \"maxHeight\", void 0);\n/**\n * Includes ARIA states and properties relating to the ARIA select role.\n *\n * @public\n */\n\n\nexport var DelegatesARIASelect = function DelegatesARIASelect() {\n  _classCallCheck(this, DelegatesARIASelect);\n};\n\n__decorate([observable], DelegatesARIASelect.prototype, \"ariaControls\", void 0);\n\napplyMixins(DelegatesARIASelect, DelegatesARIAListbox);\napplyMixins(Select, StartEnd, DelegatesARIASelect);","map":{"version":3,"names":["__decorate","attr","DOM","Observable","observable","volatile","keyArrowDown","keyArrowUp","keyEnd","keyEnter","keyEscape","keyHome","keySpace","keyTab","uniqueId","DelegatesARIAListbox","Listbox","StartEnd","applyMixins","FormAssociatedSelect","SelectPosition","Select","arguments","open","forcedPosition","listboxId","maxHeight","prev","next","collapsible","ariaControls","ariaExpanded","setPositioning","focusAndScrollOptionIntoView","indexWhenOpened","selectedIndex","queueUpdate","focus","multiple","size","track","_value","_a","_b","_c","_d","_e","_f","_g","_options","length","findIndex","el","value","prevSelectedValue","nextSelectedValue","firstSelectedOption","notify","updateDisplayValue","shouldEmit","$fastController","isConnected","$emit","bubbles","composed","undefined","updateValue","positionAttribute","currentBox","getBoundingClientRect","viewportHeight","window","innerHeight","availableBottom","bottom","position","top","above","below","text","ariaDisabled","disabled","setProxyOptions","e","captured","target","closest","focusTarget","relatedTarget","isSameNode","options","includes","source","propertyName","forEach","o","notifier","getNotifier","unsubscribe","subscribe","offsetX","listbox","scrollWidth","proxy","i","proxyOption","item","selected","Array","from","children","filter","slottedOptionFilter","hasAttribute","HTMLSelectElement","option","HTMLOptionElement","cloneNode","add","key","charCodeAt","preventDefault","typeAheadExpired","addEventListener","removeEventListener","attribute","mode","prototype","DelegatesARIASelect"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-foundation/dist/esm/select/select.js"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { attr, DOM, Observable, observable, volatile } from \"@microsoft/fast-element\";\nimport { keyArrowDown, keyArrowUp, keyEnd, keyEnter, keyEscape, keyHome, keySpace, keyTab, uniqueId, } from \"@microsoft/fast-web-utilities\";\nimport { DelegatesARIAListbox, Listbox } from \"../listbox/listbox.js\";\nimport { StartEnd } from \"../patterns/start-end.js\";\nimport { applyMixins } from \"../utilities/apply-mixins.js\";\nimport { FormAssociatedSelect } from \"./select.form-associated.js\";\nimport { SelectPosition } from \"./select.options.js\";\n/**\n * A Select Custom HTML Element.\n * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#select | ARIA select }.\n *\n * @slot start - Content which can be provided before the button content\n * @slot end - Content which can be provided after the button content\n * @slot button-container - The element representing the select button\n * @slot selected-value - The selected value\n * @slot indicator - The visual indicator for the expand/collapse state of the button\n * @slot - The default slot for slotted options\n * @csspart control - The element representing the select invoking element\n * @csspart selected-value - The element wrapping the selected value\n * @csspart indicator - The element wrapping the visual indicator\n * @csspart listbox - The listbox element\n * @fires input - Fires a custom 'input' event when the value updates\n * @fires change - Fires a custom 'change' event when the value updates\n *\n * @public\n */\nexport class Select extends FormAssociatedSelect {\n    constructor() {\n        super(...arguments);\n        /**\n         * The open attribute.\n         *\n         * @public\n         * @remarks\n         * HTML Attribute: open\n         */\n        this.open = false;\n        /**\n         * Indicates the initial state of the position attribute.\n         *\n         * @internal\n         */\n        this.forcedPosition = false;\n        /**\n         * The unique id for the internal listbox element.\n         *\n         * @internal\n         */\n        this.listboxId = uniqueId(\"listbox-\");\n        /**\n         * The max height for the listbox when opened.\n         *\n         * @internal\n         */\n        this.maxHeight = 0;\n    }\n    /**\n     * Sets focus and synchronizes ARIA attributes when the open property changes.\n     *\n     * @param prev - the previous open value\n     * @param next - the current open value\n     *\n     * @internal\n     */\n    openChanged(prev, next) {\n        if (!this.collapsible) {\n            return;\n        }\n        if (this.open) {\n            this.ariaControls = this.listboxId;\n            this.ariaExpanded = \"true\";\n            this.setPositioning();\n            this.focusAndScrollOptionIntoView();\n            this.indexWhenOpened = this.selectedIndex;\n            // focus is directed to the element when `open` is changed programmatically\n            DOM.queueUpdate(() => this.focus());\n            return;\n        }\n        this.ariaControls = \"\";\n        this.ariaExpanded = \"false\";\n    }\n    /**\n     * The component is collapsible when in single-selection mode with no size attribute.\n     *\n     * @internal\n     */\n    get collapsible() {\n        return !(this.multiple || typeof this.size === \"number\");\n    }\n    /**\n     * The value property.\n     *\n     * @public\n     */\n    get value() {\n        Observable.track(this, \"value\");\n        return this._value;\n    }\n    set value(next) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const prev = `${this._value}`;\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.length) {\n            const selectedIndex = this._options.findIndex(el => el.value === next);\n            const prevSelectedValue = (_c = (_b = this._options[this.selectedIndex]) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : null;\n            const nextSelectedValue = (_e = (_d = this._options[selectedIndex]) === null || _d === void 0 ? void 0 : _d.value) !== null && _e !== void 0 ? _e : null;\n            if (selectedIndex === -1 || prevSelectedValue !== nextSelectedValue) {\n                next = \"\";\n                this.selectedIndex = selectedIndex;\n            }\n            next = (_g = (_f = this.firstSelectedOption) === null || _f === void 0 ? void 0 : _f.value) !== null && _g !== void 0 ? _g : next;\n        }\n        if (prev !== next) {\n            this._value = next;\n            super.valueChanged(prev, next);\n            Observable.notify(this, \"value\");\n            this.updateDisplayValue();\n        }\n    }\n    /**\n     * Sets the value and display value to match the first selected option.\n     *\n     * @param shouldEmit - if true, the input and change events will be emitted\n     *\n     * @internal\n     */\n    updateValue(shouldEmit) {\n        var _a, _b;\n        if (this.$fastController.isConnected) {\n            this.value = (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : \"\";\n        }\n        if (shouldEmit) {\n            this.$emit(\"input\");\n            this.$emit(\"change\", this, {\n                bubbles: true,\n                composed: undefined,\n            });\n        }\n    }\n    /**\n     * Updates the proxy value when the selected index changes.\n     *\n     * @param prev - the previous selected index\n     * @param next - the next selected index\n     *\n     * @internal\n     */\n    selectedIndexChanged(prev, next) {\n        super.selectedIndexChanged(prev, next);\n        this.updateValue();\n    }\n    positionChanged(prev, next) {\n        this.positionAttribute = next;\n        this.setPositioning();\n    }\n    /**\n     * Calculate and apply listbox positioning based on available viewport space.\n     *\n     * @public\n     */\n    setPositioning() {\n        const currentBox = this.getBoundingClientRect();\n        const viewportHeight = window.innerHeight;\n        const availableBottom = viewportHeight - currentBox.bottom;\n        this.position = this.forcedPosition\n            ? this.positionAttribute\n            : currentBox.top > availableBottom\n                ? SelectPosition.above\n                : SelectPosition.below;\n        this.positionAttribute = this.forcedPosition\n            ? this.positionAttribute\n            : this.position;\n        this.maxHeight =\n            this.position === SelectPosition.above ? ~~currentBox.top : ~~availableBottom;\n    }\n    /**\n     * The value displayed on the button.\n     *\n     * @public\n     */\n    get displayValue() {\n        var _a, _b;\n        Observable.track(this, \"displayValue\");\n        return (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text) !== null && _b !== void 0 ? _b : \"\";\n    }\n    /**\n     * Synchronize the `aria-disabled` property when the `disabled` property changes.\n     *\n     * @param prev - The previous disabled value\n     * @param next - The next disabled value\n     *\n     * @internal\n     */\n    disabledChanged(prev, next) {\n        if (super.disabledChanged) {\n            super.disabledChanged(prev, next);\n        }\n        this.ariaDisabled = this.disabled ? \"true\" : \"false\";\n    }\n    /**\n     * Reset the element to its first selectable option when its parent form is reset.\n     *\n     * @internal\n     */\n    formResetCallback() {\n        this.setProxyOptions();\n        // Call the base class's implementation setDefaultSelectedOption instead of the select's\n        // override, in order to reset the selectedIndex without using the value property.\n        super.setDefaultSelectedOption();\n        if (this.selectedIndex === -1) {\n            this.selectedIndex = 0;\n        }\n    }\n    /**\n     * Handle opening and closing the listbox when the select is clicked.\n     *\n     * @param e - the mouse event\n     * @internal\n     */\n    clickHandler(e) {\n        // do nothing if the select is disabled\n        if (this.disabled) {\n            return;\n        }\n        if (this.open) {\n            const captured = e.target.closest(`option,[role=option]`);\n            if (captured && captured.disabled) {\n                return;\n            }\n        }\n        super.clickHandler(e);\n        this.open = this.collapsible && !this.open;\n        if (!this.open && this.indexWhenOpened !== this.selectedIndex) {\n            this.updateValue(true);\n        }\n        return true;\n    }\n    /**\n     * Handles focus state when the element or its children lose focus.\n     *\n     * @param e - The focus event\n     * @internal\n     */\n    focusoutHandler(e) {\n        var _a;\n        super.focusoutHandler(e);\n        if (!this.open) {\n            return true;\n        }\n        const focusTarget = e.relatedTarget;\n        if (this.isSameNode(focusTarget)) {\n            this.focus();\n            return;\n        }\n        if (!((_a = this.options) === null || _a === void 0 ? void 0 : _a.includes(focusTarget))) {\n            this.open = false;\n            if (this.indexWhenOpened !== this.selectedIndex) {\n                this.updateValue(true);\n            }\n        }\n    }\n    /**\n     * Updates the value when an option's value changes.\n     *\n     * @param source - the source object\n     * @param propertyName - the property to evaluate\n     *\n     * @internal\n     * @override\n     */\n    handleChange(source, propertyName) {\n        super.handleChange(source, propertyName);\n        if (propertyName === \"value\") {\n            this.updateValue();\n        }\n    }\n    /**\n     * Synchronize the form-associated proxy and updates the value property of the element.\n     *\n     * @param prev - the previous collection of slotted option elements\n     * @param next - the next collection of slotted option elements\n     *\n     * @internal\n     */\n    slottedOptionsChanged(prev, next) {\n        this.options.forEach(o => {\n            const notifier = Observable.getNotifier(o);\n            notifier.unsubscribe(this, \"value\");\n        });\n        super.slottedOptionsChanged(prev, next);\n        this.options.forEach(o => {\n            const notifier = Observable.getNotifier(o);\n            notifier.subscribe(this, \"value\");\n        });\n        this.setProxyOptions();\n        this.updateValue();\n    }\n    /**\n     * Prevents focus when size is set and a scrollbar is clicked.\n     *\n     * @param e - the mouse event object\n     *\n     * @override\n     * @internal\n     */\n    mousedownHandler(e) {\n        var _a;\n        if (e.offsetX >= 0 && e.offsetX <= ((_a = this.listbox) === null || _a === void 0 ? void 0 : _a.scrollWidth)) {\n            return super.mousedownHandler(e);\n        }\n        return this.collapsible;\n    }\n    /**\n     * Sets the multiple property on the proxy element.\n     *\n     * @param prev - the previous multiple value\n     * @param next - the current multiple value\n     */\n    multipleChanged(prev, next) {\n        super.multipleChanged(prev, next);\n        if (this.proxy) {\n            this.proxy.multiple = next;\n        }\n    }\n    /**\n     * Updates the selectedness of each option when the list of selected options changes.\n     *\n     * @param prev - the previous list of selected options\n     * @param next - the current list of selected options\n     *\n     * @override\n     * @internal\n     */\n    selectedOptionsChanged(prev, next) {\n        var _a;\n        super.selectedOptionsChanged(prev, next);\n        (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach((o, i) => {\n            var _a;\n            const proxyOption = (_a = this.proxy) === null || _a === void 0 ? void 0 : _a.options.item(i);\n            if (proxyOption) {\n                proxyOption.selected = o.selected;\n            }\n        });\n    }\n    /**\n     * Sets the selected index to match the first option with the selected attribute, or\n     * the first selectable option.\n     *\n     * @override\n     * @internal\n     */\n    setDefaultSelectedOption() {\n        var _a;\n        const options = (_a = this.options) !== null && _a !== void 0 ? _a : Array.from(this.children).filter(Listbox.slottedOptionFilter);\n        const selectedIndex = options === null || options === void 0 ? void 0 : options.findIndex(el => el.hasAttribute(\"selected\") || el.selected || el.value === this.value);\n        if (selectedIndex !== -1) {\n            this.selectedIndex = selectedIndex;\n            return;\n        }\n        this.selectedIndex = 0;\n    }\n    /**\n     * Resets and fills the proxy to match the component's options.\n     *\n     * @internal\n     */\n    setProxyOptions() {\n        if (this.proxy instanceof HTMLSelectElement && this.options) {\n            this.proxy.options.length = 0;\n            this.options.forEach(option => {\n                const proxyOption = option.proxy ||\n                    (option instanceof HTMLOptionElement ? option.cloneNode() : null);\n                if (proxyOption) {\n                    this.proxy.options.add(proxyOption);\n                }\n            });\n        }\n    }\n    /**\n     * Handle keyboard interaction for the select.\n     *\n     * @param e - the keyboard event\n     * @internal\n     */\n    keydownHandler(e) {\n        super.keydownHandler(e);\n        const key = e.key || e.key.charCodeAt(0);\n        switch (key) {\n            case keySpace: {\n                e.preventDefault();\n                if (this.collapsible && this.typeAheadExpired) {\n                    this.open = !this.open;\n                }\n                break;\n            }\n            case keyHome:\n            case keyEnd: {\n                e.preventDefault();\n                break;\n            }\n            case keyEnter: {\n                e.preventDefault();\n                this.open = !this.open;\n                break;\n            }\n            case keyEscape: {\n                if (this.collapsible && this.open) {\n                    e.preventDefault();\n                    this.open = false;\n                }\n                break;\n            }\n            case keyTab: {\n                if (this.collapsible && this.open) {\n                    e.preventDefault();\n                    this.open = false;\n                }\n                return true;\n            }\n        }\n        if (!this.open && this.indexWhenOpened !== this.selectedIndex) {\n            this.updateValue(true);\n            this.indexWhenOpened = this.selectedIndex;\n        }\n        return !(key === keyArrowDown || key === keyArrowUp);\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.forcedPosition = !!this.positionAttribute;\n        this.addEventListener(\"contentchange\", this.updateDisplayValue);\n    }\n    disconnectedCallback() {\n        this.removeEventListener(\"contentchange\", this.updateDisplayValue);\n        super.disconnectedCallback();\n    }\n    /**\n     * Updates the proxy's size property when the size attribute changes.\n     *\n     * @param prev - the previous size\n     * @param next - the current size\n     *\n     * @override\n     * @internal\n     */\n    sizeChanged(prev, next) {\n        super.sizeChanged(prev, next);\n        if (this.proxy) {\n            this.proxy.size = next;\n        }\n    }\n    /**\n     *\n     * @internal\n     */\n    updateDisplayValue() {\n        if (this.collapsible) {\n            Observable.notify(this, \"displayValue\");\n        }\n    }\n}\n__decorate([\n    attr({ attribute: \"open\", mode: \"boolean\" })\n], Select.prototype, \"open\", void 0);\n__decorate([\n    volatile\n], Select.prototype, \"collapsible\", null);\n__decorate([\n    observable\n], Select.prototype, \"control\", void 0);\n__decorate([\n    attr({ attribute: \"position\" })\n], Select.prototype, \"positionAttribute\", void 0);\n__decorate([\n    observable\n], Select.prototype, \"position\", void 0);\n__decorate([\n    observable\n], Select.prototype, \"maxHeight\", void 0);\n/**\n * Includes ARIA states and properties relating to the ARIA select role.\n *\n * @public\n */\nexport class DelegatesARIASelect {\n}\n__decorate([\n    observable\n], DelegatesARIASelect.prototype, \"ariaControls\", void 0);\napplyMixins(DelegatesARIASelect, DelegatesARIAListbox);\napplyMixins(Select, StartEnd, DelegatesARIASelect);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}