{"ast":null,"code":"import _classCallCheck from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { __decorate } from \"tslib\";\nimport { attr, observable, Observable } from \"@microsoft/fast-element\";\nimport { findLastIndex, keyArrowDown, keyArrowUp, keyEnd, keyEnter, keyEscape, keyHome, keySpace, keyTab, uniqueId } from \"@microsoft/fast-web-utilities\";\nimport { FoundationElement } from \"../foundation-element/foundation-element.js\";\nimport { isListboxOption } from \"../listbox-option/listbox-option.js\";\nimport { ARIAGlobalStatesAndProperties } from \"../patterns/aria-global.js\";\nimport { applyMixins } from \"../utilities/apply-mixins.js\";\n/**\n * A Listbox Custom HTML Element.\n * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#listbox | ARIA listbox }.\n *\n * @slot - The default slot for the listbox options\n *\n * @public\n */\n\nexport var Listbox = /*#__PURE__*/function (_FoundationElement) {\n  _inherits(Listbox, _FoundationElement);\n\n  var _super = _createSuper(Listbox);\n\n  function Listbox() {\n    var _this;\n\n    _classCallCheck(this, Listbox);\n\n    _this = _super.apply(this, arguments);\n    /**\n     * The internal unfiltered list of selectable options.\n     *\n     * @internal\n     */\n\n    _this._options = [];\n    /**\n     * The index of the selected option.\n     *\n     * @public\n     */\n\n    _this.selectedIndex = -1;\n    /**\n     * A collection of the selected options.\n     *\n     * @public\n     */\n\n    _this.selectedOptions = [];\n    /**\n     * A standard `click` event creates a `focus` event before firing, so a\n     * `mousedown` event is used to skip that initial focus.\n     *\n     * @internal\n     */\n\n    _this.shouldSkipFocus = false;\n    /**\n     * The current typeahead buffer string.\n     *\n     * @internal\n     */\n\n    _this.typeaheadBuffer = \"\";\n    /**\n     * Flag for the typeahead timeout expiration.\n     *\n     * @internal\n     */\n\n    _this.typeaheadExpired = true;\n    /**\n     * The timeout ID for the typeahead handler.\n     *\n     * @internal\n     */\n\n    _this.typeaheadTimeout = -1;\n    return _this;\n  }\n  /**\n   * The first selected option.\n   *\n   * @internal\n   */\n\n\n  _createClass(Listbox, [{\n    key: \"firstSelectedOption\",\n    get: function get() {\n      var _a;\n\n      return (_a = this.selectedOptions[0]) !== null && _a !== void 0 ? _a : null;\n    }\n    /**\n     * Returns true if there is one or more selectable option.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"hasSelectableOptions\",\n    get: function get() {\n      return this.options.length > 0 && !this.options.every(function (o) {\n        return o.disabled;\n      });\n    }\n    /**\n     * The number of options.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"length\",\n    get: function get() {\n      var _a, _b;\n\n      return (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0;\n    }\n    /**\n     * The list of options.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"options\",\n    get: function get() {\n      Observable.track(this, \"options\");\n      return this._options;\n    },\n    set: function set(value) {\n      this._options = value;\n      Observable.notify(this, \"options\");\n    }\n    /**\n     * Flag for the typeahead timeout expiration.\n     *\n     * @deprecated use `Listbox.typeaheadExpired`\n     * @internal\n     */\n\n  }, {\n    key: \"typeAheadExpired\",\n    get: function get() {\n      return this.typeaheadExpired;\n    },\n    set: function set(value) {\n      this.typeaheadExpired = value;\n    }\n    /**\n     * Handle click events for listbox options.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"clickHandler\",\n    value: function clickHandler(e) {\n      var captured = e.target.closest(\"option,[role=option]\");\n\n      if (captured && !captured.disabled) {\n        this.selectedIndex = this.options.indexOf(captured);\n        return true;\n      }\n    }\n    /**\n     * Ensures that the provided option is focused and scrolled into view.\n     *\n     * @param optionToFocus - The option to focus\n     * @internal\n     */\n\n  }, {\n    key: \"focusAndScrollOptionIntoView\",\n    value: function focusAndScrollOptionIntoView() {\n      var optionToFocus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.firstSelectedOption;\n\n      // To ensure that the browser handles both `focus()` and `scrollIntoView()`, the\n      // timing here needs to guarantee that they happen on different frames. Since this\n      // function is typically called from the `openChanged` observer, `DOM.queueUpdate`\n      // causes the calls to be grouped into the same frame. To prevent this,\n      // `requestAnimationFrame` is used instead of `DOM.queueUpdate`.\n      if (this.contains(document.activeElement) && optionToFocus !== null) {\n        optionToFocus.focus();\n        requestAnimationFrame(function () {\n          optionToFocus.scrollIntoView({\n            block: \"nearest\"\n          });\n        });\n      }\n    }\n    /**\n     * Handles `focusin` actions for the component. When the component receives focus,\n     * the list of selected options is refreshed and the first selected option is scrolled\n     * into view.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"focusinHandler\",\n    value: function focusinHandler(e) {\n      if (!this.shouldSkipFocus && e.target === e.currentTarget) {\n        this.setSelectedOptions();\n        this.focusAndScrollOptionIntoView();\n      }\n\n      this.shouldSkipFocus = false;\n    }\n    /**\n     * Returns the options which match the current typeahead buffer.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"getTypeaheadMatches\",\n    value: function getTypeaheadMatches() {\n      var pattern = this.typeaheadBuffer.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n      var re = new RegExp(\"^\".concat(pattern), \"gi\");\n      return this.options.filter(function (o) {\n        return o.text.trim().match(re);\n      });\n    }\n    /**\n     * Determines the index of the next option which is selectable, if any.\n     *\n     * @param prev - the previous selected index\n     * @param next - the next index to select\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"getSelectableIndex\",\n    value: function getSelectableIndex() {\n      var prev = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.selectedIndex;\n      var next = arguments.length > 1 ? arguments[1] : undefined;\n      var direction = prev > next ? -1 : prev < next ? 1 : 0;\n      var potentialDirection = prev + direction;\n      var nextSelectableOption = null;\n\n      switch (direction) {\n        case -1:\n          {\n            nextSelectableOption = this.options.reduceRight(function (nextSelectableOption, thisOption, index) {\n              return !nextSelectableOption && !thisOption.disabled && index < potentialDirection ? thisOption : nextSelectableOption;\n            }, nextSelectableOption);\n            break;\n          }\n\n        case 1:\n          {\n            nextSelectableOption = this.options.reduce(function (nextSelectableOption, thisOption, index) {\n              return !nextSelectableOption && !thisOption.disabled && index > potentialDirection ? thisOption : nextSelectableOption;\n            }, nextSelectableOption);\n            break;\n          }\n      }\n\n      return this.options.indexOf(nextSelectableOption);\n    }\n    /**\n     * Handles external changes to child options.\n     *\n     * @param source - the source object\n     * @param propertyName - the property\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(source, propertyName) {\n      switch (propertyName) {\n        case \"selected\":\n          {\n            if (Listbox.slottedOptionFilter(source)) {\n              this.selectedIndex = this.options.indexOf(source);\n            }\n\n            this.setSelectedOptions();\n            break;\n          }\n      }\n    }\n    /**\n     * Moves focus to an option whose label matches characters typed by the user.\n     * Consecutive keystrokes are batched into a buffer of search text used\n     * to match against the set of options.  If `TYPE_AHEAD_TIMEOUT_MS` passes\n     * between consecutive keystrokes, the search restarts.\n     *\n     * @param key - the key to be evaluated\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"handleTypeAhead\",\n    value: function handleTypeAhead(key) {\n      var _this2 = this;\n\n      if (this.typeaheadTimeout) {\n        window.clearTimeout(this.typeaheadTimeout);\n      }\n\n      this.typeaheadTimeout = window.setTimeout(function () {\n        return _this2.typeaheadExpired = true;\n      }, Listbox.TYPE_AHEAD_TIMEOUT_MS);\n\n      if (key.length > 1) {\n        return;\n      }\n\n      this.typeaheadBuffer = \"\".concat(this.typeaheadExpired ? \"\" : this.typeaheadBuffer).concat(key);\n    }\n    /**\n     * Handles `keydown` actions for listbox navigation and typeahead.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"keydownHandler\",\n    value: function keydownHandler(e) {\n      if (this.disabled) {\n        return true;\n      }\n\n      this.shouldSkipFocus = false;\n      var key = e.key;\n\n      switch (key) {\n        // Select the first available option\n        case keyHome:\n          {\n            if (!e.shiftKey) {\n              e.preventDefault();\n              this.selectFirstOption();\n            }\n\n            break;\n          }\n        // Select the next selectable option\n\n        case keyArrowDown:\n          {\n            if (!e.shiftKey) {\n              e.preventDefault();\n              this.selectNextOption();\n            }\n\n            break;\n          }\n        // Select the previous selectable option\n\n        case keyArrowUp:\n          {\n            if (!e.shiftKey) {\n              e.preventDefault();\n              this.selectPreviousOption();\n            }\n\n            break;\n          }\n        // Select the last available option\n\n        case keyEnd:\n          {\n            e.preventDefault();\n            this.selectLastOption();\n            break;\n          }\n\n        case keyTab:\n          {\n            this.focusAndScrollOptionIntoView();\n            return true;\n          }\n\n        case keyEnter:\n        case keyEscape:\n          {\n            return true;\n          }\n\n        case keySpace:\n          {\n            if (this.typeaheadExpired) {\n              return true;\n            }\n          }\n        // Send key to Typeahead handler\n\n        default:\n          {\n            if (key.length === 1) {\n              this.handleTypeAhead(\"\".concat(key));\n            }\n\n            return true;\n          }\n      }\n    }\n    /**\n     * Prevents `focusin` events from firing before `click` events when the\n     * element is unfocused.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"mousedownHandler\",\n    value: function mousedownHandler(e) {\n      this.shouldSkipFocus = !this.contains(document.activeElement);\n      return true;\n    }\n    /**\n     * Switches between single-selection and multi-selection mode.\n     *\n     * @param prev - the previous value of the `multiple` attribute\n     * @param next - the next value of the `multiple` attribute\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"multipleChanged\",\n    value: function multipleChanged(prev, next) {\n      this.ariaMultiSelectable = next ? \"true\" : null;\n    }\n    /**\n     * Updates the list of selected options when the `selectedIndex` changes.\n     *\n     * @param prev - the previous selected index value\n     * @param next - the current selected index value\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"selectedIndexChanged\",\n    value: function selectedIndexChanged(prev, next) {\n      var _a;\n\n      if (!this.hasSelectableOptions) {\n        this.selectedIndex = -1;\n        return;\n      }\n\n      if (((_a = this.options[this.selectedIndex]) === null || _a === void 0 ? void 0 : _a.disabled) && typeof prev === \"number\") {\n        var selectableIndex = this.getSelectableIndex(prev, next);\n        var newNext = selectableIndex > -1 ? selectableIndex : prev;\n        this.selectedIndex = newNext;\n\n        if (next === newNext) {\n          this.selectedIndexChanged(next, newNext);\n        }\n\n        return;\n      }\n\n      this.setSelectedOptions();\n    }\n    /**\n     * Updates the selectedness of each option when the list of selected options changes.\n     *\n     * @param prev - the previous list of selected options\n     * @param next - the current list of selected options\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"selectedOptionsChanged\",\n    value: function selectedOptionsChanged(prev, next) {\n      var _this3 = this;\n\n      var _a;\n\n      var filteredNext = next.filter(Listbox.slottedOptionFilter);\n      (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach(function (o) {\n        var notifier = Observable.getNotifier(o);\n        notifier.unsubscribe(_this3, \"selected\");\n        o.selected = filteredNext.includes(o);\n        notifier.subscribe(_this3, \"selected\");\n      });\n    }\n    /**\n     * Moves focus to the first selectable option.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"selectFirstOption\",\n    value: function selectFirstOption() {\n      var _a, _b;\n\n      if (!this.disabled) {\n        this.selectedIndex = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.findIndex(function (o) {\n          return !o.disabled;\n        })) !== null && _b !== void 0 ? _b : -1;\n      }\n    }\n    /**\n     * Moves focus to the last selectable option.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"selectLastOption\",\n    value: function selectLastOption() {\n      if (!this.disabled) {\n        this.selectedIndex = findLastIndex(this.options, function (o) {\n          return !o.disabled;\n        });\n      }\n    }\n    /**\n     * Moves focus to the next selectable option.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"selectNextOption\",\n    value: function selectNextOption() {\n      if (!this.disabled && this.selectedIndex < this.options.length - 1) {\n        this.selectedIndex += 1;\n      }\n    }\n    /**\n     * Moves focus to the previous selectable option.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"selectPreviousOption\",\n    value: function selectPreviousOption() {\n      if (!this.disabled && this.selectedIndex > 0) {\n        this.selectedIndex = this.selectedIndex - 1;\n      }\n    }\n    /**\n     * Updates the selected index to match the first selected option.\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"setDefaultSelectedOption\",\n    value: function setDefaultSelectedOption() {\n      var _a, _b;\n\n      this.selectedIndex = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.findIndex(function (el) {\n        return el.defaultSelected;\n      })) !== null && _b !== void 0 ? _b : -1;\n    }\n    /**\n     * Sets an option as selected and gives it focus.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"setSelectedOptions\",\n    value: function setSelectedOptions() {\n      var _a, _b, _c;\n\n      if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.length) {\n        this.selectedOptions = [this.options[this.selectedIndex]];\n        this.ariaActiveDescendant = (_c = (_b = this.firstSelectedOption) === null || _b === void 0 ? void 0 : _b.id) !== null && _c !== void 0 ? _c : \"\";\n        this.focusAndScrollOptionIntoView();\n      }\n    }\n    /**\n     * Updates the list of options and resets the selected option when the slotted option content changes.\n     *\n     * @param prev - the previous list of slotted options\n     * @param next - the current list of slotted options\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"slottedOptionsChanged\",\n    value: function slottedOptionsChanged(prev, next) {\n      this.options = next.reduce(function (options, item) {\n        if (isListboxOption(item)) {\n          options.push(item);\n        }\n\n        return options;\n      }, []);\n      var setSize = \"\".concat(this.options.length);\n      this.options.forEach(function (option, index) {\n        if (!option.id) {\n          option.id = uniqueId(\"option-\");\n        }\n\n        option.ariaPosInSet = \"\".concat(index + 1);\n        option.ariaSetSize = setSize;\n      });\n\n      if (this.$fastController.isConnected) {\n        this.setSelectedOptions();\n        this.setDefaultSelectedOption();\n      }\n    }\n    /**\n     * Updates the filtered list of options when the typeahead buffer changes.\n     *\n     * @param prev - the previous typeahead buffer value\n     * @param next - the current typeahead buffer value\n     *\n     * @internal\n     */\n\n  }, {\n    key: \"typeaheadBufferChanged\",\n    value: function typeaheadBufferChanged(prev, next) {\n      if (this.$fastController.isConnected) {\n        var typeaheadMatches = this.getTypeaheadMatches();\n\n        if (typeaheadMatches.length) {\n          var selectedIndex = this.options.indexOf(typeaheadMatches[0]);\n\n          if (selectedIndex > -1) {\n            this.selectedIndex = selectedIndex;\n          }\n        }\n\n        this.typeaheadExpired = false;\n      }\n    }\n  }]);\n\n  return Listbox;\n}(FoundationElement);\n/**\n * A static filter to include only selectable options.\n *\n * @param n - element to filter\n * @public\n */\n\nListbox.slottedOptionFilter = function (n) {\n  return isListboxOption(n) && !n.hidden;\n};\n/**\n * Typeahead timeout in milliseconds.\n *\n * @internal\n */\n\n\nListbox.TYPE_AHEAD_TIMEOUT_MS = 1000;\n\n__decorate([attr({\n  mode: \"boolean\"\n})], Listbox.prototype, \"disabled\", void 0);\n\n__decorate([observable], Listbox.prototype, \"selectedIndex\", void 0);\n\n__decorate([observable], Listbox.prototype, \"selectedOptions\", void 0);\n\n__decorate([observable], Listbox.prototype, \"slottedOptions\", void 0);\n\n__decorate([observable], Listbox.prototype, \"typeaheadBuffer\", void 0);\n/**\n * Includes ARIA states and properties relating to the ARIA listbox role\n *\n * @public\n */\n\n\nexport var DelegatesARIAListbox = function DelegatesARIAListbox() {\n  _classCallCheck(this, DelegatesARIAListbox);\n};\n\n__decorate([observable], DelegatesARIAListbox.prototype, \"ariaActiveDescendant\", void 0);\n\n__decorate([observable], DelegatesARIAListbox.prototype, \"ariaDisabled\", void 0);\n\n__decorate([observable], DelegatesARIAListbox.prototype, \"ariaExpanded\", void 0);\n\n__decorate([observable], DelegatesARIAListbox.prototype, \"ariaMultiSelectable\", void 0);\n\napplyMixins(DelegatesARIAListbox, ARIAGlobalStatesAndProperties);\napplyMixins(Listbox, DelegatesARIAListbox);","map":{"version":3,"names":["__decorate","attr","observable","Observable","findLastIndex","keyArrowDown","keyArrowUp","keyEnd","keyEnter","keyEscape","keyHome","keySpace","keyTab","uniqueId","FoundationElement","isListboxOption","ARIAGlobalStatesAndProperties","applyMixins","Listbox","arguments","_options","selectedIndex","selectedOptions","shouldSkipFocus","typeaheadBuffer","typeaheadExpired","typeaheadTimeout","_a","options","length","every","o","disabled","_b","track","value","notify","e","captured","target","closest","indexOf","optionToFocus","firstSelectedOption","contains","document","activeElement","focus","requestAnimationFrame","scrollIntoView","block","currentTarget","setSelectedOptions","focusAndScrollOptionIntoView","pattern","replace","re","RegExp","filter","text","trim","match","prev","next","direction","potentialDirection","nextSelectableOption","reduceRight","thisOption","index","reduce","source","propertyName","slottedOptionFilter","key","window","clearTimeout","setTimeout","TYPE_AHEAD_TIMEOUT_MS","shiftKey","preventDefault","selectFirstOption","selectNextOption","selectPreviousOption","selectLastOption","handleTypeAhead","ariaMultiSelectable","hasSelectableOptions","selectableIndex","getSelectableIndex","newNext","selectedIndexChanged","filteredNext","forEach","notifier","getNotifier","unsubscribe","selected","includes","subscribe","findIndex","el","defaultSelected","_c","ariaActiveDescendant","id","item","push","setSize","option","ariaPosInSet","ariaSetSize","$fastController","isConnected","setDefaultSelectedOption","typeaheadMatches","getTypeaheadMatches","n","hidden","mode","prototype","DelegatesARIAListbox"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { attr, observable, Observable } from \"@microsoft/fast-element\";\nimport { findLastIndex, keyArrowDown, keyArrowUp, keyEnd, keyEnter, keyEscape, keyHome, keySpace, keyTab, uniqueId, } from \"@microsoft/fast-web-utilities\";\nimport { FoundationElement } from \"../foundation-element/foundation-element.js\";\nimport { isListboxOption } from \"../listbox-option/listbox-option.js\";\nimport { ARIAGlobalStatesAndProperties } from \"../patterns/aria-global.js\";\nimport { applyMixins } from \"../utilities/apply-mixins.js\";\n/**\n * A Listbox Custom HTML Element.\n * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#listbox | ARIA listbox }.\n *\n * @slot - The default slot for the listbox options\n *\n * @public\n */\nexport class Listbox extends FoundationElement {\n    constructor() {\n        super(...arguments);\n        /**\n         * The internal unfiltered list of selectable options.\n         *\n         * @internal\n         */\n        this._options = [];\n        /**\n         * The index of the selected option.\n         *\n         * @public\n         */\n        this.selectedIndex = -1;\n        /**\n         * A collection of the selected options.\n         *\n         * @public\n         */\n        this.selectedOptions = [];\n        /**\n         * A standard `click` event creates a `focus` event before firing, so a\n         * `mousedown` event is used to skip that initial focus.\n         *\n         * @internal\n         */\n        this.shouldSkipFocus = false;\n        /**\n         * The current typeahead buffer string.\n         *\n         * @internal\n         */\n        this.typeaheadBuffer = \"\";\n        /**\n         * Flag for the typeahead timeout expiration.\n         *\n         * @internal\n         */\n        this.typeaheadExpired = true;\n        /**\n         * The timeout ID for the typeahead handler.\n         *\n         * @internal\n         */\n        this.typeaheadTimeout = -1;\n    }\n    /**\n     * The first selected option.\n     *\n     * @internal\n     */\n    get firstSelectedOption() {\n        var _a;\n        return (_a = this.selectedOptions[0]) !== null && _a !== void 0 ? _a : null;\n    }\n    /**\n     * Returns true if there is one or more selectable option.\n     *\n     * @internal\n     */\n    get hasSelectableOptions() {\n        return this.options.length > 0 && !this.options.every(o => o.disabled);\n    }\n    /**\n     * The number of options.\n     *\n     * @public\n     */\n    get length() {\n        var _a, _b;\n        return (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0;\n    }\n    /**\n     * The list of options.\n     *\n     * @public\n     */\n    get options() {\n        Observable.track(this, \"options\");\n        return this._options;\n    }\n    set options(value) {\n        this._options = value;\n        Observable.notify(this, \"options\");\n    }\n    /**\n     * Flag for the typeahead timeout expiration.\n     *\n     * @deprecated use `Listbox.typeaheadExpired`\n     * @internal\n     */\n    get typeAheadExpired() {\n        return this.typeaheadExpired;\n    }\n    set typeAheadExpired(value) {\n        this.typeaheadExpired = value;\n    }\n    /**\n     * Handle click events for listbox options.\n     *\n     * @internal\n     */\n    clickHandler(e) {\n        const captured = e.target.closest(`option,[role=option]`);\n        if (captured && !captured.disabled) {\n            this.selectedIndex = this.options.indexOf(captured);\n            return true;\n        }\n    }\n    /**\n     * Ensures that the provided option is focused and scrolled into view.\n     *\n     * @param optionToFocus - The option to focus\n     * @internal\n     */\n    focusAndScrollOptionIntoView(optionToFocus = this.firstSelectedOption) {\n        // To ensure that the browser handles both `focus()` and `scrollIntoView()`, the\n        // timing here needs to guarantee that they happen on different frames. Since this\n        // function is typically called from the `openChanged` observer, `DOM.queueUpdate`\n        // causes the calls to be grouped into the same frame. To prevent this,\n        // `requestAnimationFrame` is used instead of `DOM.queueUpdate`.\n        if (this.contains(document.activeElement) && optionToFocus !== null) {\n            optionToFocus.focus();\n            requestAnimationFrame(() => {\n                optionToFocus.scrollIntoView({ block: \"nearest\" });\n            });\n        }\n    }\n    /**\n     * Handles `focusin` actions for the component. When the component receives focus,\n     * the list of selected options is refreshed and the first selected option is scrolled\n     * into view.\n     *\n     * @internal\n     */\n    focusinHandler(e) {\n        if (!this.shouldSkipFocus && e.target === e.currentTarget) {\n            this.setSelectedOptions();\n            this.focusAndScrollOptionIntoView();\n        }\n        this.shouldSkipFocus = false;\n    }\n    /**\n     * Returns the options which match the current typeahead buffer.\n     *\n     * @internal\n     */\n    getTypeaheadMatches() {\n        const pattern = this.typeaheadBuffer.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n        const re = new RegExp(`^${pattern}`, \"gi\");\n        return this.options.filter((o) => o.text.trim().match(re));\n    }\n    /**\n     * Determines the index of the next option which is selectable, if any.\n     *\n     * @param prev - the previous selected index\n     * @param next - the next index to select\n     *\n     * @internal\n     */\n    getSelectableIndex(prev = this.selectedIndex, next) {\n        const direction = prev > next ? -1 : prev < next ? 1 : 0;\n        const potentialDirection = prev + direction;\n        let nextSelectableOption = null;\n        switch (direction) {\n            case -1: {\n                nextSelectableOption = this.options.reduceRight((nextSelectableOption, thisOption, index) => !nextSelectableOption &&\n                    !thisOption.disabled &&\n                    index < potentialDirection\n                    ? thisOption\n                    : nextSelectableOption, nextSelectableOption);\n                break;\n            }\n            case 1: {\n                nextSelectableOption = this.options.reduce((nextSelectableOption, thisOption, index) => !nextSelectableOption &&\n                    !thisOption.disabled &&\n                    index > potentialDirection\n                    ? thisOption\n                    : nextSelectableOption, nextSelectableOption);\n                break;\n            }\n        }\n        return this.options.indexOf(nextSelectableOption);\n    }\n    /**\n     * Handles external changes to child options.\n     *\n     * @param source - the source object\n     * @param propertyName - the property\n     *\n     * @internal\n     */\n    handleChange(source, propertyName) {\n        switch (propertyName) {\n            case \"selected\": {\n                if (Listbox.slottedOptionFilter(source)) {\n                    this.selectedIndex = this.options.indexOf(source);\n                }\n                this.setSelectedOptions();\n                break;\n            }\n        }\n    }\n    /**\n     * Moves focus to an option whose label matches characters typed by the user.\n     * Consecutive keystrokes are batched into a buffer of search text used\n     * to match against the set of options.  If `TYPE_AHEAD_TIMEOUT_MS` passes\n     * between consecutive keystrokes, the search restarts.\n     *\n     * @param key - the key to be evaluated\n     *\n     * @internal\n     */\n    handleTypeAhead(key) {\n        if (this.typeaheadTimeout) {\n            window.clearTimeout(this.typeaheadTimeout);\n        }\n        this.typeaheadTimeout = window.setTimeout(() => (this.typeaheadExpired = true), Listbox.TYPE_AHEAD_TIMEOUT_MS);\n        if (key.length > 1) {\n            return;\n        }\n        this.typeaheadBuffer = `${this.typeaheadExpired ? \"\" : this.typeaheadBuffer}${key}`;\n    }\n    /**\n     * Handles `keydown` actions for listbox navigation and typeahead.\n     *\n     * @internal\n     */\n    keydownHandler(e) {\n        if (this.disabled) {\n            return true;\n        }\n        this.shouldSkipFocus = false;\n        const key = e.key;\n        switch (key) {\n            // Select the first available option\n            case keyHome: {\n                if (!e.shiftKey) {\n                    e.preventDefault();\n                    this.selectFirstOption();\n                }\n                break;\n            }\n            // Select the next selectable option\n            case keyArrowDown: {\n                if (!e.shiftKey) {\n                    e.preventDefault();\n                    this.selectNextOption();\n                }\n                break;\n            }\n            // Select the previous selectable option\n            case keyArrowUp: {\n                if (!e.shiftKey) {\n                    e.preventDefault();\n                    this.selectPreviousOption();\n                }\n                break;\n            }\n            // Select the last available option\n            case keyEnd: {\n                e.preventDefault();\n                this.selectLastOption();\n                break;\n            }\n            case keyTab: {\n                this.focusAndScrollOptionIntoView();\n                return true;\n            }\n            case keyEnter:\n            case keyEscape: {\n                return true;\n            }\n            case keySpace: {\n                if (this.typeaheadExpired) {\n                    return true;\n                }\n            }\n            // Send key to Typeahead handler\n            default: {\n                if (key.length === 1) {\n                    this.handleTypeAhead(`${key}`);\n                }\n                return true;\n            }\n        }\n    }\n    /**\n     * Prevents `focusin` events from firing before `click` events when the\n     * element is unfocused.\n     *\n     * @internal\n     */\n    mousedownHandler(e) {\n        this.shouldSkipFocus = !this.contains(document.activeElement);\n        return true;\n    }\n    /**\n     * Switches between single-selection and multi-selection mode.\n     *\n     * @param prev - the previous value of the `multiple` attribute\n     * @param next - the next value of the `multiple` attribute\n     *\n     * @internal\n     */\n    multipleChanged(prev, next) {\n        this.ariaMultiSelectable = next ? \"true\" : null;\n    }\n    /**\n     * Updates the list of selected options when the `selectedIndex` changes.\n     *\n     * @param prev - the previous selected index value\n     * @param next - the current selected index value\n     *\n     * @internal\n     */\n    selectedIndexChanged(prev, next) {\n        var _a;\n        if (!this.hasSelectableOptions) {\n            this.selectedIndex = -1;\n            return;\n        }\n        if (((_a = this.options[this.selectedIndex]) === null || _a === void 0 ? void 0 : _a.disabled) && typeof prev === \"number\") {\n            const selectableIndex = this.getSelectableIndex(prev, next);\n            const newNext = selectableIndex > -1 ? selectableIndex : prev;\n            this.selectedIndex = newNext;\n            if (next === newNext) {\n                this.selectedIndexChanged(next, newNext);\n            }\n            return;\n        }\n        this.setSelectedOptions();\n    }\n    /**\n     * Updates the selectedness of each option when the list of selected options changes.\n     *\n     * @param prev - the previous list of selected options\n     * @param next - the current list of selected options\n     *\n     * @internal\n     */\n    selectedOptionsChanged(prev, next) {\n        var _a;\n        const filteredNext = next.filter(Listbox.slottedOptionFilter);\n        (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach(o => {\n            const notifier = Observable.getNotifier(o);\n            notifier.unsubscribe(this, \"selected\");\n            o.selected = filteredNext.includes(o);\n            notifier.subscribe(this, \"selected\");\n        });\n    }\n    /**\n     * Moves focus to the first selectable option.\n     *\n     * @public\n     */\n    selectFirstOption() {\n        var _a, _b;\n        if (!this.disabled) {\n            this.selectedIndex = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.findIndex(o => !o.disabled)) !== null && _b !== void 0 ? _b : -1;\n        }\n    }\n    /**\n     * Moves focus to the last selectable option.\n     *\n     * @internal\n     */\n    selectLastOption() {\n        if (!this.disabled) {\n            this.selectedIndex = findLastIndex(this.options, o => !o.disabled);\n        }\n    }\n    /**\n     * Moves focus to the next selectable option.\n     *\n     * @internal\n     */\n    selectNextOption() {\n        if (!this.disabled && this.selectedIndex < this.options.length - 1) {\n            this.selectedIndex += 1;\n        }\n    }\n    /**\n     * Moves focus to the previous selectable option.\n     *\n     * @internal\n     */\n    selectPreviousOption() {\n        if (!this.disabled && this.selectedIndex > 0) {\n            this.selectedIndex = this.selectedIndex - 1;\n        }\n    }\n    /**\n     * Updates the selected index to match the first selected option.\n     *\n     * @internal\n     */\n    setDefaultSelectedOption() {\n        var _a, _b;\n        this.selectedIndex = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.findIndex(el => el.defaultSelected)) !== null && _b !== void 0 ? _b : -1;\n    }\n    /**\n     * Sets an option as selected and gives it focus.\n     *\n     * @public\n     */\n    setSelectedOptions() {\n        var _a, _b, _c;\n        if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.length) {\n            this.selectedOptions = [this.options[this.selectedIndex]];\n            this.ariaActiveDescendant = (_c = (_b = this.firstSelectedOption) === null || _b === void 0 ? void 0 : _b.id) !== null && _c !== void 0 ? _c : \"\";\n            this.focusAndScrollOptionIntoView();\n        }\n    }\n    /**\n     * Updates the list of options and resets the selected option when the slotted option content changes.\n     *\n     * @param prev - the previous list of slotted options\n     * @param next - the current list of slotted options\n     *\n     * @internal\n     */\n    slottedOptionsChanged(prev, next) {\n        this.options = next.reduce((options, item) => {\n            if (isListboxOption(item)) {\n                options.push(item);\n            }\n            return options;\n        }, []);\n        const setSize = `${this.options.length}`;\n        this.options.forEach((option, index) => {\n            if (!option.id) {\n                option.id = uniqueId(\"option-\");\n            }\n            option.ariaPosInSet = `${index + 1}`;\n            option.ariaSetSize = setSize;\n        });\n        if (this.$fastController.isConnected) {\n            this.setSelectedOptions();\n            this.setDefaultSelectedOption();\n        }\n    }\n    /**\n     * Updates the filtered list of options when the typeahead buffer changes.\n     *\n     * @param prev - the previous typeahead buffer value\n     * @param next - the current typeahead buffer value\n     *\n     * @internal\n     */\n    typeaheadBufferChanged(prev, next) {\n        if (this.$fastController.isConnected) {\n            const typeaheadMatches = this.getTypeaheadMatches();\n            if (typeaheadMatches.length) {\n                const selectedIndex = this.options.indexOf(typeaheadMatches[0]);\n                if (selectedIndex > -1) {\n                    this.selectedIndex = selectedIndex;\n                }\n            }\n            this.typeaheadExpired = false;\n        }\n    }\n}\n/**\n * A static filter to include only selectable options.\n *\n * @param n - element to filter\n * @public\n */\nListbox.slottedOptionFilter = (n) => isListboxOption(n) && !n.hidden;\n/**\n * Typeahead timeout in milliseconds.\n *\n * @internal\n */\nListbox.TYPE_AHEAD_TIMEOUT_MS = 1000;\n__decorate([\n    attr({ mode: \"boolean\" })\n], Listbox.prototype, \"disabled\", void 0);\n__decorate([\n    observable\n], Listbox.prototype, \"selectedIndex\", void 0);\n__decorate([\n    observable\n], Listbox.prototype, \"selectedOptions\", void 0);\n__decorate([\n    observable\n], Listbox.prototype, \"slottedOptions\", void 0);\n__decorate([\n    observable\n], Listbox.prototype, \"typeaheadBuffer\", void 0);\n/**\n * Includes ARIA states and properties relating to the ARIA listbox role\n *\n * @public\n */\nexport class DelegatesARIAListbox {\n}\n__decorate([\n    observable\n], DelegatesARIAListbox.prototype, \"ariaActiveDescendant\", void 0);\n__decorate([\n    observable\n], DelegatesARIAListbox.prototype, \"ariaDisabled\", void 0);\n__decorate([\n    observable\n], DelegatesARIAListbox.prototype, \"ariaExpanded\", void 0);\n__decorate([\n    observable\n], DelegatesARIAListbox.prototype, \"ariaMultiSelectable\", void 0);\napplyMixins(DelegatesARIAListbox, ARIAGlobalStatesAndProperties);\napplyMixins(Listbox, DelegatesARIAListbox);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}