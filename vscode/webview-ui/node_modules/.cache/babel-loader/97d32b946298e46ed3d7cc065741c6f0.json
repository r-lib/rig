{"ast":null,"code":"import { canUseDOM } from \"exenv-es6\";\n/**\n * A test that ensures that all arguments are HTML Elements\n */\n\nexport function isHTMLElement() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return args.every(arg => arg instanceof HTMLElement);\n}\n/**\n * Returns all displayed elements inside of a root node that match a provided selector\n */\n\nexport function getDisplayedNodes(rootNode, selector) {\n  if (!rootNode || !selector || !isHTMLElement(rootNode)) {\n    return;\n  }\n\n  const nodes = Array.from(rootNode.querySelectorAll(selector)); // offsetParent will be null if the element isn't currently displayed,\n  // so this will allow us to operate only on visible nodes\n\n  return nodes.filter(node => node.offsetParent !== null);\n}\n/**\n * Gets the numeric key code associated with a keyboard event. This method is for use with DOM level 3 events\n * that still use the deprecated keyCode property.\n */\n\nexport function getKeyCode(event) {\n  return event === null ? null : event.which || event.keyCode || event.charCode;\n}\n/**\n * Returns the nonce used in the page, if any.\n *\n * Based on https://github.com/cssinjs/jss/blob/master/packages/jss/src/DomRenderer.js\n */\n\nfunction getNonce() {\n  const node = document.querySelector('meta[property=\"csp-nonce\"]');\n\n  if (node) {\n    return node.getAttribute(\"content\");\n  } else {\n    return null;\n  }\n}\n/**\n * Test if the document supports :focus-visible\n */\n\n\nlet _canUseFocusVisible;\n\nexport function canUseFocusVisible() {\n  if (typeof _canUseFocusVisible === \"boolean\") {\n    return _canUseFocusVisible;\n  }\n\n  if (!canUseDOM()) {\n    _canUseFocusVisible = false;\n    return _canUseFocusVisible;\n  } // Check to see if the document supports the focus-visible element\n\n\n  const styleElement = document.createElement(\"style\"); // If nonces are present on the page, use it when creating the style element\n  // to test focus-visible support.\n\n  const styleNonce = getNonce();\n\n  if (styleNonce !== null) {\n    styleElement.setAttribute(\"nonce\", styleNonce);\n  }\n\n  document.head.appendChild(styleElement);\n\n  try {\n    styleElement.sheet.insertRule(\"foo:focus-visible {color:inherit}\", 0);\n    _canUseFocusVisible = true;\n  } catch (e) {\n    _canUseFocusVisible = false;\n  } finally {\n    document.head.removeChild(styleElement);\n  }\n\n  return _canUseFocusVisible;\n}\n\nlet _canUseCssGrid;\n\nexport function canUseCssGrid() {\n  if (typeof _canUseCssGrid === \"boolean\") {\n    return _canUseCssGrid;\n  }\n\n  try {\n    _canUseCssGrid = CSS.supports(\"display\", \"grid\");\n  } catch (_a) {\n    _canUseCssGrid = false;\n  }\n\n  return _canUseCssGrid;\n}\nexport function canUseForcedColors() {\n  return canUseDOM() && (window.matchMedia(\"(forced-colors: none)\").matches || window.matchMedia(\"(forced-colors: active)\").matches);\n}\nexport function resetDocumentCache() {\n  _canUseCssGrid = undefined;\n  _canUseFocusVisible = undefined;\n}\n/**\n * @deprecated Use 'canUseForcedColors' instead\n */\n\nexport const canUsedForcedColors = canUseForcedColors;","map":{"version":3,"names":["canUseDOM","isHTMLElement","args","every","arg","HTMLElement","getDisplayedNodes","rootNode","selector","nodes","Array","from","querySelectorAll","filter","node","offsetParent","getKeyCode","event","which","keyCode","charCode","getNonce","document","querySelector","getAttribute","_canUseFocusVisible","canUseFocusVisible","styleElement","createElement","styleNonce","setAttribute","head","appendChild","sheet","insertRule","e","removeChild","_canUseCssGrid","canUseCssGrid","CSS","supports","_a","canUseForcedColors","window","matchMedia","matches","resetDocumentCache","undefined","canUsedForcedColors"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-web-utilities/dist/dom.js"],"sourcesContent":["import { canUseDOM } from \"exenv-es6\";\n/**\n * A test that ensures that all arguments are HTML Elements\n */\nexport function isHTMLElement(...args) {\n    return args.every((arg) => arg instanceof HTMLElement);\n}\n/**\n * Returns all displayed elements inside of a root node that match a provided selector\n */\nexport function getDisplayedNodes(rootNode, selector) {\n    if (!rootNode || !selector || !isHTMLElement(rootNode)) {\n        return;\n    }\n    const nodes = Array.from(rootNode.querySelectorAll(selector));\n    // offsetParent will be null if the element isn't currently displayed,\n    // so this will allow us to operate only on visible nodes\n    return nodes.filter((node) => node.offsetParent !== null);\n}\n/**\n * Gets the numeric key code associated with a keyboard event. This method is for use with DOM level 3 events\n * that still use the deprecated keyCode property.\n */\nexport function getKeyCode(event) {\n    return event === null ? null : event.which || event.keyCode || event.charCode;\n}\n/**\n * Returns the nonce used in the page, if any.\n *\n * Based on https://github.com/cssinjs/jss/blob/master/packages/jss/src/DomRenderer.js\n */\nfunction getNonce() {\n    const node = document.querySelector('meta[property=\"csp-nonce\"]');\n    if (node) {\n        return node.getAttribute(\"content\");\n    }\n    else {\n        return null;\n    }\n}\n/**\n * Test if the document supports :focus-visible\n */\nlet _canUseFocusVisible;\nexport function canUseFocusVisible() {\n    if (typeof _canUseFocusVisible === \"boolean\") {\n        return _canUseFocusVisible;\n    }\n    if (!canUseDOM()) {\n        _canUseFocusVisible = false;\n        return _canUseFocusVisible;\n    }\n    // Check to see if the document supports the focus-visible element\n    const styleElement = document.createElement(\"style\");\n    // If nonces are present on the page, use it when creating the style element\n    // to test focus-visible support.\n    const styleNonce = getNonce();\n    if (styleNonce !== null) {\n        styleElement.setAttribute(\"nonce\", styleNonce);\n    }\n    document.head.appendChild(styleElement);\n    try {\n        styleElement.sheet.insertRule(\"foo:focus-visible {color:inherit}\", 0);\n        _canUseFocusVisible = true;\n    }\n    catch (e) {\n        _canUseFocusVisible = false;\n    }\n    finally {\n        document.head.removeChild(styleElement);\n    }\n    return _canUseFocusVisible;\n}\nlet _canUseCssGrid;\nexport function canUseCssGrid() {\n    if (typeof _canUseCssGrid === \"boolean\") {\n        return _canUseCssGrid;\n    }\n    try {\n        _canUseCssGrid = CSS.supports(\"display\", \"grid\");\n    }\n    catch (_a) {\n        _canUseCssGrid = false;\n    }\n    return _canUseCssGrid;\n}\nexport function canUseForcedColors() {\n    return (canUseDOM() &&\n        (window.matchMedia(\"(forced-colors: none)\").matches ||\n            window.matchMedia(\"(forced-colors: active)\").matches));\n}\nexport function resetDocumentCache() {\n    _canUseCssGrid = undefined;\n    _canUseFocusVisible = undefined;\n}\n/**\n * @deprecated Use 'canUseForcedColors' instead\n */\nexport const canUsedForcedColors = canUseForcedColors;\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,WAA1B;AACA;AACA;AACA;;AACA,OAAO,SAASC,aAAT,GAAgC;EAAA,kCAANC,IAAM;IAANA,IAAM;EAAA;;EACnC,OAAOA,IAAI,CAACC,KAAL,CAAYC,GAAD,IAASA,GAAG,YAAYC,WAAnC,CAAP;AACH;AACD;AACA;AACA;;AACA,OAAO,SAASC,iBAAT,CAA2BC,QAA3B,EAAqCC,QAArC,EAA+C;EAClD,IAAI,CAACD,QAAD,IAAa,CAACC,QAAd,IAA0B,CAACP,aAAa,CAACM,QAAD,CAA5C,EAAwD;IACpD;EACH;;EACD,MAAME,KAAK,GAAGC,KAAK,CAACC,IAAN,CAAWJ,QAAQ,CAACK,gBAAT,CAA0BJ,QAA1B,CAAX,CAAd,CAJkD,CAKlD;EACA;;EACA,OAAOC,KAAK,CAACI,MAAN,CAAcC,IAAD,IAAUA,IAAI,CAACC,YAAL,KAAsB,IAA7C,CAAP;AACH;AACD;AACA;AACA;AACA;;AACA,OAAO,SAASC,UAAT,CAAoBC,KAApB,EAA2B;EAC9B,OAAOA,KAAK,KAAK,IAAV,GAAiB,IAAjB,GAAwBA,KAAK,CAACC,KAAN,IAAeD,KAAK,CAACE,OAArB,IAAgCF,KAAK,CAACG,QAArE;AACH;AACD;AACA;AACA;AACA;AACA;;AACA,SAASC,QAAT,GAAoB;EAChB,MAAMP,IAAI,GAAGQ,QAAQ,CAACC,aAAT,CAAuB,4BAAvB,CAAb;;EACA,IAAIT,IAAJ,EAAU;IACN,OAAOA,IAAI,CAACU,YAAL,CAAkB,SAAlB,CAAP;EACH,CAFD,MAGK;IACD,OAAO,IAAP;EACH;AACJ;AACD;AACA;AACA;;;AACA,IAAIC,mBAAJ;;AACA,OAAO,SAASC,kBAAT,GAA8B;EACjC,IAAI,OAAOD,mBAAP,KAA+B,SAAnC,EAA8C;IAC1C,OAAOA,mBAAP;EACH;;EACD,IAAI,CAACzB,SAAS,EAAd,EAAkB;IACdyB,mBAAmB,GAAG,KAAtB;IACA,OAAOA,mBAAP;EACH,CAPgC,CAQjC;;;EACA,MAAME,YAAY,GAAGL,QAAQ,CAACM,aAAT,CAAuB,OAAvB,CAArB,CATiC,CAUjC;EACA;;EACA,MAAMC,UAAU,GAAGR,QAAQ,EAA3B;;EACA,IAAIQ,UAAU,KAAK,IAAnB,EAAyB;IACrBF,YAAY,CAACG,YAAb,CAA0B,OAA1B,EAAmCD,UAAnC;EACH;;EACDP,QAAQ,CAACS,IAAT,CAAcC,WAAd,CAA0BL,YAA1B;;EACA,IAAI;IACAA,YAAY,CAACM,KAAb,CAAmBC,UAAnB,CAA8B,mCAA9B,EAAmE,CAAnE;IACAT,mBAAmB,GAAG,IAAtB;EACH,CAHD,CAIA,OAAOU,CAAP,EAAU;IACNV,mBAAmB,GAAG,KAAtB;EACH,CAND,SAOQ;IACJH,QAAQ,CAACS,IAAT,CAAcK,WAAd,CAA0BT,YAA1B;EACH;;EACD,OAAOF,mBAAP;AACH;;AACD,IAAIY,cAAJ;;AACA,OAAO,SAASC,aAAT,GAAyB;EAC5B,IAAI,OAAOD,cAAP,KAA0B,SAA9B,EAAyC;IACrC,OAAOA,cAAP;EACH;;EACD,IAAI;IACAA,cAAc,GAAGE,GAAG,CAACC,QAAJ,CAAa,SAAb,EAAwB,MAAxB,CAAjB;EACH,CAFD,CAGA,OAAOC,EAAP,EAAW;IACPJ,cAAc,GAAG,KAAjB;EACH;;EACD,OAAOA,cAAP;AACH;AACD,OAAO,SAASK,kBAAT,GAA8B;EACjC,OAAQ1C,SAAS,OACZ2C,MAAM,CAACC,UAAP,CAAkB,uBAAlB,EAA2CC,OAA3C,IACGF,MAAM,CAACC,UAAP,CAAkB,yBAAlB,EAA6CC,OAFpC,CAAjB;AAGH;AACD,OAAO,SAASC,kBAAT,GAA8B;EACjCT,cAAc,GAAGU,SAAjB;EACAtB,mBAAmB,GAAGsB,SAAtB;AACH;AACD;AACA;AACA;;AACA,OAAO,MAAMC,mBAAmB,GAAGN,kBAA5B"},"metadata":{},"sourceType":"module"}