{"ast":null,"code":"import { DOM } from \"../dom.js\";\nimport { Observable } from \"../observation/observable.js\";\nimport { enableArrayObservation } from \"../observation/array-observer.js\";\nimport { emptyArray } from \"../platform.js\";\nimport { HTMLDirective } from \"./html-directive.js\";\nimport { HTMLView } from \"./view.js\";\nconst defaultRepeatOptions = Object.freeze({\n  positioning: false,\n  recycle: true\n});\n\nfunction bindWithoutPositioning(view, items, index, context) {\n  view.bind(items[index], context);\n}\n\nfunction bindWithPositioning(view, items, index, context) {\n  const childContext = Object.create(context);\n  childContext.index = index;\n  childContext.length = items.length;\n  view.bind(items[index], childContext);\n}\n/**\n * A behavior that renders a template for each item in an array.\n * @public\n */\n\n\nexport class RepeatBehavior {\n  /**\n   * Creates an instance of RepeatBehavior.\n   * @param location - The location in the DOM to render the repeat.\n   * @param itemsBinding - The array to render.\n   * @param isItemsBindingVolatile - Indicates whether the items binding has volatile dependencies.\n   * @param templateBinding - The template to render for each item.\n   * @param isTemplateBindingVolatile - Indicates whether the template binding has volatile dependencies.\n   * @param options - Options used to turn on special repeat features.\n   */\n  constructor(location, itemsBinding, isItemsBindingVolatile, templateBinding, isTemplateBindingVolatile, options) {\n    this.location = location;\n    this.itemsBinding = itemsBinding;\n    this.templateBinding = templateBinding;\n    this.options = options;\n    this.source = null;\n    this.views = [];\n    this.items = null;\n    this.itemsObserver = null;\n    this.originalContext = void 0;\n    this.childContext = void 0;\n    this.bindView = bindWithoutPositioning;\n    this.itemsBindingObserver = Observable.binding(itemsBinding, this, isItemsBindingVolatile);\n    this.templateBindingObserver = Observable.binding(templateBinding, this, isTemplateBindingVolatile);\n\n    if (options.positioning) {\n      this.bindView = bindWithPositioning;\n    }\n  }\n  /**\n   * Bind this behavior to the source.\n   * @param source - The source to bind to.\n   * @param context - The execution context that the binding is operating within.\n   */\n\n\n  bind(source, context) {\n    this.source = source;\n    this.originalContext = context;\n    this.childContext = Object.create(context);\n    this.childContext.parent = source;\n    this.childContext.parentContext = this.originalContext;\n    this.items = this.itemsBindingObserver.observe(source, this.originalContext);\n    this.template = this.templateBindingObserver.observe(source, this.originalContext);\n    this.observeItems(true);\n    this.refreshAllViews();\n  }\n  /**\n   * Unbinds this behavior from the source.\n   * @param source - The source to unbind from.\n   */\n\n\n  unbind() {\n    this.source = null;\n    this.items = null;\n\n    if (this.itemsObserver !== null) {\n      this.itemsObserver.unsubscribe(this);\n    }\n\n    this.unbindAllViews();\n    this.itemsBindingObserver.disconnect();\n    this.templateBindingObserver.disconnect();\n  }\n  /** @internal */\n\n\n  handleChange(source, args) {\n    if (source === this.itemsBinding) {\n      this.items = this.itemsBindingObserver.observe(this.source, this.originalContext);\n      this.observeItems();\n      this.refreshAllViews();\n    } else if (source === this.templateBinding) {\n      this.template = this.templateBindingObserver.observe(this.source, this.originalContext);\n      this.refreshAllViews(true);\n    } else {\n      this.updateViews(args);\n    }\n  }\n\n  observeItems() {\n    let force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    if (!this.items) {\n      this.items = emptyArray;\n      return;\n    }\n\n    const oldObserver = this.itemsObserver;\n    const newObserver = this.itemsObserver = Observable.getNotifier(this.items);\n    const hasNewObserver = oldObserver !== newObserver;\n\n    if (hasNewObserver && oldObserver !== null) {\n      oldObserver.unsubscribe(this);\n    }\n\n    if (hasNewObserver || force) {\n      newObserver.subscribe(this);\n    }\n  }\n\n  updateViews(splices) {\n    const childContext = this.childContext;\n    const views = this.views;\n    const bindView = this.bindView;\n    const items = this.items;\n    const template = this.template;\n    const recycle = this.options.recycle;\n    const leftoverViews = [];\n    let leftoverIndex = 0;\n    let availableViews = 0;\n\n    for (let i = 0, ii = splices.length; i < ii; ++i) {\n      const splice = splices[i];\n      const removed = splice.removed;\n      let removeIndex = 0;\n      let addIndex = splice.index;\n      const end = addIndex + splice.addedCount;\n      const removedViews = views.splice(splice.index, removed.length);\n      const totalAvailableViews = availableViews = leftoverViews.length + removedViews.length;\n\n      for (; addIndex < end; ++addIndex) {\n        const neighbor = views[addIndex];\n        const location = neighbor ? neighbor.firstChild : this.location;\n        let view;\n\n        if (recycle && availableViews > 0) {\n          if (removeIndex <= totalAvailableViews && removedViews.length > 0) {\n            view = removedViews[removeIndex];\n            removeIndex++;\n          } else {\n            view = leftoverViews[leftoverIndex];\n            leftoverIndex++;\n          }\n\n          availableViews--;\n        } else {\n          view = template.create();\n        }\n\n        views.splice(addIndex, 0, view);\n        bindView(view, items, addIndex, childContext);\n        view.insertBefore(location);\n      }\n\n      if (removedViews[removeIndex]) {\n        leftoverViews.push(...removedViews.slice(removeIndex));\n      }\n    }\n\n    for (let i = leftoverIndex, ii = leftoverViews.length; i < ii; ++i) {\n      leftoverViews[i].dispose();\n    }\n\n    if (this.options.positioning) {\n      for (let i = 0, ii = views.length; i < ii; ++i) {\n        const currentContext = views[i].context;\n        currentContext.length = ii;\n        currentContext.index = i;\n      }\n    }\n  }\n\n  refreshAllViews() {\n    let templateChanged = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    const items = this.items;\n    const childContext = this.childContext;\n    const template = this.template;\n    const location = this.location;\n    const bindView = this.bindView;\n    let itemsLength = items.length;\n    let views = this.views;\n    let viewsLength = views.length;\n\n    if (itemsLength === 0 || templateChanged || !this.options.recycle) {\n      // all views need to be removed\n      HTMLView.disposeContiguousBatch(views);\n      viewsLength = 0;\n    }\n\n    if (viewsLength === 0) {\n      // all views need to be created\n      this.views = views = new Array(itemsLength);\n\n      for (let i = 0; i < itemsLength; ++i) {\n        const view = template.create();\n        bindView(view, items, i, childContext);\n        views[i] = view;\n        view.insertBefore(location);\n      }\n    } else {\n      // attempt to reuse existing views with new data\n      let i = 0;\n\n      for (; i < itemsLength; ++i) {\n        if (i < viewsLength) {\n          const view = views[i];\n          bindView(view, items, i, childContext);\n        } else {\n          const view = template.create();\n          bindView(view, items, i, childContext);\n          views.push(view);\n          view.insertBefore(location);\n        }\n      }\n\n      const removed = views.splice(i, viewsLength - i);\n\n      for (i = 0, itemsLength = removed.length; i < itemsLength; ++i) {\n        removed[i].dispose();\n      }\n    }\n  }\n\n  unbindAllViews() {\n    const views = this.views;\n\n    for (let i = 0, ii = views.length; i < ii; ++i) {\n      views[i].unbind();\n    }\n  }\n\n}\n/**\n * A directive that configures list rendering.\n * @public\n */\n\nexport class RepeatDirective extends HTMLDirective {\n  /**\n   * Creates an instance of RepeatDirective.\n   * @param itemsBinding - The binding that provides the array to render.\n   * @param templateBinding - The template binding used to obtain a template to render for each item in the array.\n   * @param options - Options used to turn on special repeat features.\n   */\n  constructor(itemsBinding, templateBinding, options) {\n    super();\n    this.itemsBinding = itemsBinding;\n    this.templateBinding = templateBinding;\n    this.options = options;\n    /**\n     * Creates a placeholder string based on the directive's index within the template.\n     * @param index - The index of the directive within the template.\n     */\n\n    this.createPlaceholder = DOM.createBlockPlaceholder;\n    enableArrayObservation();\n    this.isItemsBindingVolatile = Observable.isVolatileBinding(itemsBinding);\n    this.isTemplateBindingVolatile = Observable.isVolatileBinding(templateBinding);\n  }\n  /**\n   * Creates a behavior for the provided target node.\n   * @param target - The node instance to create the behavior for.\n   */\n\n\n  createBehavior(target) {\n    return new RepeatBehavior(target, this.itemsBinding, this.isItemsBindingVolatile, this.templateBinding, this.isTemplateBindingVolatile, this.options);\n  }\n\n}\n/**\n * A directive that enables list rendering.\n * @param itemsBinding - The array to render.\n * @param templateOrTemplateBinding - The template or a template binding used obtain a template\n * to render for each item in the array.\n * @param options - Options used to turn on special repeat features.\n * @public\n */\n\nexport function repeat(itemsBinding, templateOrTemplateBinding) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultRepeatOptions;\n  const templateBinding = typeof templateOrTemplateBinding === \"function\" ? templateOrTemplateBinding : () => templateOrTemplateBinding;\n  return new RepeatDirective(itemsBinding, templateBinding, Object.assign(Object.assign({}, defaultRepeatOptions), options));\n}","map":{"version":3,"names":["DOM","Observable","enableArrayObservation","emptyArray","HTMLDirective","HTMLView","defaultRepeatOptions","Object","freeze","positioning","recycle","bindWithoutPositioning","view","items","index","context","bind","bindWithPositioning","childContext","create","length","RepeatBehavior","constructor","location","itemsBinding","isItemsBindingVolatile","templateBinding","isTemplateBindingVolatile","options","source","views","itemsObserver","originalContext","bindView","itemsBindingObserver","binding","templateBindingObserver","parent","parentContext","observe","template","observeItems","refreshAllViews","unbind","unsubscribe","unbindAllViews","disconnect","handleChange","args","updateViews","force","oldObserver","newObserver","getNotifier","hasNewObserver","subscribe","splices","leftoverViews","leftoverIndex","availableViews","i","ii","splice","removed","removeIndex","addIndex","end","addedCount","removedViews","totalAvailableViews","neighbor","firstChild","insertBefore","push","slice","dispose","currentContext","templateChanged","itemsLength","viewsLength","disposeContiguousBatch","Array","RepeatDirective","createPlaceholder","createBlockPlaceholder","isVolatileBinding","createBehavior","target","repeat","templateOrTemplateBinding","assign"],"sources":["/Users/gaborcsardi/works/rig/vscode/webview-ui/node_modules/@microsoft/fast-element/dist/esm/templating/repeat.js"],"sourcesContent":["import { DOM } from \"../dom.js\";\nimport { Observable, } from \"../observation/observable.js\";\nimport { enableArrayObservation } from \"../observation/array-observer.js\";\nimport { emptyArray } from \"../platform.js\";\nimport { HTMLDirective } from \"./html-directive.js\";\nimport { HTMLView } from \"./view.js\";\nconst defaultRepeatOptions = Object.freeze({\n    positioning: false,\n    recycle: true,\n});\nfunction bindWithoutPositioning(view, items, index, context) {\n    view.bind(items[index], context);\n}\nfunction bindWithPositioning(view, items, index, context) {\n    const childContext = Object.create(context);\n    childContext.index = index;\n    childContext.length = items.length;\n    view.bind(items[index], childContext);\n}\n/**\n * A behavior that renders a template for each item in an array.\n * @public\n */\nexport class RepeatBehavior {\n    /**\n     * Creates an instance of RepeatBehavior.\n     * @param location - The location in the DOM to render the repeat.\n     * @param itemsBinding - The array to render.\n     * @param isItemsBindingVolatile - Indicates whether the items binding has volatile dependencies.\n     * @param templateBinding - The template to render for each item.\n     * @param isTemplateBindingVolatile - Indicates whether the template binding has volatile dependencies.\n     * @param options - Options used to turn on special repeat features.\n     */\n    constructor(location, itemsBinding, isItemsBindingVolatile, templateBinding, isTemplateBindingVolatile, options) {\n        this.location = location;\n        this.itemsBinding = itemsBinding;\n        this.templateBinding = templateBinding;\n        this.options = options;\n        this.source = null;\n        this.views = [];\n        this.items = null;\n        this.itemsObserver = null;\n        this.originalContext = void 0;\n        this.childContext = void 0;\n        this.bindView = bindWithoutPositioning;\n        this.itemsBindingObserver = Observable.binding(itemsBinding, this, isItemsBindingVolatile);\n        this.templateBindingObserver = Observable.binding(templateBinding, this, isTemplateBindingVolatile);\n        if (options.positioning) {\n            this.bindView = bindWithPositioning;\n        }\n    }\n    /**\n     * Bind this behavior to the source.\n     * @param source - The source to bind to.\n     * @param context - The execution context that the binding is operating within.\n     */\n    bind(source, context) {\n        this.source = source;\n        this.originalContext = context;\n        this.childContext = Object.create(context);\n        this.childContext.parent = source;\n        this.childContext.parentContext = this.originalContext;\n        this.items = this.itemsBindingObserver.observe(source, this.originalContext);\n        this.template = this.templateBindingObserver.observe(source, this.originalContext);\n        this.observeItems(true);\n        this.refreshAllViews();\n    }\n    /**\n     * Unbinds this behavior from the source.\n     * @param source - The source to unbind from.\n     */\n    unbind() {\n        this.source = null;\n        this.items = null;\n        if (this.itemsObserver !== null) {\n            this.itemsObserver.unsubscribe(this);\n        }\n        this.unbindAllViews();\n        this.itemsBindingObserver.disconnect();\n        this.templateBindingObserver.disconnect();\n    }\n    /** @internal */\n    handleChange(source, args) {\n        if (source === this.itemsBinding) {\n            this.items = this.itemsBindingObserver.observe(this.source, this.originalContext);\n            this.observeItems();\n            this.refreshAllViews();\n        }\n        else if (source === this.templateBinding) {\n            this.template = this.templateBindingObserver.observe(this.source, this.originalContext);\n            this.refreshAllViews(true);\n        }\n        else {\n            this.updateViews(args);\n        }\n    }\n    observeItems(force = false) {\n        if (!this.items) {\n            this.items = emptyArray;\n            return;\n        }\n        const oldObserver = this.itemsObserver;\n        const newObserver = (this.itemsObserver = Observable.getNotifier(this.items));\n        const hasNewObserver = oldObserver !== newObserver;\n        if (hasNewObserver && oldObserver !== null) {\n            oldObserver.unsubscribe(this);\n        }\n        if (hasNewObserver || force) {\n            newObserver.subscribe(this);\n        }\n    }\n    updateViews(splices) {\n        const childContext = this.childContext;\n        const views = this.views;\n        const bindView = this.bindView;\n        const items = this.items;\n        const template = this.template;\n        const recycle = this.options.recycle;\n        const leftoverViews = [];\n        let leftoverIndex = 0;\n        let availableViews = 0;\n        for (let i = 0, ii = splices.length; i < ii; ++i) {\n            const splice = splices[i];\n            const removed = splice.removed;\n            let removeIndex = 0;\n            let addIndex = splice.index;\n            const end = addIndex + splice.addedCount;\n            const removedViews = views.splice(splice.index, removed.length);\n            const totalAvailableViews = (availableViews =\n                leftoverViews.length + removedViews.length);\n            for (; addIndex < end; ++addIndex) {\n                const neighbor = views[addIndex];\n                const location = neighbor ? neighbor.firstChild : this.location;\n                let view;\n                if (recycle && availableViews > 0) {\n                    if (removeIndex <= totalAvailableViews && removedViews.length > 0) {\n                        view = removedViews[removeIndex];\n                        removeIndex++;\n                    }\n                    else {\n                        view = leftoverViews[leftoverIndex];\n                        leftoverIndex++;\n                    }\n                    availableViews--;\n                }\n                else {\n                    view = template.create();\n                }\n                views.splice(addIndex, 0, view);\n                bindView(view, items, addIndex, childContext);\n                view.insertBefore(location);\n            }\n            if (removedViews[removeIndex]) {\n                leftoverViews.push(...removedViews.slice(removeIndex));\n            }\n        }\n        for (let i = leftoverIndex, ii = leftoverViews.length; i < ii; ++i) {\n            leftoverViews[i].dispose();\n        }\n        if (this.options.positioning) {\n            for (let i = 0, ii = views.length; i < ii; ++i) {\n                const currentContext = views[i].context;\n                currentContext.length = ii;\n                currentContext.index = i;\n            }\n        }\n    }\n    refreshAllViews(templateChanged = false) {\n        const items = this.items;\n        const childContext = this.childContext;\n        const template = this.template;\n        const location = this.location;\n        const bindView = this.bindView;\n        let itemsLength = items.length;\n        let views = this.views;\n        let viewsLength = views.length;\n        if (itemsLength === 0 || templateChanged || !this.options.recycle) {\n            // all views need to be removed\n            HTMLView.disposeContiguousBatch(views);\n            viewsLength = 0;\n        }\n        if (viewsLength === 0) {\n            // all views need to be created\n            this.views = views = new Array(itemsLength);\n            for (let i = 0; i < itemsLength; ++i) {\n                const view = template.create();\n                bindView(view, items, i, childContext);\n                views[i] = view;\n                view.insertBefore(location);\n            }\n        }\n        else {\n            // attempt to reuse existing views with new data\n            let i = 0;\n            for (; i < itemsLength; ++i) {\n                if (i < viewsLength) {\n                    const view = views[i];\n                    bindView(view, items, i, childContext);\n                }\n                else {\n                    const view = template.create();\n                    bindView(view, items, i, childContext);\n                    views.push(view);\n                    view.insertBefore(location);\n                }\n            }\n            const removed = views.splice(i, viewsLength - i);\n            for (i = 0, itemsLength = removed.length; i < itemsLength; ++i) {\n                removed[i].dispose();\n            }\n        }\n    }\n    unbindAllViews() {\n        const views = this.views;\n        for (let i = 0, ii = views.length; i < ii; ++i) {\n            views[i].unbind();\n        }\n    }\n}\n/**\n * A directive that configures list rendering.\n * @public\n */\nexport class RepeatDirective extends HTMLDirective {\n    /**\n     * Creates an instance of RepeatDirective.\n     * @param itemsBinding - The binding that provides the array to render.\n     * @param templateBinding - The template binding used to obtain a template to render for each item in the array.\n     * @param options - Options used to turn on special repeat features.\n     */\n    constructor(itemsBinding, templateBinding, options) {\n        super();\n        this.itemsBinding = itemsBinding;\n        this.templateBinding = templateBinding;\n        this.options = options;\n        /**\n         * Creates a placeholder string based on the directive's index within the template.\n         * @param index - The index of the directive within the template.\n         */\n        this.createPlaceholder = DOM.createBlockPlaceholder;\n        enableArrayObservation();\n        this.isItemsBindingVolatile = Observable.isVolatileBinding(itemsBinding);\n        this.isTemplateBindingVolatile = Observable.isVolatileBinding(templateBinding);\n    }\n    /**\n     * Creates a behavior for the provided target node.\n     * @param target - The node instance to create the behavior for.\n     */\n    createBehavior(target) {\n        return new RepeatBehavior(target, this.itemsBinding, this.isItemsBindingVolatile, this.templateBinding, this.isTemplateBindingVolatile, this.options);\n    }\n}\n/**\n * A directive that enables list rendering.\n * @param itemsBinding - The array to render.\n * @param templateOrTemplateBinding - The template or a template binding used obtain a template\n * to render for each item in the array.\n * @param options - Options used to turn on special repeat features.\n * @public\n */\nexport function repeat(itemsBinding, templateOrTemplateBinding, options = defaultRepeatOptions) {\n    const templateBinding = typeof templateOrTemplateBinding === \"function\"\n        ? templateOrTemplateBinding\n        : () => templateOrTemplateBinding;\n    return new RepeatDirective(itemsBinding, templateBinding, Object.assign(Object.assign({}, defaultRepeatOptions), options));\n}\n"],"mappings":"AAAA,SAASA,GAAT,QAAoB,WAApB;AACA,SAASC,UAAT,QAA4B,8BAA5B;AACA,SAASC,sBAAT,QAAuC,kCAAvC;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA,SAASC,aAAT,QAA8B,qBAA9B;AACA,SAASC,QAAT,QAAyB,WAAzB;AACA,MAAMC,oBAAoB,GAAGC,MAAM,CAACC,MAAP,CAAc;EACvCC,WAAW,EAAE,KAD0B;EAEvCC,OAAO,EAAE;AAF8B,CAAd,CAA7B;;AAIA,SAASC,sBAAT,CAAgCC,IAAhC,EAAsCC,KAAtC,EAA6CC,KAA7C,EAAoDC,OAApD,EAA6D;EACzDH,IAAI,CAACI,IAAL,CAAUH,KAAK,CAACC,KAAD,CAAf,EAAwBC,OAAxB;AACH;;AACD,SAASE,mBAAT,CAA6BL,IAA7B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,OAAjD,EAA0D;EACtD,MAAMG,YAAY,GAAGX,MAAM,CAACY,MAAP,CAAcJ,OAAd,CAArB;EACAG,YAAY,CAACJ,KAAb,GAAqBA,KAArB;EACAI,YAAY,CAACE,MAAb,GAAsBP,KAAK,CAACO,MAA5B;EACAR,IAAI,CAACI,IAAL,CAAUH,KAAK,CAACC,KAAD,CAAf,EAAwBI,YAAxB;AACH;AACD;AACA;AACA;AACA;;;AACA,OAAO,MAAMG,cAAN,CAAqB;EACxB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,WAAW,CAACC,QAAD,EAAWC,YAAX,EAAyBC,sBAAzB,EAAiDC,eAAjD,EAAkEC,yBAAlE,EAA6FC,OAA7F,EAAsG;IAC7G,KAAKL,QAAL,GAAgBA,QAAhB;IACA,KAAKC,YAAL,GAAoBA,YAApB;IACA,KAAKE,eAAL,GAAuBA,eAAvB;IACA,KAAKE,OAAL,GAAeA,OAAf;IACA,KAAKC,MAAL,GAAc,IAAd;IACA,KAAKC,KAAL,GAAa,EAAb;IACA,KAAKjB,KAAL,GAAa,IAAb;IACA,KAAKkB,aAAL,GAAqB,IAArB;IACA,KAAKC,eAAL,GAAuB,KAAK,CAA5B;IACA,KAAKd,YAAL,GAAoB,KAAK,CAAzB;IACA,KAAKe,QAAL,GAAgBtB,sBAAhB;IACA,KAAKuB,oBAAL,GAA4BjC,UAAU,CAACkC,OAAX,CAAmBX,YAAnB,EAAiC,IAAjC,EAAuCC,sBAAvC,CAA5B;IACA,KAAKW,uBAAL,GAA+BnC,UAAU,CAACkC,OAAX,CAAmBT,eAAnB,EAAoC,IAApC,EAA0CC,yBAA1C,CAA/B;;IACA,IAAIC,OAAO,CAACnB,WAAZ,EAAyB;MACrB,KAAKwB,QAAL,GAAgBhB,mBAAhB;IACH;EACJ;EACD;AACJ;AACA;AACA;AACA;;;EACID,IAAI,CAACa,MAAD,EAASd,OAAT,EAAkB;IAClB,KAAKc,MAAL,GAAcA,MAAd;IACA,KAAKG,eAAL,GAAuBjB,OAAvB;IACA,KAAKG,YAAL,GAAoBX,MAAM,CAACY,MAAP,CAAcJ,OAAd,CAApB;IACA,KAAKG,YAAL,CAAkBmB,MAAlB,GAA2BR,MAA3B;IACA,KAAKX,YAAL,CAAkBoB,aAAlB,GAAkC,KAAKN,eAAvC;IACA,KAAKnB,KAAL,GAAa,KAAKqB,oBAAL,CAA0BK,OAA1B,CAAkCV,MAAlC,EAA0C,KAAKG,eAA/C,CAAb;IACA,KAAKQ,QAAL,GAAgB,KAAKJ,uBAAL,CAA6BG,OAA7B,CAAqCV,MAArC,EAA6C,KAAKG,eAAlD,CAAhB;IACA,KAAKS,YAAL,CAAkB,IAAlB;IACA,KAAKC,eAAL;EACH;EACD;AACJ;AACA;AACA;;;EACIC,MAAM,GAAG;IACL,KAAKd,MAAL,GAAc,IAAd;IACA,KAAKhB,KAAL,GAAa,IAAb;;IACA,IAAI,KAAKkB,aAAL,KAAuB,IAA3B,EAAiC;MAC7B,KAAKA,aAAL,CAAmBa,WAAnB,CAA+B,IAA/B;IACH;;IACD,KAAKC,cAAL;IACA,KAAKX,oBAAL,CAA0BY,UAA1B;IACA,KAAKV,uBAAL,CAA6BU,UAA7B;EACH;EACD;;;EACAC,YAAY,CAAClB,MAAD,EAASmB,IAAT,EAAe;IACvB,IAAInB,MAAM,KAAK,KAAKL,YAApB,EAAkC;MAC9B,KAAKX,KAAL,GAAa,KAAKqB,oBAAL,CAA0BK,OAA1B,CAAkC,KAAKV,MAAvC,EAA+C,KAAKG,eAApD,CAAb;MACA,KAAKS,YAAL;MACA,KAAKC,eAAL;IACH,CAJD,MAKK,IAAIb,MAAM,KAAK,KAAKH,eAApB,EAAqC;MACtC,KAAKc,QAAL,GAAgB,KAAKJ,uBAAL,CAA6BG,OAA7B,CAAqC,KAAKV,MAA1C,EAAkD,KAAKG,eAAvD,CAAhB;MACA,KAAKU,eAAL,CAAqB,IAArB;IACH,CAHI,MAIA;MACD,KAAKO,WAAL,CAAiBD,IAAjB;IACH;EACJ;;EACDP,YAAY,GAAgB;IAAA,IAAfS,KAAe,uEAAP,KAAO;;IACxB,IAAI,CAAC,KAAKrC,KAAV,EAAiB;MACb,KAAKA,KAAL,GAAaV,UAAb;MACA;IACH;;IACD,MAAMgD,WAAW,GAAG,KAAKpB,aAAzB;IACA,MAAMqB,WAAW,GAAI,KAAKrB,aAAL,GAAqB9B,UAAU,CAACoD,WAAX,CAAuB,KAAKxC,KAA5B,CAA1C;IACA,MAAMyC,cAAc,GAAGH,WAAW,KAAKC,WAAvC;;IACA,IAAIE,cAAc,IAAIH,WAAW,KAAK,IAAtC,EAA4C;MACxCA,WAAW,CAACP,WAAZ,CAAwB,IAAxB;IACH;;IACD,IAAIU,cAAc,IAAIJ,KAAtB,EAA6B;MACzBE,WAAW,CAACG,SAAZ,CAAsB,IAAtB;IACH;EACJ;;EACDN,WAAW,CAACO,OAAD,EAAU;IACjB,MAAMtC,YAAY,GAAG,KAAKA,YAA1B;IACA,MAAMY,KAAK,GAAG,KAAKA,KAAnB;IACA,MAAMG,QAAQ,GAAG,KAAKA,QAAtB;IACA,MAAMpB,KAAK,GAAG,KAAKA,KAAnB;IACA,MAAM2B,QAAQ,GAAG,KAAKA,QAAtB;IACA,MAAM9B,OAAO,GAAG,KAAKkB,OAAL,CAAalB,OAA7B;IACA,MAAM+C,aAAa,GAAG,EAAtB;IACA,IAAIC,aAAa,GAAG,CAApB;IACA,IAAIC,cAAc,GAAG,CAArB;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGL,OAAO,CAACpC,MAA7B,EAAqCwC,CAAC,GAAGC,EAAzC,EAA6C,EAAED,CAA/C,EAAkD;MAC9C,MAAME,MAAM,GAAGN,OAAO,CAACI,CAAD,CAAtB;MACA,MAAMG,OAAO,GAAGD,MAAM,CAACC,OAAvB;MACA,IAAIC,WAAW,GAAG,CAAlB;MACA,IAAIC,QAAQ,GAAGH,MAAM,CAAChD,KAAtB;MACA,MAAMoD,GAAG,GAAGD,QAAQ,GAAGH,MAAM,CAACK,UAA9B;MACA,MAAMC,YAAY,GAAGtC,KAAK,CAACgC,MAAN,CAAaA,MAAM,CAAChD,KAApB,EAA2BiD,OAAO,CAAC3C,MAAnC,CAArB;MACA,MAAMiD,mBAAmB,GAAIV,cAAc,GACvCF,aAAa,CAACrC,MAAd,GAAuBgD,YAAY,CAAChD,MADxC;;MAEA,OAAO6C,QAAQ,GAAGC,GAAlB,EAAuB,EAAED,QAAzB,EAAmC;QAC/B,MAAMK,QAAQ,GAAGxC,KAAK,CAACmC,QAAD,CAAtB;QACA,MAAM1C,QAAQ,GAAG+C,QAAQ,GAAGA,QAAQ,CAACC,UAAZ,GAAyB,KAAKhD,QAAvD;QACA,IAAIX,IAAJ;;QACA,IAAIF,OAAO,IAAIiD,cAAc,GAAG,CAAhC,EAAmC;UAC/B,IAAIK,WAAW,IAAIK,mBAAf,IAAsCD,YAAY,CAAChD,MAAb,GAAsB,CAAhE,EAAmE;YAC/DR,IAAI,GAAGwD,YAAY,CAACJ,WAAD,CAAnB;YACAA,WAAW;UACd,CAHD,MAIK;YACDpD,IAAI,GAAG6C,aAAa,CAACC,aAAD,CAApB;YACAA,aAAa;UAChB;;UACDC,cAAc;QACjB,CAVD,MAWK;UACD/C,IAAI,GAAG4B,QAAQ,CAACrB,MAAT,EAAP;QACH;;QACDW,KAAK,CAACgC,MAAN,CAAaG,QAAb,EAAuB,CAAvB,EAA0BrD,IAA1B;QACAqB,QAAQ,CAACrB,IAAD,EAAOC,KAAP,EAAcoD,QAAd,EAAwB/C,YAAxB,CAAR;QACAN,IAAI,CAAC4D,YAAL,CAAkBjD,QAAlB;MACH;;MACD,IAAI6C,YAAY,CAACJ,WAAD,CAAhB,EAA+B;QAC3BP,aAAa,CAACgB,IAAd,CAAmB,GAAGL,YAAY,CAACM,KAAb,CAAmBV,WAAnB,CAAtB;MACH;IACJ;;IACD,KAAK,IAAIJ,CAAC,GAAGF,aAAR,EAAuBG,EAAE,GAAGJ,aAAa,CAACrC,MAA/C,EAAuDwC,CAAC,GAAGC,EAA3D,EAA+D,EAAED,CAAjE,EAAoE;MAChEH,aAAa,CAACG,CAAD,CAAb,CAAiBe,OAAjB;IACH;;IACD,IAAI,KAAK/C,OAAL,CAAanB,WAAjB,EAA8B;MAC1B,KAAK,IAAImD,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAG/B,KAAK,CAACV,MAA3B,EAAmCwC,CAAC,GAAGC,EAAvC,EAA2C,EAAED,CAA7C,EAAgD;QAC5C,MAAMgB,cAAc,GAAG9C,KAAK,CAAC8B,CAAD,CAAL,CAAS7C,OAAhC;QACA6D,cAAc,CAACxD,MAAf,GAAwByC,EAAxB;QACAe,cAAc,CAAC9D,KAAf,GAAuB8C,CAAvB;MACH;IACJ;EACJ;;EACDlB,eAAe,GAA0B;IAAA,IAAzBmC,eAAyB,uEAAP,KAAO;IACrC,MAAMhE,KAAK,GAAG,KAAKA,KAAnB;IACA,MAAMK,YAAY,GAAG,KAAKA,YAA1B;IACA,MAAMsB,QAAQ,GAAG,KAAKA,QAAtB;IACA,MAAMjB,QAAQ,GAAG,KAAKA,QAAtB;IACA,MAAMU,QAAQ,GAAG,KAAKA,QAAtB;IACA,IAAI6C,WAAW,GAAGjE,KAAK,CAACO,MAAxB;IACA,IAAIU,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAIiD,WAAW,GAAGjD,KAAK,CAACV,MAAxB;;IACA,IAAI0D,WAAW,KAAK,CAAhB,IAAqBD,eAArB,IAAwC,CAAC,KAAKjD,OAAL,CAAalB,OAA1D,EAAmE;MAC/D;MACAL,QAAQ,CAAC2E,sBAAT,CAAgClD,KAAhC;MACAiD,WAAW,GAAG,CAAd;IACH;;IACD,IAAIA,WAAW,KAAK,CAApB,EAAuB;MACnB;MACA,KAAKjD,KAAL,GAAaA,KAAK,GAAG,IAAImD,KAAJ,CAAUH,WAAV,CAArB;;MACA,KAAK,IAAIlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,WAApB,EAAiC,EAAElB,CAAnC,EAAsC;QAClC,MAAMhD,IAAI,GAAG4B,QAAQ,CAACrB,MAAT,EAAb;QACAc,QAAQ,CAACrB,IAAD,EAAOC,KAAP,EAAc+C,CAAd,EAAiB1C,YAAjB,CAAR;QACAY,KAAK,CAAC8B,CAAD,CAAL,GAAWhD,IAAX;QACAA,IAAI,CAAC4D,YAAL,CAAkBjD,QAAlB;MACH;IACJ,CATD,MAUK;MACD;MACA,IAAIqC,CAAC,GAAG,CAAR;;MACA,OAAOA,CAAC,GAAGkB,WAAX,EAAwB,EAAElB,CAA1B,EAA6B;QACzB,IAAIA,CAAC,GAAGmB,WAAR,EAAqB;UACjB,MAAMnE,IAAI,GAAGkB,KAAK,CAAC8B,CAAD,CAAlB;UACA3B,QAAQ,CAACrB,IAAD,EAAOC,KAAP,EAAc+C,CAAd,EAAiB1C,YAAjB,CAAR;QACH,CAHD,MAIK;UACD,MAAMN,IAAI,GAAG4B,QAAQ,CAACrB,MAAT,EAAb;UACAc,QAAQ,CAACrB,IAAD,EAAOC,KAAP,EAAc+C,CAAd,EAAiB1C,YAAjB,CAAR;UACAY,KAAK,CAAC2C,IAAN,CAAW7D,IAAX;UACAA,IAAI,CAAC4D,YAAL,CAAkBjD,QAAlB;QACH;MACJ;;MACD,MAAMwC,OAAO,GAAGjC,KAAK,CAACgC,MAAN,CAAaF,CAAb,EAAgBmB,WAAW,GAAGnB,CAA9B,CAAhB;;MACA,KAAKA,CAAC,GAAG,CAAJ,EAAOkB,WAAW,GAAGf,OAAO,CAAC3C,MAAlC,EAA0CwC,CAAC,GAAGkB,WAA9C,EAA2D,EAAElB,CAA7D,EAAgE;QAC5DG,OAAO,CAACH,CAAD,CAAP,CAAWe,OAAX;MACH;IACJ;EACJ;;EACD9B,cAAc,GAAG;IACb,MAAMf,KAAK,GAAG,KAAKA,KAAnB;;IACA,KAAK,IAAI8B,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAG/B,KAAK,CAACV,MAA3B,EAAmCwC,CAAC,GAAGC,EAAvC,EAA2C,EAAED,CAA7C,EAAgD;MAC5C9B,KAAK,CAAC8B,CAAD,CAAL,CAASjB,MAAT;IACH;EACJ;;AAlMuB;AAoM5B;AACA;AACA;AACA;;AACA,OAAO,MAAMuC,eAAN,SAA8B9E,aAA9B,CAA4C;EAC/C;AACJ;AACA;AACA;AACA;AACA;EACIkB,WAAW,CAACE,YAAD,EAAeE,eAAf,EAAgCE,OAAhC,EAAyC;IAChD;IACA,KAAKJ,YAAL,GAAoBA,YAApB;IACA,KAAKE,eAAL,GAAuBA,eAAvB;IACA,KAAKE,OAAL,GAAeA,OAAf;IACA;AACR;AACA;AACA;;IACQ,KAAKuD,iBAAL,GAAyBnF,GAAG,CAACoF,sBAA7B;IACAlF,sBAAsB;IACtB,KAAKuB,sBAAL,GAA8BxB,UAAU,CAACoF,iBAAX,CAA6B7D,YAA7B,CAA9B;IACA,KAAKG,yBAAL,GAAiC1B,UAAU,CAACoF,iBAAX,CAA6B3D,eAA7B,CAAjC;EACH;EACD;AACJ;AACA;AACA;;;EACI4D,cAAc,CAACC,MAAD,EAAS;IACnB,OAAO,IAAIlE,cAAJ,CAAmBkE,MAAnB,EAA2B,KAAK/D,YAAhC,EAA8C,KAAKC,sBAAnD,EAA2E,KAAKC,eAAhF,EAAiG,KAAKC,yBAAtG,EAAiI,KAAKC,OAAtI,CAAP;EACH;;AA3B8C;AA6BnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAAS4D,MAAT,CAAgBhE,YAAhB,EAA8BiE,yBAA9B,EAAyF;EAAA,IAAhC7D,OAAgC,uEAAtBtB,oBAAsB;EAC5F,MAAMoB,eAAe,GAAG,OAAO+D,yBAAP,KAAqC,UAArC,GAClBA,yBADkB,GAElB,MAAMA,yBAFZ;EAGA,OAAO,IAAIP,eAAJ,CAAoB1D,YAApB,EAAkCE,eAAlC,EAAmDnB,MAAM,CAACmF,MAAP,CAAcnF,MAAM,CAACmF,MAAP,CAAc,EAAd,EAAkBpF,oBAAlB,CAAd,EAAuDsB,OAAvD,CAAnD,CAAP;AACH"},"metadata":{},"sourceType":"module"}